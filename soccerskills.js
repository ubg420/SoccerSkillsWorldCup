var rdres=1;screen.width<=680&&(rdres=2);for(var bimg=[],blimg=[],i=0;i<6;i++)bimg[i]=new Image,bimg[i].src="data/img"+i+".png";for(i=0;i<4;i++)blimg[i]=new Image,blimg[i].src="data/ball"+(i+1)+".png";var blshd=new Image;blshd.src="data/ballshad.png";var logo=new Image;logo.src="data/interface"+rdres+"/logo.png";var bgimg=[];for(i=0;i<6;i++)bgimg[i]=new Image,bgimg[i].src="data/interface"+rdres+"/bg"+i+".png";var eflog=[];for(i=0;i<2;i++)eflog[i]=new Image,eflog[i].src="data/interface"+rdres+"/ef"+(i+1)+".png";var insti=new Image;insti.src="data/interface"+rdres+"/inst.png";for(var btn=[],k=0;k<2;k++){btn[k]=[];for(i=0;i<2;i++)btn[k][i]=new Image,btn[k][i].src="data/interface"+rdres+"/btn"+k+i+".png"}var cupimg=new Image;cupimg.src="data/interface"+rdres+"/cup.png";var barimg=new Image;barimg.src="data/interface"+rdres+"/bar.png";var worldmap=new Image;worldmap.src="data/interface"+rdres+"/worldmap.png";var starimg=[];for(i=0;i<3;i++)starimg[i]=new Image,starimg[i].src="data/interface"+rdres+"/star"+(i+1)+".png";var troph=[],stroph=[],rewads=null,forma=null,confeloaded=!1,confe=[];function loadconfe(){for(var t=0;t<29;t++)confe[t]=new Image,confe[t].src="data/interface"+rdres+"/conf/"+t+".png";confeloaded=!0}var pokiready=!1,buloaded=0,bimgdone=[!1,!1,!1,!1,!1,!1],bimgfrk=[],readcup=0,plimg=[],plimgok=[],kpimg=[],kpimgok=[],clickmade=!1,sndp=[],sndload=[],loptrk=[],loptrksrc=[],loptrkgn=[],lopload=[],lopfade=[],sndco=null,sndgn=null,sndcn=!1;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,sndco=new AudioContext,isios||(sndgn=sndco.createGain()).connect(sndco.destination);for(i=0;i<4;i++)lopload[i]=-1,loptrk[i]=new AudioContext,isios||(loptrkgn[i]=loptrk[i].createGain(),loptrkgn[i].connect(loptrk[i].destination)),lopfade[i]=0;sndcn=!0}catch(t){sndcn=!1}var fisrtsndload=!1,onk=-1,oni=0,onj=0;function loaddata(){if(!fisrtsndload){var t=Math.floor(1e4*Math.random());(new Image).src="https://radicalplay.com:17603/"+t+".gif",lopload[1]=0,loadloop("data/soundtrack/loop1.mp3",1),sndload[17]=!1,loadsnd("data/soundtrack/17.mp3",17),sndload[18]=!1,loadsnd("data/soundtrack/18.mp3",18),multstatus(),fisrtsndload=!0}if(-1!=onk)for(var l=0;l<10&&-1!=onk;){var a=17;onk>=3&&(a=14);var o=Math.floor(bimg[onk].width/a),n=Math.floor(bimg[onk].height/5),e=document.createElement("canvas");e.width=o,e.height=n;var r=e.getContext("2d");0==oni&&0==onj&&(bimgfrk[onk]=[],buloaded+=10),oni<8&&(0==onj&&(bimgfrk[onk][oni]=[]),onj<a&&(oni<5?r.drawImage(bimg[onk],-onj*o,-oni*n):(r.translate(o,0),r.scale(-1,1),r.drawImage(bimg[onk],-onj*o,-(8-oni)*n)),bimgfrk[onk][oni][onj]=r.getImageData(0,0,o,n),buloaded++,onj++)),onj==a&&(8==++oni?(bimgdone[onk]=!0,onk=-1):onj=0),l++}if(-1==onk)for(var m=0;m<6;m++)!bimgdone[m]&&bimg[m].width&&(onk=m,oni=0,onj=0);var d=0;for(m=0;m<6;m++)bimgdone[m]&&d++;6==d&&0==readcup&&(readcup=1,loadcup()),rd.fillStyle="#E8FFBB",rd.fillRect(0,0,canw,canh);var i=.5*(mw+mh);if(rd.fillStyle="#003A44",rd.font=17*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="top",rd.fillText("LOADING... "+Math.round(buloaded/860*100)+"%",.5*canw,330*mh),rd.fillStyle="#008FCA",rd.fillRect(.5*canw-100*mw,330*mh+35*i,200*mw*(buloaded/860),24*mh),rd.strokeStyle="#00BCC8",rd.strokeRect(.5*canw-100*mw,330*mh+35*i,200*mw,24*mh),6==d&&2==readcup&&pokiready){lopload[0]=0,loadloop("data/soundtrack/loop0.mp3",0),lopload[2]=0,loadloop("data/soundtrack/loop2.mp3",2);for(var p=0;p<17;p++)sndload[p]=!1,loadsnd("data/soundtrack/"+p+".mp3",p);for(p=0;p<4;p++)troph[p]=new Image,troph[p].src="data/interface"+rdres+"/troph"+p+".png";for(p=0;p<3;p++)stroph[p]=new Image,stroph[p].src="data/interface"+rdres+"/troph"+(p+1)+"s.png";(rewads=new Image).src="data/interface"+rdres+"/rds.png",(forma=new Image).src="data/interface"+rdres+"/form.png",sndload[19]=!1,loadsnd("data/soundtrack/19.mp3",19),-1==(firstime=getInfo("firstime"))&&(nodowning=!1),points=getInfo("points"),wontro[1]=getInfo("wontro[1]"),wontro[2]=getInfo("wontro[2]"),wontro[3]=getInfo("wontro[3]"),onform=getInfo("onform"),formtweak=getInfo("formtweak"),fase=1,loadingComplete()}}var frontname="",dispname="",ntm=0,team=[],teamtats=[],teamflag=[],steamflag=[],mapos=[];function loadcup(){var t=new XMLHttpRequest;t.open("GET","worldcup/status.txt",!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0==t.status)){for(var l=t.responseText.split("\n"),a=0;a<l.length;a++){var o=l[a].trim();strtsWith(o,"frontname")&&(frontname=getFuncStringValue("frontname",o,0)),strtsWith(o,"name")&&(dispname=getFuncStringValue("name",o,0)),strtsWith(o,"team")&&(team[ntm]=getFuncStringValue("team",o,0),teamtats[ntm]=getFuncIntValue("team",o,1),mapos[ntm]=[],mapos[ntm][0]=getFuncIntValue("team",o,2),mapos[ntm][1]=getFuncIntValue("team",o,3),teamflag[ntm]=new Image,teamflag[ntm].src="worldcup/teams/logos"+rdres+"/"+team[ntm].replace(" ","-")+".png",ntm++)}for(a=0;a<ntm;a++)steamflag[a]=new Image,steamflag[a].src="worldcup/teams/logos"+rdres+"/small/"+team[a].replace(" ","-")+".png";buloaded+=56,readcup=2}},t.send(null)}function loadsnd(t,l){if(sndcn){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){sndco.decodeAudioData(a.response,function(t){sndp[l]=t},onError),sndload[l]=!0},a.send()}else sndp[l]=new Audio(t),sndload[l]=!0}function loadloop(t,l){if(sndcn){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){loptrk[l].decodeAudioData(a.response,function(t){loptrksrc[l]=loptrk[l].createBufferSource(),loptrksrc[l].buffer=t},onError),isios?lopload[l]=11:lopload[l]=1},a.send()}else loptrk[l]=new Audio(t),lopload[l]=1}function onError(){}function playsnd(t,l){var a;mutegame||mutemusic&&6!=fase||halt||(sndcn?sndload[t]&&(t<=11||t>=17?((a=sndco.createBufferSource()).buffer=sndp[t],isios?a.connect(sndco.destination):(sndgn.gain.value=l,a.connect(sndgn)),a.start(0)):((a=loptrk[0].createBufferSource()).buffer=sndp[t],a.connect(loptrk[0].destination),a.start(0))):(sndp[t].volume=l,sndp[t].currentTime=0,sndp[t].play()))}var cntdrp=0;function playlop(t){if(clickmade)if(sndcn){if(3==lopload[t]&&(isios||(loptrkgn[t].gain.value=1),loptrk[t].resume(),lopload[t]=2,lopfade[t]=100),1==lopload[t])try{isios?loptrksrc[t].connect(loptrk[t].destination):(loptrkgn[t].gain.value=1,loptrksrc[t].connect(loptrkgn[t])),loptrksrc[t].loop=!0,loptrksrc[t].start(0),lopload[t]=2,lopfade[t]=100}catch(t){}11==lopload[t]&&(loptrksrc[t].connect(loptrk[t].destination),loptrksrc[t].loop=!0,loptrksrc[t].start(0),lopload[t]=14,cntdrp=20)}else loptrk[t].play(),loptrk[t].volume=1,loptrk[t].loop=!0,lopload[t]=2,lopfade[t]=100}function pauselop(t){2==lopload[t]&&(sndcn?(isios||(loptrkgn[t].gain.value=0),loptrk[t].suspend()):loptrk[t].pause(),lopload[t]=3)}function fadelop(t){2==lopload[t]&&(isios&&(lopfade[t]=0),0==lopfade[t]?(sndcn?loptrk[t].suspend():loptrk[t].pause(),lopload[t]=3):(sndcn?loptrkgn[t].gain.value=lopfade[t]/100:loptrk[t].volume=lopfade[t]/100,lopfade[t]--))}var ont=0,loadteam=[1,1],npli=0,inpli=0,ilaodedteam="",loaded=0,textlines=[];function readteam(t,l){var a="worldcup/teams/"+l.replace(" ","-")+".txt",o=new XMLHttpRequest;o.open("GET",a,!1),o.onreadystatechange=function(){if(4===o.readyState&&(200===o.status||0==o.status)){var l=o.responseText;textlines[t]=l.split("\n"),loadteam[t]=4,loaded+=12}},o.send(null)}var clashco=[0,0],shirt=[0,0,0],short=[0,0,0],socks=[0,0,0],kpshirt=[0,0,0],kpgloves=[0,0,0],kpsocks=[0,0,0],readl=0;function maketeam(t){var l=!1;if(4==loadteam[t]){if(0==t){for(var a=0;a<npli;a++)plimg[a]=null;npli=0}else{for(a=inpli;a<npli;a++)plimg[a]=null;npli=inpli}kpimg[t]=null;for(var o=0;o<textlines[t].length;o++){var n=textlines[t][o].trim();if(!multiflex){if(strtsWith(n,"plan("))for(var e=0;e<3;e++)plan[t][e]=getFuncIntValue("plan",n,e);strtsWith(n,"planpos(")&&(planpos[t]=getFuncIntValue("planpos",n,0))}if(l){if(strtsWith(n,"clash-shirt"))for(e=0;e<3;e++)shirt[e]=getFuncIntValue("clash-shirt",n,e);if(strtsWith(n,"clash-short"))for(e=0;e<3;e++)short[e]=getFuncIntValue("clash-short",n,e);if(strtsWith(n,"clash-socks"))for(e=0;e<3;e++)socks[e]=getFuncIntValue("clash-socks",n,e)}else{if(strtsWith(n,"shirt")){for(var e=0;e<3;e++)shirt[e]=getFuncIntValue("shirt",n,e);0==t&&(clashco[0]=shirt[0],clashco[1]=shirt[2]),1==t&&(clashco[1]<15&&Math.abs(shirt[0]-clashco[0])<17&&shirt[2]<=15&&(l=!0),clashco[1]>=15&&shirt[2]>=15&&(l=!0))}if(strtsWith(n,"short"))for(var e=0;e<3;e++)short[e]=getFuncIntValue("short",n,e);if(strtsWith(n,"socks"))for(var e=0;e<3;e++)socks[e]=getFuncIntValue("socks",n,e)}if(strtsWith(n,"keeper-shirt"))for(e=0;e<3;e++)kpshirt[e]=getFuncIntValue("keeper-shirt",n,e);if(strtsWith(n,"keeper-gloves"))for(e=0;e<3;e++)kpgloves[e]=getFuncIntValue("keeper-gloves",n,e);if(strtsWith(n,"keeper-socks"))for(e=0;e<3;e++)kpsocks[e]=getFuncIntValue("keeper-socks",n,e)}loadteam[t]=5,readl=0}if(5==loadteam[t]){for(var r=!1;readl<textlines[t].length&&!r;){if(strtsWith(n=textlines[t][readl].trim(),"newplayer")){var m=getFuncIntValue("newplayer",n,0)+10*t;pli[m]=npli;var d=getFuncIntValue("newplayer",n,1),i=getFuncIntValue("newplayer",n,2),p=getFuncIntValue("newplayer",n,3),s=getFuncIntValue("newplayer",n,4);plimg[pli[m]]=[],plimgok[pli[m]]=[];for(a=0;a<8;a++){plimg[pli[m]][a]=[],plimgok[pli[m]][a]=[];for(var f=0;f<17;f++){plimg[pli[m]][a][f]=null,plimgok[pli[m]][a][f]=0;var c=bimgfrk[i][a][f].width,h=bimgfrk[i][a][f].height;if(c>0){(g=rd.createImageData(c,h)).data.set(bimgfrk[i][a][f].data);for(e=0;e<c*h*4;e+=4)if(0!=g.data[3+e]){var x=rgbToHsl(g.data[0+e],g.data[1+e],g.data[2+e]);(w=Math.round(255*x[0]))>5&&w<=66&&(x[0]=p/255,x[1]*=.8,x[2]*=s/10),w>188&&w<=236&&(x[0]=.1,x[1]*=.6,x[2]*=d/10),w>66&&w<=125&&(x[0]=shirt[0]/255,x[1]*=shirt[1]/10,x[2]*=shirt[2]/10),w>125&&w<=188&&(x[0]=short[0]/255,x[1]*=short[1]/10,x[2]*=short[2]/10),(w<=5||w>236)&&(x[0]=socks[0]/255,x[1]*=socks[1]/10,x[2]*=socks[2]/10),x[0]>1&&(x[0]=1),x[1]>1&&(x[1]=1),x[2]>1&&(x[2]=1);var u=hslToRgb(x[0],x[1],x[2]);g.data[0+e]=u[0],g.data[1+e]=u[1],g.data[2+e]=u[2]}plimg[pli[m]][a][f]=document.createElement("canvas"),plimg[pli[m]][a][f].width=c,plimg[pli[m]][a][f].height=h,plimg[pli[m]][a][f].getContext("2d").putImageData(g,0,0),g=null}}loaded++}npli++,r=!0}if(strtsWith(n,"playercopy")){m=getFuncIntValue("playercopy",n,0)+10*t;var b=getFuncIntValue("playercopy",n,1)+10*t;pli[m]=pli[b],loaded+=8,r=!0}if(strtsWith(n,"keeper(")){d=getFuncIntValue("keeper",n,0),i=getFuncIntValue("keeper",n,1),p=getFuncIntValue("keeper",n,2),s=getFuncIntValue("keeper",n,3);kpimg[t]=[],kpimgok[t]=[];for(a=0;a<8;a++){kpimg[t][a]=[],kpimgok[t][a]=[];for(f=0;f<14;f++){kpimg[t][a][f]=null,kpimgok[t][a][f]=0;c=bimgfrk[i+3][a][f].width,h=bimgfrk[i+3][a][f].height;if(c>0){var g;(g=rd.createImageData(c,h)).data.set(bimgfrk[i+3][a][f].data);for(e=0;e<c*h*4;e+=4)if(0!=g.data[3+e]){var w;x=rgbToHsl(g.data[0+e],g.data[1+e],g.data[2+e]);(w=Math.round(255*x[0]))>5&&w<=66&&(x[0]=p/255,x[1]*=.8,x[2]*=s/10),w>188&&w<=236&&(x[0]=.1,x[1]*=.6,x[2]*=d/10),w>66&&w<=125&&(x[0]=kpshirt[0]/255,x[1]*=kpshirt[1]/10,x[2]*=kpshirt[2]/10),w>125&&w<=188&&(x[0]=kpgloves[0]/255,x[1]*=kpgloves[1]/10,x[2]*=kpgloves[2]/10),(w<=5||w>236)&&(x[0]=kpsocks[0]/255,x[1]*=kpsocks[1]/10,x[2]*=kpsocks[2]/10),x[0]>1&&(x[0]=1),x[1]>1&&(x[1]=1),x[2]>1&&(x[2]=1);u=hslToRgb(x[0],x[1],x[2]);g.data[0+e]=u[0],g.data[1+e]=u[1],g.data[2+e]=u[2]}kpimg[t][a][f]=document.createElement("canvas"),kpimg[t][a][f].width=c,kpimg[t][a][f].height=h,kpimg[t][a][f].getContext("2d").putImageData(g,0,0),g=null}}loaded++}r=!0}readl++}r||(loadteam[t]=0,0==t&&(inpli=npli,ilaodedteam=team[tsel[0]]))}}function hslToRgb(t,l,a){var o,n,e;if(0==l)o=n=e=a;else{var r=function(t,l,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+6*(l-t)*a:a<.5?l:a<2/3?t+(l-t)*(2/3-a)*6:t},m=a<.5?a*(1+l):a+l-a*l,d=2*a-m;o=r(d,m,t+1/3),n=r(d,m,t),e=r(d,m,t-1/3)}return[Math.round(255*o),Math.round(255*n),Math.round(255*e)]}function rgbToHsl(t,l,a){t/=255,l/=255,a/=255;var o,n,e=Math.max(t,l,a),r=Math.min(t,l,a),m=(e+r)/2;if(e==r)o=n=0;else{var d=e-r;switch(n=m>.5?d/(2-e-r):d/(e+r),e){case t:o=(l-a)/d+(l<a?6:0);break;case l:o=(a-t)/d+2;break;case a:o=(t-l)/d+4}o/=6}return[o,n,m]}function strtsWith(t,l){return t.substring(0,l.length)==l}function getFuncIntValue(t,l,a){var o=-1;try{var n=0,e=0,r=0,m="",d="";for(n=t.length+1;n<l.length&&2!=r;)","==(m=""+l.charAt(n))||")"==m?(e++,(1==r||e>a)&&(r=2)):e==a&&(d+=m,r=1),n++;""==d&&(d="-1"),"NaN"==""+(o=parseInt(d))&&(o=-1)}catch(t){o=-1}return o}function getFuncStringValue(t,l,a){var o="";try{var n=0,e=0,r=0,m="",d="";for(n=t.length+1;n<l.length&&2!=r;)","==(m=""+l.charAt(n))||")"==m?(e++,(1==r||e>a)&&(r=2)):e==a&&(d+=m,r=1),n++;o=d}catch(t){o=""}return o}var ongameplaystart=!1,adpause=!1,atemptad=0,sw=0,sh=0,canw=1280,canh=720,mw=1,mh=1,totime=0,nfr=0,actat=20,ltime=-1,fase=0,needrotate=!1;function gamerun(){if(sw==window.innerWidth&&sh==window.innerHeight||(sw=window.innerWidth,sh=window.innerHeight,mw=1,mh=1,mw=(canw=sw)/1280,mh=(canh=sh)/720,cx=.5*canw,cy=.5*canh,cz=50,canvasElement.width=canw,canvasElement.height=canh,canvasElement.style.width=canw+"px",canvasElement.style.height=canh+"px",camdist=camodist*((mw+mh)/2),rd.font=.5*(mh+mw)*40+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",checkrotate&&(canw/canh<=1.32?needrotate||(needrotate=!0):needrotate&&(needrotate=!1))),0==fase&&loaddata(),1==fase&&drawface(),2==fase&&selecteam(),3==fase&&drawcup(),4==fase&&drawlevels(),5==fase&&creategame(),7==fase&&drawpause(),8==fase&&drawcontrols(),9==fase&&transout(),10==fase&&drawendgame(),11==fase&&transin(),12==fase&&drawconnect(),13==fase&&drawmatchup(),14==fase&&drawreward(),15==fase&&drawformation(),16==fase&&drawmultoff(),17==fase&&drawhalftime(),6!=fase||adpause?2==lopload[0]&&(7==fase||adpause?pauselop(0):fadelop(0)):(malab(),onreplay?(replayframes(),mutemusic||mutegame||1!=lopload[2]&&3!=lopload[2]||playlop(2)):(soccerisagame(),recordframe(),2==lopload[2]&&fadelop(2)),drawall(),drawflexs(),multiflex&&sendpack(),mutegame?2==lopload[0]&&pauselop(0):1!=lopload[0]&&3!=lopload[0]||2==nt&&playlop(0)),5==fase?maptimecomp&&(2==atemptad&&showLoadingAd(),atemptad=1):1==atemptad&&(atemptad=2),0==fase||6==fase||7==fase||8==fase||woncup||mutemusic||mutegame||adpause?2==lopload[1]&&(mutemusic||adpause?pauselop(1):fadelop(1)):1!=lopload[1]&&3!=lopload[1]||playlop(1),woncup&&!mutegame?1!=lopload[3]&&3!=lopload[3]||playlop(3):2==lopload[3]&&fadelop(3),(7==fase||mutegame)&&(2==lopload[1]&&pauselop(1),2==lopload[2]&&pauselop(2)),isios&&(14==lopload[2]&&--cntdrp<=0&&(lopload[2]=2,pauselop(2)),14==lopload[3]&&--cntdrp<=0&&(lopload[3]=2,pauselop(3))),needrotate&&null!=rosize){rd.fillStyle="#000000",rd.fillRect(0,0,canw,canh);var t=rosize.width,l=rosize.height;t>canw&&(l*=canw/t,t=canw),rd.drawImage(rosize,.5*canw-.5*t,.5*canh-.5*l,t,l)}onaclk&&onaclk--,mclick&&(mclick=!1);var a=(new Date).getTime();-1==ltime?totime=20:totime+=a-ltime,ltime=a,5==++nfr&&(totime>100?--actat<5&&(actat=5):actat++,totime=0,nfr=0),setTimeout("gamerun()",actat)}var focus_point=1e3,camx=0,camy=0,camz=0,cx=0,cy=0,cz=0,camdist=740,camodist=740,camzy=40,camxz=0,mcos=[],msin=[];for(i=0;i<360;i++)mcos[i]=Math.cos(i*Math.PI/180),msin[i]=Math.sin(i*Math.PI/180);var xp=[],zp=[],yp=[],np=0,xpd=[],ypd=[];function malab(){rd.fillStyle="#003300",rd.fillRect(0,0,canw,canh);var t=xgo[pnum],l=zgo[pnum];if(bont==1-pnum&&(t=blx,l=blz),onreplay)camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-blx))/20,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-blz))/20;else if(goal<40||1==nt){var a=0;if(centara||(side==pnum&&(a=(1400-blx)/10)<0&&(a=0),side==1-pnum&&(a=-blx/10)>0&&(a=0)),out)if(out<100)camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-(outx+blx)/2))/20,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-(outz+blz)/2))/20;else{var o=0;105==out||101==out?o=1:a=0,camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-(blx+t*(2+o))/(3+o)-a))/10,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-(blz+l*(2+o))/(3+o)))/10}else camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-(blx+t)/2-a))/10,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-(blz+l)/2))/10}else goal>glrun+70?(camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-(plx[onp[glt]]+blx)/2))/40,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-(plz[onp[glt]]+blz)/2))/40):(camx-=(camx-(camdist*mcos[camzy]*msin[camxz]+cx-plx[onp[glt]]))/40,camz-=(camz-(camdist*mcos[camzy]*mcos[camxz]+cz-plz[onp[glt]]))/40);camy=camdist*msin[camzy]+cy-bly/3;for(var n=!1,e=0;e<14;e++)calcdraw(xp=[100*e,100+100*e,100+100*e,100*e],yp=[0,0,0,0],zp=[0,0,920,920],np=4,xpd=[],ypd=[]),n?(rd.fillStyle="#006600",n=!1):(rd.fillStyle="#005500",n=!0),drawpoly(xpd,ypd,np);rd.globalAlpha=.7,rd.strokeStyle="#ffffff";for(var r=0,m=0;m<10;){xp=[],zp=[],yp=[];for(e=0;e<3;e++)r>=360&&(r-=360),xp[e]=700+130*mcos[r],zp[e]=460-130*msin[r],yp[e]=0,2!=e&&(r+=18);calcdraw(xp,yp,zp,3,xpd=[],ypd=[])&&(rd.lineWidth=1e3/zp[1],magicArc(xpd,ypd)),m++}for(var d=0,i=0,p=0;p<3;p++){for(e=0;e<10;e++)zp=[d,d+92],d+=92,calcdraw(xp=[i,i],yp=[0,0],zp,2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd));i+=700,d=0}d=0,i=0;for(p=0;p<2;p++){for(e=0;e<14;e++)xp=[i,i+100],i+=100,calcdraw(xp,yp=[0,0],zp=[d,d],2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd));d+=920,i=0}d=260,i=200;for(p=0;p<2;p++){for(e=0;e<4;e++)zp=[d,d+100],d+=100,calcdraw(xp=[i,i],yp=[0,0],zp,2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd));i+=1e3,d=260}d=260,i=0;for(p=0;p<4;p++){for(e=0;e<2;e++)xp=[i,i+100],i+=100,calcdraw(xp,yp=[0,0],zp=[d,d],2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd));0==p&&(i+=1e3),1==p&&(d=660,i=0),2==p&&(i+=1e3)}d=360,i=70;for(p=0;p<2;p++){for(e=0;e<2;e++)zp=[d,d+100],d+=100,calcdraw(xp=[i,i],yp=[0,0],zp,2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd));i+=1260,d=360}d=360,i=0;for(p=0;p<4;p++)calcdraw(xp=[i,i+70],yp=[0,0],zp=[d,d],2,xpd=[],ypd=[])&&(rd.lineWidth=2e3/(zp[0]+zp[1]),drawline(xpd,ypd)),0==p&&(i+=1330),1==p&&(d=560,i=0),2==p&&(i+=1330);for(r=30,m=0;m<4;){xp=[],zp=[],yp=[];for(e=0;e<3;e++)r>=360&&(r-=360),xp[e]=1265-130*msin[r],zp[e]=460+130*mcos[r],yp[e]=0,2!=e&&(r+=15);calcdraw(xp,yp,zp,3,xpd=[],ypd=[])&&(rd.lineWidth=1e3/zp[1],magicArc(xpd,ypd)),m++}for(r=30,m=0;m<4;){xp=[],zp=[],yp=[];for(e=0;e<3;e++)r>=360&&(r-=360),xp[e]=135+130*msin[r],zp[e]=460-130*mcos[r],yp[e]=0,2!=e&&(r+=15);calcdraw(xp,yp,zp,3,xpd=[],ypd=[])&&(rd.lineWidth=1e3/zp[1],magicArc(xpd,ypd)),m++}rd.globalAlpha=1}function drawbacknet(t,l,a,o,n){0==t&&(xp=[1450,1450]),1==t&&(xp=[-50,-50]),calcdraw(xp,yp=[0,0],zp=[391,529],np=2,xpd=[],ypd=[])&&(rd.strokeStyle="#808080",rd.lineWidth=3e3/(zp[0]+zp[1]),drawline(xpd,ypd)),rd.strokeStyle="#b0b0b0";var e=0;l&&(0==t&&(e=a-1430-(60+o)/60*20),1==t&&(e=a+30+(60+o)/60*20));for(var r=1;r<12;r++){if(xp=[],0==t&&(xp=[1430+1.667*r,1430+1.667*r,0]),1==t&&(xp=[-30-1.667*r,-30-1.667*r,0]),zp=[529,391,0],yp=[5*r-60,5*r-60],np=2,l)zp[2]=zp[1],zp[1]=n,xp[2]=xp[1],yp[2]=yp[1],np=3,(d=(m=py(o,yp[1],n,zp[1]))*m/500)>1&&(d=1),xp[1]+=(1-d)*e;calcdraw(xp,yp,zp,np,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd),3==np&&drawline2(xpd,ypd))}for(r=1;r<27;r++){var m,d;if(xp=[],0==t&&(xp=[1430,1450,0]),1==t&&(xp=[-30,-50,0]),zp=[529-5.112*r,529-5.112*r,0],yp=[-60,0],np=2,l)zp[2]=zp[1],xp[2]=xp[1],0==t&&(xp[1]=1430+(60+o)/60*20),1==t&&(xp[1]=-30-(60+o)/60*20),yp[2]=yp[1],yp[1]=o,np=3,(d=(m=py(o,yp[1],n,zp[1]))*m/500)>1&&(d=1),xp[1]+=(1-d)*e;calcdraw(xp,yp,zp,np,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd),3==np&&drawline2(xpd,ypd))}}function drawtopnet(t){rd.strokeStyle="#e0e0e0";for(var l=1;l<7;l++)xp=[],0==t&&(xp=[1400+5*l,1400+5*l]),1==t&&(xp=[-5*l,-5*l]),calcdraw(xp,yp=[-60,-60],zp=[529,391],np=2,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd));for(l=1;l<27;l++)xp=[],0==t&&(xp=[1400,1430]),1==t&&(xp=[0,-30]),calcdraw(xp,yp=[-60,-60],zp=[529-5.112*l,529-5.112*l],np=2,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd));0==t&&(xp=[1400,1400,1400,1400]),1==t&&(xp=[0,0,0,0]),calcdraw(xp,yp=[-60,-58,-58,-60],zp=[530,530,390,390],np=4,xpd=[],ypd=[])&&(rd.fillStyle="#909090",drawpoly(xpd,ypd,np)),0==t&&(xp=[1400,1402,1402,1400]),1==t&&(xp=[0,-2,-2,0]),calcdraw(xp,yp=[-60,-60,-60,-60],zp=[530,530,390,390],np=4,xpd=[],ypd=[])&&(rd.fillStyle="#e0e0e0",drawpoly(xpd,ypd,np))}function drawsidenet(t){var l=529;1!=t&&3!=t||(l=391),0!=t&&1!=t||(xp=[1400,1430]),2!=t&&3!=t||(xp=[0,-30]),calcdraw(xp,yp=[-60,-60],zp=[l,l],np=2,xpd=[],ypd=[])&&(rd.strokeStyle="#808080",rd.lineWidth=3e3/(zp[0]+zp[1]),drawline(xpd,ypd)),0!=t&&1!=t||(xp=[1400,1450]),2!=t&&3!=t||(xp=[0,-50]),calcdraw(xp,yp=[0,0],zp=[l,l],np=2,xpd=[],ypd=[])&&(rd.strokeStyle="#808080",rd.lineWidth=3e3/(zp[0]+zp[1]),drawline(xpd,ypd)),0!=t&&1!=t||(xp=[1430,1450]),2!=t&&3!=t||(xp=[-30,-50]),calcdraw(xp,yp=[-60,0],zp=[l,l],np=2,xpd=[],ypd=[])&&(rd.strokeStyle="#808080",rd.lineWidth=3e3/(zp[0]+zp[1]),drawline(xpd,ypd)),rd.strokeStyle="#b0b0b0";for(var a=1;a<10;a++)xp=[],0!=t&&1!=t||(xp=[1400+5*a,1400+5*a]),2!=t&&3!=t||(xp=[-5*a,-5*a]),zp=[l,l],yp=[-60,0],a>6&&(yp[0]+=15*(a-6)),calcdraw(xp,yp,zp,np=2,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd));for(a=1;a<12;a++)xp=[],0!=t&&1!=t||(xp=[1400,1430+1.667*a]),2!=t&&3!=t||(xp=[0,-30-1.667*a]),calcdraw(xp,yp=[5*a-60,5*a-60],zp=[l,l],np=2,xpd=[],ypd=[])&&(rd.lineWidth=1e3/(zp[0]+zp[1]),drawline(xpd,ypd));var o=1;camxz>90&&camxz<270&&(o=-1),0!=t&&1!=t||(xp=[1400,1402,1402,1400]),2!=t&&3!=t||(xp=[0,-2,-2,0]),calcdraw(xp,yp=[0,0,-60,-60],zp=[l-o,l-o,l-o,l-o],np=4,xpd=[],ypd=[])&&(rd.fillStyle="#e0e0e0",drawpoly(xpd,ypd,np)),0!=t&&1!=t||(xp=[1400,1400,1400,1400]),2!=t&&3!=t||(xp=[0,0,0,0]),calcdraw(xp,yp=[0,0,-60,-60],zp=[l+1,l-1,l-1,l+1],np=4,xpd=[],ypd=[])&&(rd.fillStyle="#909090",drawpoly(xpd,ypd,np))}function magicArc(t,l){rd.beginPath(),rd.moveTo(t[0],l[0]),t[1]=2*t[1]-(t[0]+t[2])/2,l[1]=2*l[1]-(l[0]+l[2])/2,rd.quadraticCurveTo(t[1],l[1],t[2],l[2]),rd.stroke()}function drawpoly(t,l,a){rd.beginPath(),rd.moveTo(t[0],l[0]);for(var o=1;o<a;o++)rd.lineTo(t[o],l[o]);rd.closePath(),rd.fill()}function drawline(t,l){rd.beginPath(),rd.moveTo(t[0],l[0]),rd.lineTo(t[1],l[1]),rd.stroke()}function drawline2(t,l){rd.beginPath(),rd.moveTo(t[1],l[1]),rd.lineTo(t[2],l[2]),rd.stroke()}function calcdraw(t,l,a,o,n,e){for(var r=0;r<o;r++)t[r]+=camx,l[r]+=camy,a[r]+=camz;rotate(t,a,cx,cz,o,camxz),rotate(l,a,cy,cz,o,camzy);for(r=0;r<o;r++)if(a[r]<50){var m=r-1;-1==m&&(m=o-1);var d=r+1;d==o&&(d=0);var i=0,p=(50-a[i=a[m]>a[d]?m:d])/(a[r]-a[i]);a[r]=50,t[r]=t[i]+(t[r]-t[i])*p,l[r]=l[i]+(l[r]-l[i])*p}var s=!1;for(r=0;r<o;r++)n[r]=xs(t[r],a[r]),e[r]=ys(l[r],a[r]),s||n[r]>0&&n[r]<canw&&e[r]>0&&e[r]<canh&&(s=!0);return s}function rotate(t,l,a,o,n,e){if(0!=e){for(;e>=360;)e-=360;for(;e<0;)e+=360;for(var r=0;r<n;r++){var m=t[r];t[r]=a+(t[r]-a)*mcos[e]-(l[r]-o)*msin[e],l[r]=o+(m-a)*msin[e]+(l[r]-o)*mcos[e]}}}function xs(t,l){return l<cz&&(l=cz),(l-focus_point*mw)*(cx-t)/l+t}function ys(t,l){return l<cz&&(l=cz),(l-focus_point*mh)*(cy-t)/l+t}function py(t,l,a,o){return Math.sqrt((t-l)*(t-l)+(a-o)*(a-o))}function pyd(t,l,a,o,n,e){return Math.sqrt((t-l)*(t-l)+(a-o)*(a-o)+(n-e)*(n-e))}var nt=2,score=[0,0],time=0,plan=[[4,4,2],[4,2,4]],planpos=[-120,-120],maxspeed=[4,4],acuracy=[.5,.5],bltime=[40,40],tacklvl=[0,0],tackfreq=[1,1],cutoff=[.5,.5],pli=[],plx=[],plz=[],orx=[],orz=[],grx=[],grz=[],vgrx=[],vgrz=[],vgrup=[],speed=[],vectsx=[],vectsz=[],dir=[],ran=[],shot=[],flyshot=[],imove=[],cwith=[],bont=0,onp=[0,10],onmove=[-1,-1],checkgo=0,xgo=[0,0],zgo=[0,0],rxgo=[0,0],rzgo=[0,0],bli=[-1,-1],blrunstat=[0,0],blrunpy=[0,0],rux=[0,0],ruz=[0,0],tax=0,taz=0,retack=0,onretack=0,onretackback=-100,onslide=0,blwith=-1,blx=700,blz=460,bly=0,bvx=0,bvy=0,bvz=0,bnvx=0,bnvz=0,wtrm=15,wtrmacel=0,bant=[[0,1,2,3],[3,2,1,0],[0,2,1,3],[3,1,2,0]],bnan=0,gbnan=!1,ban=0,bans=0,colt=!1,colr=!1,coll=!1,rbvx=0,sbvx=0,netcor=!1,netcol=!1,flyball=!1,onrecoil=0,sndflex=0,side=0,tosup=0,centara=!1,glt=1,goal=0,owngoal=!1,gslb=0,lai=0,glrun=40,oft=0,out=0,outx=0,outz=0,onout=0,onoutc=0,holdout=0,penmode=!1,afterpen=0,bestof=0,bested=[0,0],bescore=[0,0],penturn=[0,0],borgenz=[],nborg=0,laz=0;for(i=0;i<100;i++)borgenz[i]=0;var cumborg=0,pnum=0,mycontrols=!1,multiflex=!1,halt=0,cntdom=0,mikedrop=0,shotmade=0,wasonmove=!1,cntcantake=0,wasonshot=!1,outimeout=0;function creategame(){if(ont<nt&&!loadteam[ont]&&ont++,ont<nt)0==ont&&1==loadteam[0]&&ilaodedteam==team[tsel[0]]&&(loaded=100,loadteam[0]=0,mapreboot()),loadteam[ont]>=4&&maketeam(ont),2==loadteam[ont]&&(loadteam[ont]=3,readteam(ont,team[tsel[ont]])),1==loadteam[ont]&&(loaded=0,loadteam[ont]=2,mapreboot()),drawloading(ont);else if(drawloading(nt-1),1==atemptad){(2==ntmo||multiflex&&3==onlev)&&!confeloaded&&loadconfe(),(2==ntmo||multiflex&&3==onlev)&&-1==lopload[3]&&(lopload[3]=0,loadloop("data/soundtrack/loop3.mp3",3)),time=0,side=0,penmode=!1,afterpen=0,camx=0,camy=0,camz=0;for(var t=0;t<2;t++)score[t]=0,multiflex?(maxspeed[t]=4.2,acuracy[t]=.34,bltime[t]=60,cutoff[t]=.2,savekape[t]=.76):(maxspeed[t]=3.5+(teamtats[tsel[t]]-50)/50,acuracy[t]=1.5*(1-(teamtats[tsel[t]]-50)/50),bltime[t]=60,tacklvl[t]=1,tackfreq[t]=.5,cutoff[t]=.5);multiflex?(inishmult(),fase=12):(halt=0,pnum=0,vseed=Math.floor(359*Math.random()),hseed=Math.floor(359*Math.random()),kseed=Math.floor(359*Math.random()),sseed=Math.floor(359*Math.random()),fseed=Math.floor(359*Math.random()),orgteam(),fase=6),maptimecomp=!1}}function orgteam(){onreplay=!1,switchrep=0,recreached=!1,cf=0,camxz=0,camzy=40,camdist=(camodist=740)*((mw+mh)/2),goal=0,gslb=0,glrun=40,out=0,onout=0,onoutc=0,cumborg=0,2==nt?multiflex?(1==side&&(tosup=0==tosup?1:0,cntcantake<180&&(cntcantake=180)),glt=tosup,0==side&&(mycontrols=pnum==1-glt)):(0==side?(tosup=Math.random()>Math.random()?0:1,-1!=firstime&&(tosup=1)):tosup=0==tosup?1:0,glt=tosup):glt=0;for(var t=0,l=0;l<2;l++)for(var a=0;a<3;a++)for(var o=0;o<plan[l][a];o++){var n=350+350*a;2==plan[l][a]&&(0==o&&(orx[t]=n-planpos[l],orz[t]=575),1==o&&(orx[t]=n-planpos[l],orz[t]=345)),3==plan[l][a]&&(0==o&&(orx[t]=n+planpos[l],orz[t]=690),1==o&&(orx[t]=n-planpos[l],orz[t]=460),2==o&&(orx[t]=n+planpos[l],orz[t]=230)),4==plan[l][a]&&(0==o&&(orx[t]=n+planpos[l],orz[t]=805),1==o&&(orx[t]=n-planpos[l],orz[t]=575),2==o&&(orx[t]=n-planpos[l],orz[t]=345),3==o&&(orx[t]=n+planpos[l],orz[t]=115)),5==plan[l][a]&&(0==o&&(orx[t]=n+planpos[l],orz[t]=828),1==o&&(orx[t]=n-.5*planpos[l],orz[t]=644),2==o&&(orx[t]=n-planpos[l],orz[t]=460),3==o&&(orx[t]=n-.5*planpos[l],orz[t]=276),4==o&&(orx[t]=n+planpos[l],orz[t]=92)),l==1-side&&(orx[t]=1400-orx[t]),t++}for(o=0;o<20;o++)plx[o]=orx[o],plz[o]=orz[o],multiflex?(vgrx[o]=0,vgrz[o]=0,vgrup[o]=0):(vgrx[o]=160*(.5-Math.random()),vgrz[o]=160*(.5-Math.random()),vgrup[o]=Math.floor(50+250*Math.random()));recentar(),inishkeeper()}function recentar(){if(multiflex)for(var t=0;t<20;t++)vgrx[t]=0,vgrz[t]=0,vgrup[t]=0;for(t=0;t<20;t++){var l=-.5;(t>=10&&0==side||t<10&&1==side)&&(l=.5),l>0&&(grx[t]=orx[t]+(1400-orx[t])*l+vgrx[t]),l<0&&(grx[t]=orx[t]+orx[t]*l+vgrx[t]),grz[t]=orz[t]+vgrz[t],plx[t]=grx[t],plz[t]=grz[t]}restat(),1==glt||1==nt?(bvz=0,bvx=0,bvy=0,plx[5]=700,plz[5]=490,dir[5]=0,blwith=5,onp[0]=5,plx[4]=700,plz[4]=400,dir[4]=180):(bvz=0,bvx=0,bvy=0,plx[15]=700,plz[15]=490,dir[15]=0,blwith=15,onp[1]=15,plx[14]=700,plz[14]=400,dir[14]=180),blx=700,blz=460,out=0,goal=0,centara=!0}function restat(){for(var t=0;t<20;t++)speed[t]=0,vectsx[t]=0,vectsz[t]=0,dir[t]=Math.floor(359*Math.random()),ran[t]=0,shot[t]=0,flyshot[t]=0,imove[t]=0,cwith[t]=0;for(t=0;t<2;t++)blrunstat[t]=0,xgo[t]=700,zgo[t]=460,rxgo[t]=700,rzgo[t]=460;retack=0,onretack=0,onretackback=0}function soccerisagame(){if(!halt){if(0!=holdout&&(onagamebtn=!0,holdout--),mdown&&!onagamebtn){for(var t=[],l=[],a=[],o=[],n=[],e=0;e<29;e++){t[e]=[],l[e]=[],a[e]=[],o[e]=[],n[e]=[];for(var r=0;r<21;r++)t[e][r]=50*e,l[e][r]=46*r,a[e][r]=0,t[e][r]+=camx,a[e][r]+=camy,l[e][r]+=camz;penmode&&rotate(t[e],l[e],cx,cz,21,camxz),rotate(a[e],l[e],cy,cz,21,camzy);for(r=0;r<21;r++)o[e][r]=xs(t[e][r],l[e][r]),n[e][r]=ys(a[e][r],l[e][r])}var m=0,d=0,i=-1;for(e=0;e<29;e++)for(r=0;r<21;r++)y=py(xm,o[e][r],ym,n[e][r]),(-1==i||y<i)&&(m=e,d=r,i=y);var p=0,s=0;ym>n[m][d]&&-1==(s=d-1)&&(s=1),ym<n[m][d]&&21==(s=d+1)&&(s=19),xm<o[m][d]&&-1==(p=m-1)&&(p=1),xm>o[m][d]&&29==(p=m+1)&&(p=27),penmode&&(m=28,p=28);for(e=0;e<29;e++)for(r=0;r<21;r++)t[e][r]=50*e,l[e][r]=46*r,a[e][r]=0;var f=(ym-n[m][d])/(n[m][s]-n[m][d]);f<0&&(f=0),f>1&&(f=1);var c=(xm-o[m][d])/(o[p][d]-o[m][d]);if(c<0&&(c=0),c>1&&(c=1),zgo[pnum]=(l[m][s]-l[m][d])*f+l[m][d],xgo[pnum]=(t[p][d]-t[m][d])*c+t[m][d],104==out&&oft==pnum&&(oft==side&&xgo[pnum]<plx[onp[pnum]]&&(xgo[pnum]=plx[onp[pnum]]),oft==1-side&&xgo[pnum]>plx[onp[pnum]]&&(xgo[pnum]=plx[onp[pnum]])),105==out&&oft==pnum?(oft==side&&xgo[pnum]<kpx[pnum]&&(xgo[pnum]=kpx[pnum]),oft==1-side&&xgo[pnum]>kpx[pnum]&&(xgo[pnum]=kpx[pnum]),xp=[xgo[pnum],kpx[pnum]],zp=[zgo[pnum],kpz[pnum]]):(xp=[xgo[pnum],plx[onp[pnum]]],zp=[zgo[pnum],plz[onp[pnum]]]),!penmode||0==side){if(penmode&&0==side||multiflex&&104==out){borgenz[nborg]=Math.abs(laz-zgo[pnum]),laz=zgo[pnum],100==++nborg&&(nborg=0),cumborg=0;for(e=0;e<100;e++)cumborg+=2*borgenz[e]/1e3}calcdraw(xp,yp=[0,0],zp,np=2,xpd=[],ypd=[])&&(rd.globalAlpha=.5,rd.strokeStyle="#01E4FF",rd.lineWidth=4,drawline(xpd,ypd),rd.globalAlpha=1)}var h=!1;if(105==out&&bont==pnum&&(h=!0),centara&&bont!=pnum&&(h=!0),103!=out&&104!=out&&105!=out||oft==pnum||(h=!0),multiflex&&!mycontrols&&(h=!0),h)onmove[pnum]=-1;else{if(plz[onp[pnum]]-zgo[pnum]!=0){var x=Math.round(Math.abs(Math.atan((plx[onp[pnum]]-xgo[pnum])/(plz[onp[pnum]]-zgo[pnum]))*(180/Math.PI)));plx[onp[pnum]]<xgo[pnum]?plz[onp[pnum]]<zgo[pnum]&&(x=90-x+90):plz[onp[pnum]]<zgo[pnum]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[pnum]]=x}onmove[pnum]=onp[pnum]}goal>glrun&&goal<glrun+70&&(onmove[pnum]=-1)}else-1==onmove[pnum]?(xgo[pnum]+=(blx-xgo[pnum])/20,zgo[pnum]+=(blz-zgo[pnum])/20):(rxgo[pnum]=xgo[pnum],rzgo[pnum]=zgo[pnum]),onmove[pnum]=-1;if(multiflex)if(mycontrols){if(onmove[1-pnum]=-1,xgo[pnum]=Math.floor(xgo[pnum]),zgo[pnum]=Math.floor(zgo[pnum]),sendingpack=sndframe+"|"+onmove[pnum]+"|"+xgo[pnum]+"|"+zgo[pnum]+"|#67#",105==out&&-1==onmove[pnum]&&1==onshot[pnum]&&(sendingpack=sndframe+"|-167|"+rxgo[pnum]+"|"+rzgo[pnum]+"|#67#"),out>100||centara?(500==outimeout&&(onmove[pnum]=-1,101==out&&(shot[blwith]=-3),102==out&&(shot[blwith]=-4),103==out&&(shot[blwith]=-6),104==out&&(shot[blwith]=-7),105==out&&(onshot[pnum]=1),centara&&(shot[blwith]=-1),xgo[pnum]=Math.floor(1400*Math.random()),zgo[pnum]=Math.floor(920*Math.random()),rxgo[pnum]=xgo[pnum],rzgo[pnum]=zgo[pnum],outimeout=0),outimeout++):outimeout&&(outimeout=0),goal<3&&(-1!=blwith&&cntdom>20||2==out||shotmade&&4!=shotmade||2==goal)){if(sendingpack=sndframe+"|"+time+"|"+blwith+"|"+out+"|"+onp[0]+"|"+onp[1]+"|"+lai+"|"+shotmade+"|"+goal+"|",2!=out&&!shotmade&&2!=goal){for(e=0;e<20;e++)plx[e]=Math.floor(plx[e]),plz[e]=Math.floor(plz[e]),sendingpack+=plx[e]+"|"+plz[e]+"|"+dir[e]+"|",sendingpack+=Math.floor(1e3*vectsx[e])+"|"+Math.floor(1e3*vectsz[e])+"|",vectsx[e]=Math.floor(1e3*vectsx[e])/1e3,vectsz[e]=Math.floor(1e3*vectsz[e])/1e3;sendingpack+=onslide+"|"}if(2==out&&(outx=outx<0?Math.floor(outx):Math.ceil(outx),outz=outz<0?Math.floor(outz):Math.ceil(outz),sendingpack+=oft+"|"+outx+"|"+outz+"|"),shotmade){var u=0;flyball&&(u=1),blx=Math.floor(blx),blz=Math.floor(blz),bly=Math.floor(bly),sendingpack+=sseed+"|"+u+"|"+Math.floor(100*fromhead)+"|"+blx+"|"+blz+"|"+bly+"|"+Math.floor(100*bvx)+"|"+Math.floor(100*bvy)+"|"+Math.floor(100*bvz)+"|"+Math.floor(1e4*bnvx)+"|"+Math.floor(1e4*bnvz)+"|",bvx=Math.floor(100*bvx)/100,bvz=Math.floor(100*bvz)/100,bvy=Math.floor(100*bvy)/100,penkick&&(sendingpack+=Math.floor(1e4*cumborg)+"|")}if(3==shotmade)for(e=0;e<20;e++)plx[e]=Math.floor(plx[e]),plz[e]=Math.floor(plz[e]),sendingpack+=plx[e]+"|"+plz[e]+"|"+dir[e]+"|";if(2==shotmade)for(e=0;e<2;e++)rux[e]=Math.floor(rux[e]),ruz[e]=Math.floor(ruz[e]),blrunpy[e]=Math.floor(blrunpy[e]),sendingpack+=bli[e]+"|"+blrunstat[e]+"|"+blrunpy[e]+"|"+rux[e]+"|"+ruz[e]+"|";2==goal&&(blx=Math.floor(blx),blz=Math.floor(blz),bly=Math.floor(bly),sendingpack+=score[0]+"|"+score[1]+"|"+glt+"|"+blx+"|"+blz+"|"+bly+"|"+Math.floor(100*bvx)+"|"+Math.floor(100*bvy)+"|"+Math.floor(100*bvz)+"|"+outx+"|"+outz+"|"+glrun+"|"+goalsad+"|",bvx=Math.floor(100*bvx)/100,bvz=Math.floor(100*bvz)/100,bvy=Math.floor(100*bvy)/100),sendingpack+="#761#",cntdom=0,shotmade>0&&shotmade--}if(4==shotmade&&(shotmade=3),200==cntcantake||out>50){if(bont!=pnum){sendingpack=pnum+"|"+sndframe+"|"+time+"|"+blwith+"|"+onp[0]+"|"+onp[1]+"|"+out+"|"+oft+"|",outx=Math.round(outx),outz=Math.round(outz),sendingpack+=outx+"|"+outz+"|",rxgo[1-pnum]=Math.floor(rxgo[1-pnum]),rzgo[1-pnum]=Math.floor(rzgo[1-pnum]),sendingpack+=rxgo[1-pnum]+"|"+rzgo[1-pnum]+"|";for(e=0;e<2;e++)gvrand[e]=0,kgupdt[e]=0,kpx[e]=Math.floor(kpx[e]),kpz[e]=Math.floor(kpz[e]),sendingpack+=kpx[e]+"|"+kpz[e]+"|"+kdir[e]+"|";for(e=0;e<20;e++)plx[e]=Math.floor(plx[e]),plz[e]=Math.floor(plz[e]),sendingpack+=plx[e]+"|"+plz[e]+"|"+dir[e]+"|"+shot[e]+"|";for(e=0;e<2;e++)rux[e]=Math.floor(rux[e]),ruz[e]=Math.floor(ruz[e]),blrunpy[e]=Math.floor(blrunpy[e]),sendingpack+=bli[e]+"|"+blrunstat[e]+"|"+blrunpy[e]+"|"+rux[e]+"|"+ruz[e]+"|";blx=Math.floor(blx),blz=Math.floor(blz),bly=Math.floor(bly),sendingpack+=blx+"|"+blz+"|"+bly+"|"+Math.floor(100*bvx)+"|"+Math.floor(100*bvy)+"|"+Math.floor(100*bvz)+"|"+Math.floor(1e4*bnvx)+"|"+Math.floor(1e4*bnvz)+"|",bvx=Math.floor(100*bvx)/100,bvz=Math.floor(100*bvz)/100,bvy=Math.floor(100*bvy)/100;var b=0;flyball&&(b=1),sendingpack+=lai+"|"+b+"|"+onrecoil+"|",hseed=Math.floor(359*Math.random()),fseed=Math.floor(359*Math.random()),kseed=Math.floor(359*Math.random()),sseed=Math.floor(359*Math.random()),vseed=Math.floor(359*Math.random()),sendingpack+=onslide+"|"+hseed+"|"+fseed+"|"+kseed+"|"+sseed+"|"+vseed+"|#777#";for(e=0;e<20;e++)vgrx[e]=160*(.5-vrandom()),vgrz[e]=160*(.5-vrandom());for(e=0;e<200;e++)bframe[e]=-1;cntbuf=0,onframe=0,skipone=!1,nalpha=0,ccf=-1,ccframe="",cntcantake=0,shotmade=0,halt=2,mikedrop=sndframe}}else cntcantake++;cntdom++,sndframe++}else{if(onmove[pnum]=-1,onframe==ccf){readccf();for(e=0;e<20;e++)vgrx[e]=160*(.5-vrandom()),vgrz[e]=160*(.5-vrandom());sndframe=0,sendingpack="",cntdom=0,mycontrols=!0,cntcantake=0,shotmade=0,ccf=-1}else{cntbuf=0;var g=-1;for(e=0;e<200;e++)-1==g&&bframe[e]==onframe&&(g=e,bframe[e]=-1),bframe[e]<onframe?bframe[e]=-1:cntbuf++;if(-1!=g)onmove[1-pnum]=bfonmove[g],xgo[1-pnum]=bfxgo[g],zgo[1-pnum]=bfzgo[g],105==out&&(-167==onmove[1-pnum]?(onshot[1-pnum]=1,rxgo[1-pnum]=xgo[1-pnum],rzgo[1-pnum]=zgo[1-pnum],onmove[1-pnum]=-1,wasonshot=!0):wasonshot&&(onshot[1-pnum]=16,wasonshot=!1)),-1!=onmove[1-pnum]?wasonmove=!0:wasonmove&&(rxgo[1-pnum]=xgo[1-pnum],rzgo[1-pnum]=zgo[1-pnum],wasonmove=!1),onframe++,skipone&&(skipone=!1);else{for(e=0;e<nalpha;e++)if(-1==g&&aframe[e]==onframe){g=e;break}-1!=g&&(readalpha(g),onframe++)}-1==g&&(skipone||cntbuf>50?(onframe++,skipone=!1):skipone=!0),cntbuf<20&&-1==ccf&&time<7470&&(halt=2)}if(-1!=onmove[1-pnum]&&plz[onp[1-pnum]]-zgo[1-pnum]!=0){x=Math.round(Math.abs(Math.atan((plx[onp[1-pnum]]-xgo[1-pnum])/(plz[onp[1-pnum]]-zgo[1-pnum]))*(180/Math.PI)));plx[onp[1-pnum]]<xgo[1-pnum]?plz[onp[1-pnum]]<zgo[1-pnum]&&(x=90-x+90):plz[onp[1-pnum]]<zgo[1-pnum]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[1-pnum]]=x}}else 2==nt&&(playcomputer(),authont());if(!halt||out){for(var w=0;w<nt;w++){var z=!1;if(blwith>=10*w&&blwith<10+10*w&&(z=!0),-1==onmove[w]&&!z&&!out&&!goal)for(i=0,e=10*w;e<10+10*w;e++){var y=0;y=flyball?py(plx[e],rxgo[bont],plz[e],rzgo[bont]):py(plx[e],blx,plz[e],blz),(0==i||y<i)&&(onp[w]=e,i=y)}}if(!centara)if(goal<20){for(w=0;w<nt;w++)if((!out||oft==w)&&105!=out&&107!=out)if(-1==blwith){if(0!=retack&&(retack=0),0!=onretack&&(onretack=0),0!=onretackback&&(onretackback=0),0!=onslide&&(onslide=0),0==blrunstat[w]){if(0!=bvx||0!=bvz){var v=0;for(e=10*w;e<10+10*w;e++){var k=0,M=0;if(Math.abs(bvx)>Math.abs(bvz)?(k=plx[e],M=blz+bvz/bvx*(k-blx)):(M=plz[e],k=blx+bvx/bvz*(M-blz)),(k-blx)*bvx>0&&(M-blz)*bvz>0&&9!=ran[e]&&10!=ran[e])if(bont==w){var F=py(plx[e],rxgo[bont],plz[e],rzgo[bont]);(0==v||v>F)&&(v=F,rux[w]=k,ruz[w]=M,bli[w]=e,blrunstat[w]=1)}else{F=py(plx[e],k,plz[e],M);(0==v||v>F)&&(v=F,rux[w]=k,ruz[w]=M,bli[w]=e,blrunstat[w]=1)}}}0==blrunstat[w]&&(blrunstat[w]=3)}if(1==blrunstat[w]){var I=py(blx,rux[w],blz,ruz[w])/Math.sqrt(bvx*bvx+bvz*bvz)-py(plx[bli[w]],rux[w],plz[bli[w]],ruz[w])/maxspeed[w];Math.abs(bvx)>Math.abs(bvz)?(blx>plx[bli[w]]?rux[w]=plx[bli[w]]+I*maxspeed[w]*.7:rux[w]=plx[bli[w]]-I*maxspeed[w]*.7,ruz[w]=blz+(rux[w]-blx)*(bvz/bvx)):(blz>plz[bli[w]]?ruz[w]=plz[bli[w]]+I*maxspeed[w]*.7:ruz[w]=plz[bli[w]]-I*maxspeed[w]*.7,rux[w]=blx+(ruz[w]-blz)*(bvx/bvz));x=Math.round(Math.abs(Math.atan((plx[bli[w]]-rux[w])/(plz[bli[w]]-ruz[w]))*(180/Math.PI)));plx[bli[w]]<rux[w]?plz[bli[w]]<ruz[w]&&(x=90-x+90):plz[bli[w]]<ruz[w]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[bli[w]]=x,blrunpy[w]=0,blrunstat[w]=2}if(2==blrunstat[w]&&(imove[bli[w]]=1,crunpy=py(plx[bli[w]],blx,plz[bli[w]],blz),crunpy<blrunpy[w]||0==blrunpy[w]?blrunpy[w]=crunpy:blrunstat[w]=3,py(plx[bli[w]],rux[w],plz[bli[w]],ruz[w])<=speed[bli[w]]&&(blrunstat[w]=3)),3==blrunstat[w]&&9!=ran[onp[w]]&&10!=ran[onp[w]]){if(plz[onp[w]]-blz!=0){x=Math.round(Math.abs(Math.atan((plx[onp[w]]-blx)/(plz[onp[w]]-blz))*(180/Math.PI)));plx[onp[w]]<blx?plz[onp[w]]<blz&&(x=90-x+90):plz[onp[w]]<blz?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[w]]=x}imove[onp[w]]=1}}else{0!=blrunstat[w]&&(blrunstat[w]=0);z=!1;if(blwith>=10*w&&blwith<10+10*w&&(z=!0),!z){var T=!1;if(multiflex||w!=pnum||onmove[pnum]!=onp[pnum]||flyball||(T=!0),!T)if(!multiflex||score[w]>=score[1-w]){var A=0;A=Math.abs(vectsx[blwith])>Math.abs(vectsz[blwith])?vectsx[blwith]>0?1:2:vectsz[blwith]>0?3:4;for(v=0,e=10*w;e<10+10*w;e++)if(1==A&&plx[e]>plx[blwith]||2==A&&plx[e]<plx[blwith]||3==A&&plz[e]>plz[blwith]||4==A&&plz[e]<plz[blwith]){F=py(plx[e],plx[blwith],plz[e],plz[blwith]);(0==v||F<v)&&(v=F,onp[w]=e)}}else for(v=0,e=10*w;e<10+10*w;e++)if(w==side&&plx[e]<plx[blwith]||w!=side&&plx[e]>plx[blwith]){F=py(plx[e],plx[blwith],plz[e],plz[blwith]);(0==v||F<v)&&(v=F,onp[w]=e)}if((onretack>0||multiflex)&&!out){if(0==retack||multiflex){var S=40-10*(score[1-w]-score[w]);S>40&&(S=40),S<20&&(S=20),multiflex||(S=20+80*tacklvl[w]*Math.random()),tax=plx[blwith]+vectsx[blwith]*S,taz=plz[blwith]-vectsz[blwith]*S,multiflex||(retack=Math.floor(10+25*tacklvl[w]*Math.random()))}else retack--;if(multiflex&&py(plx[onp[w]],blx,plz[onp[w]],blz)<30&&(T=!0),py(plx[onp[w]],tax,plz[onp[w]],taz)>2*maxspeed[w]){if(!T&&plz[onp[w]]-taz!=0){x=Math.round(Math.abs(Math.atan((plx[onp[w]]-tax)/(plz[onp[w]]-taz))*(180/Math.PI)));plx[onp[w]]<tax?plz[onp[w]]<taz&&(x=90-x+90):plz[onp[w]]<taz?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[w]]=x}imove[onp[w]]=1}else if(!T){x=Math.round(Math.abs(Math.atan((plx[onp[w]]-plx[blwith])/(plz[onp[w]]-plz[blwith]))*(180/Math.PI)));plx[onp[w]]<plx[blwith]?plz[onp[w]]<plz[blwith]&&(x=90-x+90):plz[onp[w]]<plz[blwith]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[w]]=x}}if(multiflex||--onretack<onretackback&&(onretackback=200*tackfreq[w]-200,onretack=200*tackfreq[w]),!onslide){var V=Math.sqrt(vectsx[onp[w]]*vectsx[onp[w]]+vectsz[onp[w]]*vectsz[onp[w]]);py(plx[onp[w]],plx[blwith],plz[onp[w]],plz[blwith])<20*V&&(frandom(0)>cutoff[w]?(vectsx[onp[w]]*=2,vectsz[onp[w]]*=2,shot[onp[w]]=130,onslide=1):onslide=25)}if(onslide){if(onslide<25){var C=(plx[onp[w]]+15*vectsx[onp[w]]+(plx[blwith]+15*vectsx[blwith]))/2,B=(plz[onp[w]]-15*vectsz[onp[w]]+(plz[blwith]-15*vectsz[blwith]))/2;if(plz[onp[w]]-B!=0){x=Math.round(Math.abs(Math.atan((plx[onp[w]]-C)/(plz[onp[w]]-B))*(180/Math.PI)));plx[onp[w]]<C?plz[onp[w]]<B&&(x=90-x+90):plz[onp[w]]<B?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[w]]=x}imove[onp[w]]=1}100==++onslide&&(onslide=0)}}}}else if(goal<glrun){if(onmove[glt]!=onp[glt]){if(plz[onp[glt]]-outz!=0){x=Math.round(Math.abs(Math.atan((plx[onp[glt]]-outx)/(plz[onp[glt]]-outz))*(180/Math.PI)));plx[onp[glt]]<outx?plz[onp[glt]]<outz&&(x=90-x+90):plz[onp[glt]]<outz?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[onp[glt]]=x}imove[onp[glt]]=1}py(plx[onp[glt]],outx,plz[onp[glt]],outz)<10*maxspeed[glt]&&(goal=glrun)}var E=blx;onoutc&&(103==onout&&(oft==side&&(E=plx[blwith]+700)>1600&&(E=1600),oft==1-side&&(E=plx[blwith]-700)<-200&&(E=-200)),101==onout&&(oft==side&&(E=1500),oft==1-side&&(E=-100)),out||onoutc--),104==out&&(oft==side&&(E=600),oft==1-side&&(E=800)),105==out&&(oft==side&&(E=1e3),oft==1-side&&(E=400));var P=(E-700)/1400;P>1&&(P=1),P<-1&&(P=-1);for(w=0;w<nt;w++)for(e=10*w;e<10+10*w;e++){centara&&(P=w==side?-.5:.5),P>0&&(grx[e]=orx[e]+(1400-orx[e])*P+vgrx[e]),P<0&&(grx[e]=orx[e]+orx[e]*P+vgrx[e]),grz[e]=orz[e]+vgrz[e],onoutc&&101==onout&&oft!=w&&(grz[e]=(grz[e]+460)/2),onoutc&&103==onout&&oft!=w&&(grz[e]=(2*grz[e]+460)/3);var R=0;w!=side&&(R=1400);for(var D=10*(1-w);D<10+10*(1-w);D++)w==side?grx[D]>R&&(R=grx[D]):grx[D]<R&&(R=grx[D]);if(w==side?grx[e]>R&&(grx[e]=R):grx[e]<R&&(grx[e]=R),out>100){var q=py(plx[blwith],grx[e],plz[blwith],grz[e]);if(blwith!=e&&q<150&&plz[blwith]-grz[e]!=0){x=Math.round(Math.abs(Math.atan((plx[blwith]-grx[e])/(plz[blwith]-grz[e]))*(180/Math.PI)));plx[blwith]<grx[e]?plz[blwith]<grz[e]&&(x=90-x+90):plz[blwith]<grz[e]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),grx[e]+=msin[x]*(150-q),grz[e]-=mcos[x]*(150-q)}}if(!multiflex)if(0==vgrup[e]){var W=1;centara&&(W=.5),vgrx[e]=(.5-Math.random())*maxspeed[w]*40*W,vgrz[e]=(.5-Math.random())*maxspeed[w]*40*W,vgrup[e]=Math.floor(50+250*Math.random())}else vgrup[e]--;var N=!1;if(goal>20&&goal<glrun+70&&e==onp[w]&&(N=!0),!centara||1!=glt&&1!=nt||5!=e&&4!=e||(N=!0),!centara||0!=glt||15!=e&&14!=e||(N=!0),onmove[w]!=e&&!imove[e]&&blwith!=e&&!N)if(py(plx[e],grx[e],plz[e],grz[e])>10*maxspeed[w]&&shot[e]<=0){if(plz[e]-grz[e]!=0){x=Math.round(Math.abs(Math.atan((plx[e]-grx[e])/(plz[e]-grz[e]))*(180/Math.PI)));plx[e]<grx[e]?plz[e]<grz[e]&&(x=90-x+90):plz[e]<grz[e]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),dir[e]=x}imove[e]=1}else if(speed[e]<.4&&plz[e]-blz!=0){x=Math.round(Math.abs(Math.atan((plx[e]-blx)/(plz[e]-blz))*(180/Math.PI)));plx[e]<blx?plz[e]<blz&&(x=90-x+90):plz[e]<blz?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),shot[e]>=40&&shot[e]<60&&(x+=180)>=360&&(x-=360),dir[e]=x}if(goal>40&&goal<glrun+70&&e!=onp[glt]&&0==flyshot[e]){if(plz[e]-plz[onp[glt]]!=0){x=Math.round(Math.abs(Math.atan((plx[e]-plx[onp[glt]])/(plz[e]-plz[onp[glt]]))*(180/Math.PI)));plx[e]<plx[onp[glt]]?plz[e]<plz[onp[glt]]&&(x=90-x+90):plz[e]<plz[onp[glt]]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),glt!=w&&(x+=180)>=360&&(x-=360),dir[e]=x}imove[e]=1,glt==w?py(plx[e],plx[onp[glt]],plz[e],plz[onp[glt]])<10*maxspeed[w]&&goal>glrun&&(flyshot[e]=200):py(plx[e],plx[onp[glt]],plz[e],plz[onp[glt]])>300&&(flyshot[e]=200)}if(shot[e]<0&&(imove[e]=0),onmove[w]==e||imove[e]){var O=!1;out>100&&onp[oft]==e&&105!=out&&(O=!0),!centara||1!=glt&&1!=nt||5!=e&&4!=e||(O=!0),!centara||0!=glt||15!=e&&14!=e||(O=!0),O||(speed[e]+=.1,speed[e]<.7&&(speed[e]=.7,vectsx[e]=msin[dir[e]]*speed[e],vectsz[e]=mcos[dir[e]]*speed[e])),onmove[w]==e&&(blwith==e?(shot[e]=-1,101==out&&(shot[e]=-3),102==out&&(shot[e]=-4),103==out&&(shot[e]=-6),104==out&&(shot[e]=-7)):(bont!=w&&shot[e]<0&&(shot[e]=0),bont==w&&0==flyshot[e]&&(flyshot[e]=16)))}else if(goal>glrun&&goal<glrun+70&&e==onp[w]?speed[e]-=.04:speed[e]-=.1,shot[e]<0){var L=4,j=4,Y=0;fromhead=0;var G=1;if(-1==shot[e]||-11==shot[e]||-5==shot[e]){var U=!1;if((rxgo[w]>1330&&w==side||w==1-side&&rxgo[w]<70)&&(U=!0),rzgo[w]>360&&rzgo[w]<560&&U){var H=1;if(rxgo[w]>1330&&((H=(1400-plx[e])/700)>1&&(H=1),H<0&&(H=0)),rxgo[w]<70&&((H=plx[e]/700)>1&&(H=1),H<0&&(H=0)),L=6+4*H+(1-2*hrandom())*acuracy[w],j=2+3.5*H+(2-3*hrandom())*acuracy[w],Y=dir[e],-5==shot[e]&&plz[e]-rzgo[w]!=0){x=Math.round(Math.abs(Math.atan((plx[e]-rxgo[w])/(plz[e]-rzgo[w]))*(180/Math.PI)));plx[e]<rxgo[w]?plz[e]<rzgo[w]&&(x=90-x+90):plz[e]<rzgo[w]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),Y=x}}else if(-1==shot[e]||-11==shot[e])L=4+hrandom(),j=(.5+py(rxgo[w],plx[e],rzgo[w],plz[e])/1e3*7)*(1+.3*hrandom()),flyball=!0,Y=dir[e];else{if(plz[e]-rzgo[w]!=0){x=Math.round(Math.abs(Math.atan((plx[e]-rxgo[w])/(plz[e]-rzgo[w]))*(180/Math.PI)));plx[e]<rxgo[w]?plz[e]<rzgo[w]&&(x=90-x+90):plz[e]<rzgo[w]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),Y=x}L=2+hrandom(),j=(1+py(rxgo[w],plx[e],rzgo[w],plz[e])/1e3*7)*(1+.3*hrandom())}-11!=shot[e]&&-5!=shot[e]||(G=2),-1==shot[e]||-11==shot[e]?shot[e]=1:(shot[e]=100,plx[e]=(blx+plx[e])/2,plz[e]=(blz+plz[e])/2)}if(-2==shot[e]){if(plz[e]-rzgo[w]!=0){x=Math.round(Math.abs(Math.atan((plx[e]-rxgo[w])/(plz[e]-rzgo[w]))*(180/Math.PI)));plx[e]<rxgo[w]?plz[e]<rzgo[w]&&(x=90-x+90):plz[e]<rzgo[w]?x+=180:x=90-x+270,x>=360&&(x-=360),x<0&&(x+=360),Y=x}fromhead=multiflex?.35:.3,shot[e]=20,Math.abs(Y-dir[e])>135&&Math.abs(Y-dir[e])<225&&((Y+=180)>=360&&(Y-=360),shot[e]=40),dir[e]=Y,plx[e]=(blx+plx[e])/2,plz[e]=(blz+plz[e])/2,j=4-7*hrandom()+acuracy[w],L=rzgo[w]>360&&rzgo[w]<560&&(rxgo[w]>1330||rxgo[w]<70)?5+2*hrandom():1+4*hrandom(),G=2}if(-3==shot[e]){var K=py(rxgo[w],plx[e],rzgo[w],plz[e]);Y=dir[e],(L=3+K/100)>11&&(L=11),j=.5+K/140+hrandom()*acuracy[w],out=0,shot[e]=60,flyshot[e]=-17,flyball=!0}if(-4==shot[e]){K=py(rxgo[w],plx[e],rzgo[w],plz[e]);Y=dir[e],(L=3+K/200)>6&&(L=6),(j=K/100-1)>5&&(j=5),out=0,shot[e]=80,G=0}if(-6==shot[e]){U=!1;if((rxgo[w]>1330&&w==side||w==1-side&&rxgo[w]<70)&&(U=!0),rzgo[w]>360&&rzgo[w]<560&&U){K=py(rxgo[w],plx[e],rzgo[w],plz[e]);Y=dir[e],(L=7+K/50)>11&&(L=11),j=.5+K/140+hrandom()*acuracy[w]*2}else{L=3+(K=py(rxgo[w],plx[e],rzgo[w],plz[e]))/(130+20*hrandom()),j=1+K/(130+20*hrandom()),flyball=!0}flyshot[e]=-17,Y=dir[e],out=0,shot[e]=60}if(-7==shot[e]){K=py(rxgo[w],plx[e],rzgo[w],plz[e]);Y=dir[e],L=10+2*hrandom(),j=2+hrandom()*(2+acuracy[w]),out=0,shot[e]=60,flyshot[e]=-17,penkick=30,penmode&&bested[w]++}centara&&(centara=!1),lai=e;var X=speed[e];if(X>4&&(X=4),gbnan=!1,ban=0,multiflex&&!mycontrols||(bvx=msin[Y]*(X+L),bnvx=msin[Y],bvz=-mcos[Y]*(X+L),bnvz=-mcos[Y],bvy=-j,blwith=-1),multiflex&&mycontrols&&(shotmade=3),0==sndflex){if(1==G){var _=Math.sqrt(L*L+j*j)/10;Number.isNaN(_)&&(_=.7),_<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(4,_):playsnd(5,_)}if(2==G){_=Math.sqrt((L+X)*(L+X)+j*j)/10;Number.isNaN(_)&&(_=.7),_<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(6,_):playsnd(7,_)}sndflex=5}}speed[e]<0&&(speed[e]=0),speed[e]>maxspeed[w]&&(speed[e]=maxspeed[w]),speed[e]>0?(ran[e]+=.12+speed[e]/77,ran[e]>=5&&ran[e]<6&&(ran[e]-=4),ran[e]>=6&&(ran[e]=1)):ran[e]=0,vectsx[e]+=(msin[dir[e]]*speed[e]-vectsx[e])/7,vectsz[e]+=(mcos[dir[e]]*speed[e]-vectsz[e])/7,plx[e]+=vectsx[e],plz[e]-=vectsz[e],shot[e]>0&&(shot[e]>=1&&shot[e]<3&&(ran[e]=5),shot[e]>=3&&shot[e]<11&&(ran[e]=6),shot[e]>=11&&shot[e]<14&&(ran[e]=5),shot[e]>=20&&shot[e]<22&&(ran[e]=7),shot[e]>=22&&shot[e]<32&&(ran[e]=8),shot[e]>=32&&shot[e]<35&&(ran[e]=7),shot[e]>=40&&shot[e]<45&&(ran[e]=9),shot[e]>=45&&shot[e]<52&&(ran[e]=10),shot[e]>=52&&shot[e]<55&&(ran[e]=9),shot[e]>=60&&shot[e]<62&&(ran[e]=5),shot[e]>=62&&shot[e]<75&&(ran[e]=6),shot[e]>=75&&shot[e]<78&&(ran[e]=5),shot[e]>=80&&shot[e]<95&&(ran[e]=14),shot[e]>=100&&shot[e]<110&&(ran[e]=12),shot[e]>=110&&shot[e]<120&&(ran[e]=11),shot[e]>=130&&shot[e]<140&&(ran[e]=12),shot[e]>=140&&shot[e]<150&&(ran[e]=11),shot[e]>=160&&shot[e]<170&&(ran[e]=7),shot[e]++,15!=shot[e]&&36!=shot[e]&&56!=shot[e]&&79!=shot[e]&&96!=shot[e]&&121!=shot[e]&&151!=shot[e]&&171!=shot[e]||(shot[e]=0)),-1==blwith&&py(blx,plx[e],blz,plz[e])<40&&(bont!=w&&(flyshot[e]>=0&&!out&&frandom(3)>cutoff[w]?(flyshot[e]=1,rxgo[w]=plx[e]+(250-500*frandom(4)),rzgo[w]=plz[e]+(250-500*frandom(5)),multiflex||(xgo[w]=blx,zgo[w]=blz)):flyshot[e]=-17),flyshot[e]>0&&(bly>-30?-1==onmove[w]&&(py(blx,plx[e],blz,plz[e])>35?(shot[e]=-5,ran[e]=11):shot[e]=-11,plx[e]=(blx+plx[e])/2,plz[e]=(blz+plz[e])/2,flyshot[e]=-17):bly>-60?(mdown=!1,shot[e]=-2,flyshot[e]=-17,ran[e]=7,plx[e]=(blx+plx[e])/2,plz[e]=(blz+plz[e])/2):shot[e]=20));var Q=!1,J=30;(!shot[e]||shot[e]>=130&&shot[e]<150)&&(Q=!0),blwith>=10*w&&blwith<10+10*w&&(Q=!1),-1!=blwith&&(J=20,shot[e]>130&&shot[e]<150?cwith[blwith]>bltime[w]&&(Q=!1):0!=cwith[blwith]&&(Q=!1)),out&&oft!=w&&(Q=!1),105!=out&&107!=out||(Q=!1),multiflex&&(mycontrols?200!=cntcantake&&w!=pnum&&(Q=!1):w==pnum&&(Q=!1)),Q&&bly>-30&&py(blx,plx[e],blz,plz[e])<J&&(shot[e]>130&&shot[e]<150&&-1!=blwith&&frandom(1)>.5&&(shot[blwith]=160,vectsx[blwith]=-vectsx[blwith],vectsz[blwith]=-vectsz[blwith],outx=blx,outz=blz,out=1,oft=bont),blwith=e,onp[w]=e,cwith[e]=Math.floor(bltime[w]+bltime[w]*Math.random()),multiflex||(xgo[w]=blx,zgo[w]=blz));var Z=!1;if(w==pnum&&e==onp[w]&&(Z=!0),w==1-pnum&&e==onp[w]&&(blwith==e||105==out&&bont==1-pnum)&&(Z=!0),Z){if(xp=[-2.5,0,2.5,7,6,10,6,7,2.5,0,-2.5,-7,-6,-10,-6,-7],zp=[6,10,6,7,2.5,0,-2.5,-7,-6,-10,-6,-7,-2.5,0,2.5,7],yp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],np=16,xpd=[],ypd=[],105==out){if(w==pnum&&oft==pnum)for(D=0;D<np;D++)xp[D]*=1.5,xp[D]+=kpx[pnum],zp[D]*=1.5,zp[D]+=kpz[pnum];if(w==1-pnum&&oft==1-pnum)for(D=0;D<np;D++)xp[D]*=1.5,xp[D]+=kpx[1-pnum],zp[D]*=1.5,zp[D]+=kpz[1-pnum]}else for(D=0;D<np;D++)xp[D]*=1.5,xp[D]+=plx[e],zp[D]*=1.5,zp[D]+=plz[e];calcdraw(xp,yp,zp,np,xpd,ypd)&&(rd.globalAlpha=.5,rd.fillStyle="#01E4FF",drawpoly(xpd,ypd,np),rd.globalAlpha=1)}(plx[e]>1400||plx[e]<0)&&(plx[e]<1450&&plx[e]>-50&&(Math.abs(plz[e]-391)<Math.abs(vectsz[e])&&(plz[e]+=vectsz[e]),Math.abs(plz[e]-529)<Math.abs(vectsz[e])&&(plz[e]+=vectsz[e])),plz[e]>391&&plz[e]<529&&(plx[e]>1430&&(plx[e]=1430),plx[e]<-30&&(plx[e]=-30))),0!=cwith[e]&&cwith[e]--,0!=flyshot[e]&&(flyshot[e]>0?flyshot[e]--:flyshot[e]++),0!=imove[e]&&(imove[e]=0)}if(-1!=blwith)wtrm<12&&(wtrm=12,wtrmacel=speed[blwith]/6*Math.random(),gbnan=!1),wtrm+=wtrmacel,wtrmacel-=.02,bly=0,102==out&&(bly=-52,wtrm=7+.025*py(blx,xgo[oft],blz,zgo[oft]),ran[blwith]=13),101!=out&&103!=out&&104!=out||(wtrm=16),blx=plx[blwith]+wtrm*msin[dir[blwith]],blz=plz[blwith]-wtrm*mcos[dir[blwith]],speed[blwith]>.2?(gbnan||((bnan=Math.floor(4*Math.random()))>=4&&(bnan=3),gbnan=!0),(ban+=speed[blwith]/9)>=4&&(ban-=4)):gbnan&&(gbnan=!1),netcol&&(netcol=!1),netcor&&(netcor=!1);else{blx+=bvx,bly+=bvy,blz+=bvz,Math.abs(bly)<.3&&Math.abs(bvy)<2?(bvy=0,bly=0,Math.abs(bvx)>Math.abs(.07*bnvx)?bvx-=.07*bnvx:bvx=0,Math.abs(bvz)>Math.abs(.07*bnvz)?bvz-=.07*bnvz:bvz=0):(Math.abs(bvx)>Math.abs(3*bnvx)&&(bvx-=.05*bnvx),Math.abs(bvz)>Math.abs(3*bnvz)&&(bvz-=.05*bnvz),bvy+=.15),0!=bvx&&0!=bvz&&(gbnan||((bnan=Math.floor(4*Math.random()))>=4&&(bnan=3),gbnan=!0,bans=.1+.8*Math.random()),(ban+=bans)>=4&&(ban-=4));var $=1450;netcor&&blx>$&&($=blx+10);var tt=-50;if(netcol&&blx<tt&&(tt=blx-10),blx>1400&&blx<$&&blz>391&&blz<529||blx<0&&blx>tt&&blz>391&&blz<529?Math.abs(bly+60)<Math.abs(bvy)&&!colt&&(bly>-60&&bvy>0||bly<-60&&bvy<0)&&(bly=-60,bvy*=-.4,gbnan=!1,colt=!0):colt&&(colt=!1),blx>1400&&blx<$&&bly<=0&&bly>-60||blx<0&&blx>tt&&bly<=0&&bly>-60?(Math.abs(blz-391)<Math.abs(bvz)&&!coll&&(blz>391&&bvz>0||blz<391&&bvz<0)&&(blz=391,bvz*=-.4,bnvz=-bnvz,gbnan=!1,coll=!0),Math.abs(blz-529)<Math.abs(bvz)&&!colr&&(blz>529&&bvz>0||blz<529&&bvz<0)&&(blz=529,bvz*=-.4,bnvz=-bnvz,gbnan=!1,colr=!0)):(coll&&(coll=!1),colr&&(colr=!1)),blz>=391&&blz<=529&&bly<=0&&bly>-60&&blx>1400){var lt=1450-bly/-60*20;!netcor&&Math.abs(blx-lt)<=Math.abs(1.5*bvx)&&bvx>0&&(netcor=!0,rbvx=-bvx*(.02+.05*hrandom()),sbvx=.6)}if(netcor)bvx>rbvx?(bvx-=sbvx,sbvx+=.7,bvx<0&&(bnvx=-1)):bvx=rbvx,blx<(lt=1445-bly/-60*20)&&(netcor=!1,blx>1445&&(blx=1445));if(blz>=391&&blz<=529&&bly<=0&&bly>-60&&blx<0){var lt=bly/-60*20-50;!netcol&&Math.abs(blx-lt)<=Math.abs(1.5*bvx)&&bvx<0&&(netcol=!0,rbvx=-bvx*(.02+.05*hrandom()),sbvx=.6)}if(netcol)bvx<rbvx?(bvx+=sbvx,sbvx+=.7,bvx>0&&(bnvx=1)):bvx=rbvx,blx>(lt=bly/-60*20-45)&&(netcol=!1,blx<-45&&(blx=-45));if(bly<=0&&bly>-60&&(Math.abs(blz-529)<=Math.abs(bvz)+2||Math.abs(blz-391)<=Math.abs(bvz)+2)){if(bvx>0&&blx<=1400&&blx>=1400-bvx){var at=.7*Math.sqrt(bvx*bvx+bvz*bvz),ot=Math.round(185+170*hrandom());bvx=msin[ot]*at,bnvx=msin[ot],bvz=-mcos[ot]*at,bnvz=-mcos[ot],blrunstat[0]=0,blrunstat[1]=0,onrecoil=5,flyball=!1,(_=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(8,_):playsnd(9,_),lastbont=1-bont,multiflex&&(shotmade=3)}if(bvx<0&&blx>=0&&blx<=-bvx){at=.7*Math.sqrt(bvx*bvx+bvz*bvz),ot=Math.round(5+170*hrandom());bvx=msin[ot]*at,bnvx=msin[ot],bvz=-mcos[ot]*at,bnvz=-mcos[ot],blrunstat[0]=0,blrunstat[1]=0,onrecoil=5,flyball=!1,(_=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(8,_):playsnd(9,_),lastbont=1-bont,multiflex&&(shotmade=3)}}if(blz>391&&blz<529&&Math.abs(bly+60)<=Math.abs(bvy)+2){if(bvx>0&&blx<=1400&&blx>=1400-bvx){at=.7*Math.sqrt(bvx*bvx+bvy*bvy),ot=Math.round(5+170*hrandom());bvx=-msin[ot]*at,bnvx=-msin[ot],bvy=mcos[ot]*at,blrunstat[0]=0,blrunstat[1]=0,onrecoil=5,flyball=!1,(_=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(8,_):playsnd(9,_),lastbont=1-bont,multiflex&&(shotmade=3)}if(bvx<0&&blx>=0&&blx<=-bvx){at=.7*Math.sqrt(bvx*bvx+bvy*bvy),ot=Math.round(5+170*hrandom());bvx=msin[ot]*at,bnvx=msin[ot],bvy=mcos[ot]*at,blrunstat[0]=0,blrunstat[1]=0,onrecoil=5,flyball=!1,(_=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(_=.4),_>1&&(_=1),Math.random()>Math.random()?playsnd(8,_):playsnd(9,_),lastbont=1-bont,multiflex&&(shotmade=3)}}bly>0&&(bly=0,bvy*=-.7,gbnan=!1,flyball=!1),flyball&&0==bly&&(flyball=!1)}if(goalkeepers(),0!=sndflex&&sndflex--,onrecoil>0&&onrecoil--,bont=105!=out?-1!=blwith?blwith<10?0:1:lai<10?0:1:oft,goal||onrecoil||out||(blz>391&&blz<529&&blx>1400&&blx<1450&&bly>-60&&(goal=1,lai<10&&0==side||lai>=10&&1==side?(onp[side]=lai,owngoal=!1):owngoal=!0,score[glt=side]++,penmode&&bescore[glt]++,1==nt&&(glt=1)),blz>391&&blz<529&&blx<0&&blx>-50&&bly>-60&&(goal=1,lai<10&&1==side||lai>=10&&0==side?(onp[1-side]=lai,owngoal=!1):owngoal=!0,score[glt=1-side]++,penmode&&bescore[glt]++,1==nt&&(glt=1)),goal||(blz<0||blz>920||blx<0||blx>1400)&&(outx=blx,outz=blz,out=1,oft=1-bont,1==nt&&(oft=0))),goal&&(1==goal&&(outx=Math.floor(700*srandom()),blx>700&&(outx+=700),outz=Math.floor(920*srandom()),glrun=Math.floor(40+70*srandom()),penmode&&(glrun=Math.floor(30+20*srandom())),gslb=srandom()>srandom()?1:0,goalsad=Math.floor(20+40*srandom()),ksadir=Math.floor(359*srandom()),ksadps=srandom()>srandom()?12:13),goal>glrun&&goal<glrun+70&&(ran[onp[glt]]=owngoal?0:15+gslb),goal++,1==nt&&100==goal&&recentar(),2==nt&&189==goal&&recreached&&!multiflex&&(onreplay=!0,rf=cf-1,switchrep=20),penmode&&goal>=100&&afterpen>10&&(afterpen=10),200==goal&&recentar()),out&&out<100&&(out++,penmode&&out>=80&&afterpen>10&&(afterpen=10),100==out&&(restat(),vectsx[onp[oft]]=0,vectsz[onp[oft]]=0,speed[onp[oft]]=0,blrunstat[oft]=0,bvx=0,bvz=0,blwith=onp[oft],shot[onp[oft]]=0,imove[onp[oft]]=0,outx>0&&outx<1400&&outz>0&&outz<920?(out=103,oft==side&&(dir[onp[oft]]=90),oft==1-side&&(dir[onp[oft]]=270),outx>1200&&outx<1400&&outz>260&&outz<660&&oft==side&&(out=104,outx=1230,outz=460),outx>0&&outx<200&&outz>260&&outz<660&&oft==1-side&&(out=104,outx=170,outz=460),plx[onp[oft]]=outx,plz[onp[oft]]=outz):outx<0||outx>1400?oft==1-side&&outx<0||oft==side&&outx>1400?(outz<460?(plz[onp[oft]]=0,outx>1400?(plx[onp[oft]]=1398,dir[onp[oft]]=225):(plx[onp[oft]]=2,dir[onp[oft]]=135)):(plz[onp[oft]]=920,outx>1400?(plx[onp[oft]]=1398,dir[onp[oft]]=315):(plx[onp[oft]]=2,dir[onp[oft]]=45)),out=101):(out=105,blwith=-1,oft==side?(outx=60,kdir[oft]=90):(outx=1340,kdir[oft]=270),outz=400+120*krandom(),kpx[oft]=outx,kpz[oft]=outz):(plx[onp[oft]]=outx,outz>920?(plz[onp[oft]]=920,dir[onp[oft]]=0):(plz[onp[oft]]=0,dir[onp[oft]]=180),out=102),onout=out,onoutc=100,103!=out&&104!=out||(holdout=80),xgo[oft]=plx[onp[oft]],zgo[oft]=plz[onp[oft]])),penmode){if(0==afterpen&&(bested[0]==bestof&&bested[1]==bestof&&(score[0]!=score[1]?fase=10:(bestof=1,bested[0]=0,bested[1]=0,bescore[0]=0,bescore[1]=0)),10!=fase)){goal=0,oft=side=tosup=0==tosup?1:0,out=104,outx=1230,outz=460;for(e=0;e<20;e++)plx[e]=grx[e],plz[e]=grz[e];onp[oft]=penturn[oft],penturn[oft]--,penturn[oft]<10*oft&&(penturn[oft]=9+10*oft),plx[onp[oft]]=outx,plz[onp[oft]]=outz,dir[onp[oft]]=90,vectsx[onp[oft]]=0,vectsz[onp[oft]]=0,speed[onp[oft]]=0,blrunstat[oft]=0,bvx=0,bvz=0,blwith=onp[oft],shot[onp[oft]]=0,0==side?(kpx=[50,1350],kdir=[90,270]):(kpx=[1350,50],kdir=[270,90]),kpz=[460,460],inishkeeper(),afterpen=100}(!out&&!goal||afterpen<=10||105==out)&&afterpen>0&&afterpen--}}}}var vseed=0;function vrandom(){var t=1e4*msin[vseed];return 360==++vseed&&(vseed=0),t-=Math.floor(t)}var hseed=100;function hrandom(){var t=1e4*msin[hseed];return++hseed>=360&&(hseed=0),t-=Math.floor(t)}var kseed=60;function krandom(){var t=1e4*msin[kseed];return 360==++kseed&&(kseed=0),t-=Math.floor(t)}var sseed=80;function srandom(){var t=1e4*msin[sseed];return 360==++sseed&&(sseed=0),t-=Math.floor(t)}var fseed=20;function frandom(t){var l=0;multiflex?(l=fseed+t)>=360&&(l-=360):(360==++fseed&&(fseed=0),l=fseed);var a=1e4*msin[l];return a-=Math.floor(a)}var savekape=[1,1],fromhead=0,firstshot=!1,kpx=[50,1350],kpz=[460,460],kdir=[90,270],kan=[0,0],kgx=[0,0],kgz=[0,0],kgupdt=[0,0],gvx=[0,0],gvz=[0,0],gvrand=[0,0],kran=[0,0],flynow=[0,0],flx=[0,0],flz=[0,0],fldist=[0,0],flcaut=[0,0],onshot=[0,0],flk8=[0,0],justgrab=[0,0],goalsad=30,ksadir=0,ksadps=0,penkick=0,lastbv=0;function inishkeeper(){0==side?(kpx=[50,1350],kdir=[90,270]):(kpx=[1350,50],kdir=[270,90]),kpz=[460,460],kan=[0,0],kran=[0,0],gvx=[0,0],gvz=[0,0],kgx=[0,0],kgz=[0,0],gvrand=[0,0],kgupdt=[0,0],flynow=[0,0],flx=[0,0],flz=[0,0],fldist=[0,0],flcaut=[0,0],onshot=[0,0],flk8=[0,0],justgrab=[0,0],goalsad=Math.floor(20+40*Math.random())}function goalkeepers(){for(var t=0;t<nt;t++)if(flynow[t]){if(justgrab[t]?(kpx[t]+=(blx-kpx[t]-16*msin[kdir[t]])/11,kpz[t]+=(blz-kpz[t]+16*mcos[kdir[t]])/11):(kpx[t]+=(flx[t]-kpx[t])/11,kpz[t]+=(flz[t]-kpz[t])/11),1==flynow[t])if(justgrab[t])justgrab[t]++,7==justgrab[t]&&(flynow[t]=2,-1!=blwith?srandom()>srandom()?flcaut[t]=1:flcaut[t]=0:flcaut[t]=1,justgrab[t]=30),(goal||out)&&(flynow[t]=2,flcaut[t]=0,justgrab[t]=30);else{if(t==side&&blx+bvx<kpx[t]&&bly>-60||t!=side&&blx+bvx>kpx[t]&&bly>-60){var l=((lastbv=Math.sqrt(bvx*bvx+bvz*bvz))-6)/16.667,a=Math.abs(bly/200),o=Math.abs(flz[t]-460)/230;flcaut[t]=0,srandom()>(l+a+o+fromhead)*savekape[t]&&(flcaut[t]=1),firstshot||1!=t||(flcaut[t]=0,firstshot=!0),penkick&&(flcaut[t]=0),1==flcaut[t]&&(6==kan[t]||7==kan[t])&&srandom()>srandom()&&(flcaut[t]=2),flynow[t]=2}if((py(kpx[t],flx[t],kpz[t],flz[t])<11||goal||out)&&(flynow[t]=2,flcaut[t]=0),2==flynow[t]){if(2==flcaut[t])(x=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(x=.4),x>1&&(x=1),Math.random()>Math.random()?playsnd(6,x):playsnd(7,x);if(1==flcaut[t])(x=Math.sqrt(bvx*bvx+bvz*bvz)/10)<.4&&(x=.4),x>1&&(x=1),Math.random()>Math.random()?playsnd(10,x):playsnd(11,x)}}if(flynow[t]>=2){if(0==flcaut[t]&&(kan[t]=1),1==flcaut[t]){blwith=-1,bvx=0,bvz=0,bvy=0;var n=kpx[t]+16*msin[kdir[t]];kpz[t],mcos[kdir[t]];blz+=(n-(blx+=(n-blx)/4))/4,bly<-10&&(bly-=bly/4),bly>-40&&(kan[t]=1),12==flynow[t]&&(oft=t,out=105,blwith=-1,outx=t==side?120+60*srandom():1280-60*srandom(),outz=360+200*srandom())}if(2==flcaut[t]&&2==flynow[t]){var e=Math.sqrt(bvx*bvx+bvz*bvz)*srandom(),r=0;r=t==side?Math.round(5+170*srandom()):Math.round(185+170*srandom()),bvx=msin[r]*e,bnvx=msin[r],bvz=-mcos[r]*e,bnvz=-mcos[r],blrunstat[0]=0,blrunstat[1]=0,onrecoil=5,flyball=!1,flynow[t]=12,lastbont=t,multiflex&&mycontrols&&(shotmade=3)}12==flynow[t]?(2==nt&&1==flcaut[t]&&bont!=t&&lastbv>5&&playsnd(15,1),flynow[t]=0):flynow[t]++}}else if(105!=out||oft!=t){kan[t]=0;var m=60;if(104==out&&(m=10),0==kgupdt[t]){if(t==side){var d=py(blx,0,blz,460)/m;kgx[t]=blx/d,kgz[t]=460+(blz-460)/d,kgx[t]<-20&&(kgx[t]=-20)}else{d=py(blx,1400,blz,460)/m;kgx[t]=1400+(blx-1400)/d,kgz[t]=460+(blz-460)/d,kgx[t]>1420&&(kgx[t]=1420)}kgupdt[t]=Math.floor(100*krandom())}else kgupdt[t]--;if(0==gvrand[t]?(gvx[t]=Math.floor(30*krandom()-15),gvz[t]=Math.floor(30*krandom()-15),gvrand[t]=t==side?Math.floor(krandom()*(blx/10)):Math.floor(krandom()*((1400-blx)/10)),gvrand[t]<20&&(gvrand[t]=20),(out||centara)&&(gvrand[t]=Math.floor(140*krandom()))):gvrand[t]--,gox=kgx[t]+gvx[t],goz=kgz[t]+gvz[t],goal<goalsad){var i=!1;if(Math.abs(kpx[t]-gox)>1?(kpx[t]>gox?kpx[t]--:kpx[t]++,i=!0):kpx[t]=gox,Math.abs(kpz[t]-goz)>1?(kpz[t]>goz?kpz[t]--:kpz[t]++,i=!0):kpz[t]=goz,i&&(kran[t]+=.1,kran[t]>=2&&(kran[t]-=2),kan[t]=Math.floor(10+kran[t])),kpz[t]-blz!=0){var p=Math.round(Math.abs(Math.atan((kpx[t]-blx)/(kpz[t]-blz))*(180/Math.PI)));kpx[t]<blx?kpz[t]<blz&&(p=90-p+90):kpz[t]<blz?p+=180:p=90-p+270,p>=360&&(p-=360),p<0&&(p+=360),kdir[t]=p}}else kdir[t]=ksadir,kan[t]=ksadps;if(0!=onshot[t]&&(kan[t]=9,onshot[t]--),-1==blwith&&!justgrab[t]&&(0!=bvx||0!=bvz)&&goal<goalsad)if(t!=side){var s=(560-blz)/(1400-blx),f=(360-blz)/(1400-blx);if(blslop=bvz/bvx,bvx>0&&blx+11*bvx>1400&&blslop>f&&blslop<s){flx[t]=1400-30*frandom(2),flz[t]=(1400-blx)*blslop+blz,fldist[t]=py(kpx[t],flx[t],kpz[t],flz[t]);var c=bly;penkick&&(penmode&&0==side||multiflex||(cumborg=Math.random()),srandom()<cumborg?(flz[t]=260+400*srandom(),flz[t]<390&&(flz[t]=390),flz[t]>530&&(flz[t]=530),c=-80*srandom()):penkick=0),c<-40&&(flz[t]<kpz[t]?(kan[t]=3,flz[t]-=25):(kan[t]=2,flz[t]+=25)),c<-20&&c>=-40&&(flz[t]<kpz[t]?(kan[t]=5,flz[t]-=25):(kan[t]=4,flz[t]+=25)),c>=-20&&(Math.abs(flz[t]-kpz[t])>30?flz[t]<kpz[t]?(kan[t]=7,flz[t]-=10):(kan[t]=6,flz[t]+=10):kan[t]=1),justgrab[t]=0,flynow[t]=1}}else{s=(560-blz)/blx,f=(360-blz)/blx;if(blslop=bvz/bvx,bvx<0&&blx+11*bvx<0&&blslop>f&&blslop<s){flx[t]=30*frandom(2),flz[t]=-blx*blslop+blz,fldist[t]=py(kpx[t],flx[t],kpz[t],flz[t]);c=bly;penkick&&(penmode&&0==side||multiflex||(cumborg=Math.random()),srandom()<cumborg?(flz[t]=260+400*srandom(),flz[t]<390&&(flz[t]=390),flz[t]>530&&(flz[t]=530),c=-80*srandom()):penkick=0),c<-40&&(flz[t]<kpz[t]?(kan[t]=2,flz[t]-=25):(kan[t]=3,flz[t]+=25)),c<-20&&c>=-40&&(flz[t]<kpz[t]?(kan[t]=4,flz[t]-=25):(kan[t]=5,flz[t]+=25)),c>=-20&&(Math.abs(flz[t]-kpz[t])>30?flz[t]<kpz[t]?(kan[t]=6,flz[t]-=10):(kan[t]=7,flz[t]+=10):kan[t]=1),justgrab[t]=0,flynow[t]=1}}0!=justgrab[t]&&justgrab[t]--;var h=20;-1!=blwith&&(h=60),-1!=blwith&&bont==t&&(justgrab[t]=1),!justgrab[t]&&!onshot[t]&&!flynow[t]&&bly>-40&&py(kpx[t],blx,kpz[t],blz)<h&&goal<goalsad&&(flx[t]=blx,flz[t]=blz,kan[t]=1,justgrab[t]=1,flynow[t]=1)}else{if(kan[t]=0,t==pnum&&oft==pnum&&(mdown?(onshot[t]=1,rxgo[t]=xgo[pnum],rzgo[t]=zgo[pnum]):1==onshot[t]&&(onshot[t]=16)),py(kpx[t],outx,kpz[t],outz)>5&&!onshot[t]){if(kpz[t]-outz!=0){p=Math.round(Math.abs(Math.atan((kpx[t]-outx)/(kpz[t]-outz))*(180/Math.PI)));kpx[t]<outx?kpz[t]<outz&&(p=90-p+90):kpz[t]<outz?p+=180:p=90-p+270,p>=360&&(p-=360),p<0&&(p+=360),kdir[t]=p}kpx[t]+=2*msin[kdir[t]],kpz[t]-=2*mcos[kdir[t]],kran[t]+=.1,kran[t]>=2&&(kran[t]-=2),kan[t]=Math.floor(10+kran[t])}else if(onshot[t]){if(kpz[t]-rzgo[t]!=0){p=Math.round(Math.abs(Math.atan((kpx[t]-rxgo[t])/(kpz[t]-rzgo[t]))*(180/Math.PI)));kpx[t]<rxgo[t]?kpz[t]<rzgo[t]&&(p=90-p+90):kpz[t]<rzgo[t]?p+=180:p=90-p+270,p>=360&&(p-=360),p<0&&(p+=360),kdir[t]=p}if(1==onshot[t])flk8[t]>0?(flk8[t]--,flk8[t]<=0&&(flk8[t]=-Math.floor(50+50*Math.random())),kan[t]=8):(flk8[t]++,flk8[t]>=0&&(flk8[t]=Math.floor(10+10*Math.random())));else if(onshot[t]--,kan[t]=8,onshot[t]<=8&&(kan[t]=9),4==onshot[t]){var x,u=py(rxgo[t],kpx[t],rzgo[t],kpz[t]);hmag=1+u/(130+20*hrandom()),vmag=1+u/(130+20*hrandom()),bvx=msin[kdir[t]]*(2+hmag),bnvx=msin[kdir[t]],bvz=-mcos[kdir[t]]*(2+hmag),bnvz=-mcos[kdir[t]],bvy=-vmag,out=0,flyball=!0,lai=10*t,multiflex&&mycontrols&&(shotmade=4),(x=Math.sqrt(hmag*hmag+vmag*vmag)/10)<.4&&(x=.4),x>1&&(x=1),Math.random()>Math.random()?playsnd(4,x):playsnd(5,x)}}blx=kpx[t]+16*msin[kdir[t]],blz=kpz[t]-16*mcos[kdir[t]]}0!=penkick&&penkick--}var raqas=.5,badpass=!1,ballcontrol=.5,shotongoal=0,findmygo=50,rax=0,raz=0,angadd=0,cntgo=0,donce=!1,cntout=0,cnthead=0,forbes=-1,kpflex=0;function playcomputer(){if(blwith==onp[1]||105==out&&1==oft)if(cnthead=0,forbes=-1,out<100&&!centara){if(50!=findmygo&&plz[blwith]!=zgo[1]||(xgo[1]=0==side?0:1400,zgo[1]=Math.round(920*Math.random()),angadd=0),plz[blwith]-zgo[1]!=0){var t=Math.round(Math.abs(Math.atan((plx[blwith]-xgo[1])/(plz[blwith]-zgo[1]))*(180/Math.PI)));plx[blwith]<xgo[1]?plz[blwith]<zgo[1]&&(t=90-t+90):plz[blwith]<zgo[1]?t+=180:t=90-t+270,t>=360&&(t-=360),t<0&&(t+=360),dir[blwith]=t+angadd}for(;dir[blwith]>=360;)dir[blwith]-=360;for(;dir[blwith]<0;)dir[blwith]+=360;if(findmygo<50){rax=plx[blwith]+50*vectsx[blwith],raz=plz[blwith]-50*vectsz[blwith];for(var l=0;l<10;l++)py(rax,plx[l],raz,plz[l])<50&&(angadd=Math.round(45+225*Math.random()*raqas),Math.random()>Math.random()&&(angadd*=-1),findmygo=Math.round(70+20*(1-raqas)*Math.random()))}onmove[1]=blwith,-1==cntgo&&(cntgo=cwith[blwith]*Math.random()*(1+ballcontrol)),cntgo--,0==side&&(plx[blwith]<300&&(cntgo-=2),plx[blwith]<200&&(cntgo-=2)),1==side&&(plx[blwith]>1100&&(cntgo-=2),plx[blwith]>1200&&(cntgo-=2)),cntgo<0&&(cntgo=0);var a=!1;if(0==cntgo){for(var o=0;o<2&&!a;){for(l=19;l>=10;l--)if(l!=blwith&&!a){var n=0,e=py(plx[blwith],plx[l],plz[blwith],plz[l]);if(0==o?((0==side&&plx[l]<plx[blwith]||1==side&&plx[l]>plx[blwith])&&(n=1),(0==side&&plx[blwith]<200||1==side&&plx[blwith]>1200)&&(n=2)):n=2,n&&e<900&&e>200){var r=Math.round(Math.abs(Math.atan((plx[blwith]-plx[l])/(plz[blwith]-plz[l]))*(180/Math.PI)));plx[blwith]<plx[l]?plz[blwith]<plz[l]&&(r=90-r+90):plz[blwith]<plz[l]?r+=180:r=90-r+270,360==r&&(r=0);var m=!1;if(2==n&&e>460&&(m=!0),!m)for(var d=0;d<10;d++){if(py(plx[blwith],plx[d],plz[blwith],plz[d])<e&&n){var i=Math.round(Math.abs(Math.atan((plx[blwith]-plx[d])/(plz[blwith]-plz[d]))*(180/Math.PI)));if(plx[blwith]<plx[d]?plz[blwith]<plz[d]&&(i=90-i+90):plz[blwith]<plz[d]?i+=180:i=90-i+270,360==i&&(i=0),(u=Math.abs(r-i))>180&&(u=Math.abs(u-360)),u<25){n=0;break}}}if(n){rxgo[1]=plx[l],rzgo[1]=plz[l],a=!0;break}}}badpass?o++:o=3}var p=!1;if(a&&Math.abs(rzgo[1]-460)<250&&(0==side&&rxgo[1]<250||1==side&&rxgo[1]>1150)&&(p=!0),!p||Math.random()>Math.random()){var s=0;if(0==side&&plx[blwith]<400||1==side&&plx[blwith]>1e3)for(l=10;l<20;l++)l!=blwith&&(0==side&&plx[blwith]<plx[l]||1==side&&plx[blwith]>plx[l])&&s++;if(0==side&&(Math.random()>(plx[blwith]-100)/500||9==s)){var f=(70+70*shotongoal)*Math.random();Math.random()>Math.random()&&(f*=-1),rzgo[1]=460+f,rxgo[1]=0,a=!0}if(1==side&&(Math.random()>(1300-plx[blwith])/500||9==s)){f=(70+70*shotongoal)*Math.random();Math.random()>Math.random()&&(f*=-1),rzgo[1]=460+f,rxgo[1]=1400,a=!0}}}if(a){if(plz[blwith]-rzgo[1]!=0){t=Math.round(Math.abs(Math.atan((plx[blwith]-rxgo[1])/(plz[blwith]-rzgo[1]))*(180/Math.PI)));plx[blwith]<rxgo[1]?plz[blwith]<rzgo[1]&&(t=90-t+90):plz[blwith]<rzgo[1]?t+=180:t=90-t+270,t>=360&&(t-=360),t<0&&(t+=360),dir[blwith]=t}onmove[1]=-1}0==--findmygo&&(findmygo=50),0!=cntout&&(cntout=0)}else{a=!1;if(centara){onmove[1]=blwith,xgo[1]=plx[blwith],zgo[1]=plz[blwith];var c=50;if(0!=time&&3750!=time||(c=100),cntout>c)for(l=10;l<20;l++){if(l!=blwith&&!a)if((e=py(plx[blwith],plx[l],plz[blwith],plz[l]))<400&&Math.random()<Math.random()){rxgo[1]=plx[l],rzgo[1]=plz[l],a=!0;break}}cntout++}if(101==out&&(onmove[1]=blwith,xgo[1]=plx[blwith],zgo[1]=plz[blwith],90==cntout&&(outx<0&&(rxgo[1]=50+300*Math.random()),outx>1400&&(rxgo[1]=1350-300*Math.random()),rzgo[1]=outz<460?660-100*Math.random()-400*shotongoal*Math.random():260+100*Math.random()+400*shotongoal*Math.random(),a=!0),cntout++),102==out){if(onmove[1]=blwith,xgo[1]=plx[blwith],zgo[1]=plz[blwith],0==cntout&&(dir[blwith]+=Math.round(180*Math.random()-90),dir[blwith]>=360&&(dir[blwith]-=360),dir[blwith]<0&&(dir[blwith]+=360)),cntout>=40)for(l=19;l>=10;l--){if(l!=blwith&&!a)if((e=py(plx[blwith],plx[l],plz[blwith],plz[l]))<500&&e>10){r=Math.round(Math.abs(Math.atan((plx[blwith]-plx[l])/(plz[blwith]-plz[l]))*(180/Math.PI)));plx[blwith]<plx[l]?plz[blwith]<plz[l]&&(r=90-r+90):plz[blwith]<plz[l]?r+=180:r=90-r+270,360==r&&(r=0);var h=!0;for(d=0;d<10;d++){if(py(plx[blwith],plx[d],plz[blwith],plz[d])<e&&h){i=Math.round(Math.abs(Math.atan((plx[blwith]-plx[d])/(plz[blwith]-plz[d]))*(180/Math.PI)));if(plx[blwith]<plx[d]?plz[blwith]<plz[d]&&(i=90-i+90):plz[blwith]<plz[d]?i+=180:i=90-i+270,360==i&&(i=0),(u=Math.abs(r-i))>180&&(u=Math.abs(u-360)),u<25){h=!1;break}}}if(h){rxgo[1]=plx[l],rzgo[1]=plz[l],a=!0;break}}}70==cntout&&(rxgo[1]=1400*Math.random(),rzgo[1]=920*Math.random(),a=!0),cntout++}if(103==out){if(onmove[1]=blwith,xgo[1]=0==side?0:1400,zgo[1]=460,plz[blwith]-zgo[1]!=0){t=Math.round(Math.abs(Math.atan((plx[blwith]-xgo[1])/(plz[blwith]-zgo[1]))*(180/Math.PI)));plx[blwith]<xgo[1]?plz[blwith]<zgo[1]&&(t=90-t+90):plz[blwith]<zgo[1]?t+=180:t=90-t+270,t>=360&&(t-=360),t<0&&(t+=360),dir[blwith]=t}if(0==cntout&&(donce=!1),cntout>=200){var x=!1;if(donce||(0==side&&plx[blwith]<500&&(Math.random()>Math.random()||Math.random()>Math.random())&&(x=!0),1==side&&plx[blwith]>900&&(Math.random()>Math.random()||Math.random()>Math.random())&&(x=!0),donce=!0),x){f=(70+70*shotongoal)*Math.random();Math.random()>Math.random()&&(f*=-1),rzgo[1]=460+f,0==side&&(rxgo[1]=0),1==side&&(rxgo[1]=1400),a=!0}else for(l=19;l>=10;l--)if(l!=blwith&&!a){e=py(plx[blwith],plx[l],plz[blwith],plz[l]);if(0==side&&plx[l]<plx[blwith]&&Math.random()>Math.random()||1==side&&plx[l]>plx[blwith]&&Math.random()<Math.random()){r=Math.round(Math.abs(Math.atan((plx[blwith]-plx[l])/(plz[blwith]-plz[l]))*(180/Math.PI)));plx[blwith]<plx[l]?plz[blwith]<plz[l]&&(r=90-r+90):plz[blwith]<plz[l]?r+=180:r=90-r+270,360==r&&(r=0);for(h=!0,d=0;d<10;d++){if(py(plx[blwith],plx[d],plz[blwith],plz[d])<e&&h){var u;i=Math.round(Math.abs(Math.atan((plx[blwith]-plx[d])/(plz[blwith]-plz[d]))*(180/Math.PI)));if(plx[blwith]<plx[d]?plz[blwith]<plz[d]&&(i=90-i+90):plz[blwith]<plz[d]?i+=180:i=90-i+270,360==i&&(i=0),(u=Math.abs(r-i))>180&&(u=Math.abs(u-360)),u<7){h=!1;break}}}if(h){rxgo[1]=plx[l],rzgo[1]=plz[l],a=!0;break}}}}cntout++}if(104==out){if(onmove[1]=blwith,xgo[1]=plx[blwith],zgo[1]=plz[blwith],200==cntout){f=(70+70*shotongoal*.5)*Math.random();Math.random()>Math.random()&&(f*=-1),rzgo[1]=460+f,0==side&&(rxgo[1]=0),1==side&&(rxgo[1]=1400),a=!0}cntout++}if(a){if(plz[blwith]-rzgo[1]!=0){t=Math.round(Math.abs(Math.atan((plx[blwith]-rxgo[1])/(plz[blwith]-rzgo[1]))*(180/Math.PI)));plx[blwith]<rxgo[1]?plz[blwith]<rzgo[1]&&(t=90-t+90):plz[blwith]<rzgo[1]?t+=180:t=90-t+270,t>=360&&(t-=360),t<0&&(t+=360),dir[blwith]=t}onmove[1]=-1,cntout=0}if(105==out&&1==oft){if(xgo[1]=700,zgo[1]=360,0==cntout&&(kpflex=Math.floor(30+90*Math.random())),cntout>=kpflex&&cntout<kpflex+20&&(onshot[1]=1),cntout==kpflex+20){var b=Math.floor(10+10*Math.random());20==b&&(b=19),rxgo[1]=plx[b],rzgo[1]=plz[b],onshot[1]=16}cntout++}}else if(findmygo=50,onmove[1]=-1,cntgo=-1,cntout=0,-1==blwith&&1==bont)if(cnthead>=10){if(forbes!=onp[1]&&py(blx,plx[onp[1]],blz,plz[onp[1]])<100&&flyshot[onp[1]]>=0){var g=!1;if(0==side&&Math.random()>(plx[onp[1]]-100)/1300&&(g=!0),1==side&&Math.random()>(1300-plx[onp[1]])/1300&&(g=!0),bly>-30&&Math.random()>.16&&(g=!1),g){var w=!1;if(0==side&&Math.random()>(plx[onp[1]]-100)/600&&(w=!0),1==side&&Math.random()>(1300-plx[onp[1]])/600&&(w=!0),w){f=(70+70*shotongoal)*Math.random();Math.random()>Math.random()&&(f*=-1),rzgo[1]=460+f,0==side&&(rxgo[1]=0),1==side&&(rxgo[1]=1400)}else{var z=0,y=10;for(l=10;l<20;l++){e=py(plx[onp[1]],plx[l],plz[onp[1]],plz[l]);l!=onp[1]&&(e<z||0==z)&&(z=e,y=l)}rxgo[1]=plx[y],rzgo[1]=plz[y]}if(xgo[1]=blx,zgo[1]=blz,plz[onp[1]]-rzgo[1]!=0){t=Math.round(Math.abs(Math.atan((plx[onp[1]]-rxgo[1])/(plz[onp[1]]-rzgo[1]))*(180/Math.PI)));plx[onp[1]]<rxgo[1]?plz[onp[1]]<rzgo[1]&&(t=90-t+90):plz[onp[1]]<rzgo[1]?t+=180:t=90-t+270,t>=360&&(t-=360),t<0&&(t+=360),dir[onp[1]]=t}flyshot[onp[1]]=16}forbes=onp[1]}}else cnthead++}var cntont=0;function authont(){if(0==cntont){for(var t=0;t<2;t++){bltime[t]=Math.round(teamtats[tsel[t]]*Math.random()*1.6),bltime[t]<20&&(bltime[t]=20),bltime[t]>100&&(bltime[t]=100);var l=.5*(1-(teamtats[tsel[t]]-50)/50),a=.5*(score[t]-score[1-t]);if(a>1&&(a=1),a<-1&&(a=-1),tacklvl[t]=l+a,1==t){var o=2;16==ntmo&&(o=1.5),8==ntmo&&(o=1),4==ntmo&&(o=.5),2==ntmo&&(o=0),tacklvl[t]+=o}if(tacklvl[t]>2&&(tacklvl[t]=2),tacklvl[t]<0&&(tacklvl[t]=0),tackfreq[t]=.375*(2-tacklvl[t])+.25,score[t]>score[1-t]?(cutoff[t]=.5+.15*(score[t]-score[1-t]),cutoff[t]>1&&(cutoff[t]=1)):(cutoff[t]=.5-.15*score[1-t],cutoff[t]<0&&(cutoff[t]=0)),savekape[t]=1.3-(teamtats[tsel[t]]-50)/100,1==t){o=0;16==ntmo&&(o=-.05),8==ntmo&&(o=-.1),4==ntmo&&(o=-.15),2==ntmo&&(o=-.2),savekape[t]+=o}}badpass=!1,Math.random()>Math.random()&&(ntmo>16&&(badpass=!0),16==ntmo&&(badpass=score[1]-score[0]>=0),8==ntmo&&(badpass=score[1]-score[0]>=1),4==ntmo&&(badpass=score[1]-score[0]>=2),2==ntmo&&(badpass=score[1]-score[0]>=3));var n=.5;shotongoal=1,ballcontrol=1,16==ntmo&&(shotongoal=.6,n+=.125,ballcontrol=.5),8==ntmo&&(shotongoal=.4,n+=.25,ballcontrol=.25),4==ntmo&&(shotongoal=.2,n+=.375,ballcontrol=0),2==ntmo&&(shotongoal=0,n+=.5,ballcontrol=0),n+=(teamtats[tsel[1]]-50)/100,(raqas=n*Math.random())>1&&(raqas=1),cntont=100}else cntont--}var onreplay=!1,switchrep=0,recreached=!1,cf=0,rblx=[],rblz=[],rbly=[],rnetcor=[],rnetcol=[],rban=[],rbnan=[],rplx=[],rplz=[],rran=[],rdir=[],rkpx=[],rkpz=[],rkan=[],rkdir=[],rf=0,blknd=0;function recordframe(){rblx[cf]=blx,rblz[cf]=blz,rbly[cf]=bly,rnetcor[cf]=netcor,rnetcol[cf]=netcol,rban[cf]=Math.floor(ban),rbnan[cf]=bnan,recreached||(rplx[cf]=[],rplz[cf]=[],rran[cf]=[],rdir[cf]=[],rkpx[cf]=[],rkpz[cf]=[],rkan[cf]=[],rkdir[cf]=[]);for(var t=0;t<20;t++)rplx[cf][t]=plx[t],rplz[cf][t]=plz[t],rran[cf][t]=ran[t],rdir[cf][t]=dir[t];for(t=0;t<2;t++)rkpx[cf][t]=kpx[t],rkpz[cf][t]=kpz[t],rkan[cf][t]=kan[t],rkdir[cf][t]=kdir[t];500==++cf&&(cf=0,recreached=!0)}function replayframes(){blx=rblx[rf],blz=rblz[rf],bly=rbly[rf],netcor=rnetcor[rf],netcol=rnetcol[rf],ban=rban[rf],bnan=rbnan[rf];for(var t=0;t<20;t++)plx[t]=rplx[rf][t],plz[t]=rplz[rf][t],ran[t]=rran[rf][t],dir[t]=rdir[rf][t];for(t=0;t<2;t++)kpx[t]=rkpx[rf][t],kpz[t]=rkpz[rf][t],kan[t]=rkan[rf][t],kdir[t]=rkdir[rf][t]}function drawall(){var t=0,l=[];l[0]=529,camxz>45&&camxz<=135&&(l[0]=1425),camxz>135&&camxz<=225&&(l[0]=-529),camxz>225&&camxz<=315&&(l[0]=-1425),l[1]=391,camxz>45&&camxz<=135&&(l[1]=1425),camxz>135&&camxz<=225&&(l[1]=-391),camxz>225&&camxz<=315&&(l[1]=-1425),l[2]=529,camxz>45&&camxz<=135&&(l[2]=-25),camxz>135&&camxz<=225&&(l[2]=-529),camxz>225&&camxz<=315&&(l[2]=25),l[3]=391,camxz>45&&camxz<=135&&(l[3]=-25),camxz>135&&camxz<=225&&(l[3]=-391),camxz>225&&camxz<=315&&(l[3]=25),l[4]=391,camxz>45&&camxz<=135&&(l[4]=1470),camxz>135&&camxz<=225&&(l[4]=-529),camxz>225&&camxz<=315&&(l[4]=-1470),l[5]=391,camxz>45&&camxz<=135&&(l[5]=-70),camxz>135&&camxz<=225&&(l[5]=-529),camxz>225&&camxz<=315&&(l[5]=70),l[6]=blz,camxz>45&&camxz<=135&&(l[6]=blx),camxz>135&&camxz<=225&&(l[6]=-blz),camxz>225&&camxz<=315&&(l[6]=-blx),t=7;for(var a=0;a<nt;a++)l[t]=kpz[a],camxz>45&&camxz<=135&&(l[t]=kpx[a]),camxz>135&&camxz<=225&&(l[t]=-kpz[a]),camxz>225&&camxz<=315&&(l[t]=-kpx[a]),t++;for(a=0;a<10*nt;a++)l[t]=plz[a],camxz>45&&camxz<=135&&(l[t]=plx[a]),camxz>135&&camxz<=225&&(l[t]=-plz[a]),camxz>225&&camxz<=315&&(l[t]=-plx[a]),t++;var o=[],n=[];for(a=0;a<t;a++)o[a]=0;for(a=0;a<t;a++){for(var e=a+1;e<t;e++)l[a]<l[e]?o[a]++:o[e]++;n[o[a]]=a}for(a=0;a<t;a++)n[a]>=0&&n[a]<=3&&drawsidenet(n[a]),4==n[a]&&drawbacknet(0,netcor,blx+4,bly,blz),5==n[a]&&drawbacknet(1,netcol,blx-4,bly,blz),6==n[a]&&drawball(!1),1==nt&&(7==n[a]&&drawkeeper(0),n[a]>=8&&drawplayer(n[a]-8)),2==nt&&(7!=n[a]&&8!=n[a]||drawkeeper(n[a]-7),n[a]>=9&&drawplayer(n[a]-9));drawtopnet(0),drawtopnet(1),drawball(!0)}function drawplayer(t){var l=plx[t],a=plz[t];11!=ran[t]&&12!=ran[t]||(l-=10*msin[dir[t]],a+=10*mcos[dir[t]]);var o=dir[t]+camxz;if(o>=360&&(o-=360),o<0&&(o+=360),8==(o=Math.round(o/45))&&(o=0),-1==o&&(o=7),xp=[l,l+31*msin[camzy]*msin[camxz]],zp=[a,a+31*msin[camzy]*mcos[camxz]],yp=[0,-35*mcos[camzy]],calcdraw(xp,yp,zp,np=2,xpd=[],ypd=[])){var n=2.6*(ypd[0]-ypd[1]),e=.9*n;if(null!=plimg[pli[t]][o][Math.floor(ran[t])]&&plimg[pli[t]][o][Math.floor(ran[t])].width>0&&(1==plimgok[pli[t]][o][Math.floor(ran[t])]&&rd.drawImage(plimg[pli[t]][o][Math.floor(ran[t])],xpd[0]-.5*e,ypd[0]-.82*n,e,n),0==plimgok[pli[t]][o][Math.floor(ran[t])]))try{rd.drawImage(plimg[pli[t]][o][Math.floor(ran[t])],xpd[0]-.5*e,ypd[0]-.82*n,e,n),plimgok[pli[t]][o][Math.floor(ran[t])]=1}catch(l){plimgok[pli[t]][o][Math.floor(ran[t])]=2}}}function drawkeeper(t){var l=kdir[t]+camxz;l>=360&&(l-=360),l<0&&(l+=360),8==(l=Math.round(l/45))&&(l=0),-1==l&&(l=7);var a=Math.floor(kan[t]);if(2==a&&l>4&&(a=3),3==a&&l>4&&(a=2),4==a&&l>4&&(a=5),5==a&&l>4&&(a=4),6==a&&l>4&&(a=7),7==a&&l>4&&(a=6),xp=[kpx[t],kpx[t]+31*msin[camzy]*msin[camxz]],zp=[kpz[t],kpz[t]+31*msin[camzy]*mcos[camxz]],yp=[0,-35*mcos[camzy]],calcdraw(xp,yp,zp,np=2,xpd=[],ypd=[])){var o=2.5*(ypd[0]-ypd[1]),n=o;if(null!=kpimg[t][l][a]&&kpimg[t][l][a].width>0&&(1==kpimgok[t][l][a]&&rd.drawImage(kpimg[t][l][a],xpd[0]-.5*n,ypd[0]-.82*o,n,o),0==kpimgok[t][l][a]))try{rd.drawImage(kpimg[t][l][a],xpd[0]-.5*n,ypd[0]-.82*o,n,o),kpimgok[t][l][a]=1}catch(o){kpimgok[t][l][a]=2}}}function drawball(t){if(!t||t&&bly<=-60&&blx>1400&&blx<1430&&blz>391&&blz<529||t&&bly<=-60&&blx<0&&blx>-30&&blz>391&&blz<529){var l=0;t&&(l=-60);var a=8+.025*Math.abs(bly-l);if(xp=[blx,blx+a*msin[camzy]*msin[camxz]],zp=[blz,blz+a*msin[camzy]*mcos[camxz]],yp=[l,l-a*mcos[camzy]],calcdraw(xp,yp,zp,np=2,xpd=[],ypd=[])){var o=e=ypd[0]-ypd[1],n=1-.025*Math.abs(bly)*.0625;n<.25&&(n=.25),t&&(n*=.5),rd.globalAlpha=n,rd.drawImage(blshd,xpd[0]-.8*o,ypd[0]-.45*e,1.6*o,.9*e),rd.globalAlpha=1}}if((bly>-60&&!t||bly<-60&&t)&&(xp=[blx,blx+8*msin[camzy]*msin[camxz]],zp=[blz,blz+8*msin[camzy]*mcos[camxz]],yp=[bly,bly-8*mcos[camzy]],calcdraw(xp,yp,zp,np=2,xpd=[],ypd=[]))){var e;o=e=ypd[0]-ypd[1];rd.drawImage(blimg[bant[bnan][Math.floor(ban)]],xpd[0]-.5*o,ypd[0]-e,o,e)}}var firstime=0,mutegame=!1,onagamebtn=!1,frmzy=54,chfrm=25+Math.floor(25*Math.random()),recodist=!1,addod=Math.floor(2+8*Math.random()),ranod=Math.floor(500+600*Math.random()),wasonhalt=0,cntimeout=0,midhalt=0,podl=[],podu=[],podc=[],multmenu=!1,multexit=-1,outyp="",outdisc="",lastbont=-1,bontcnt=0,bontblx=0,exitedturn=0,lastinbont=-1,inbontvar=Math.floor(500*Math.random()),nodowning=!0,ndowns=0,downed=0,downch=!1,trwd=[52,59,69],trhd=[42,41,39];function drawflexs(){var t=!1,l=!1;if(onreplay){if(switchrep<0)camxz=0,camzy=40,camdist=(camodist=740)*((mw+mh)/2),switchrep++;else{for(camxz++;camxz>=360;)camxz-=360;for(;camxz<0;)camxz+=360;camzy!=frmzy?camzy<frmzy?camzy++:camzy--:0==--chfrm&&((frmzy=Math.floor(80*Math.random()))<20&&(frmzy=20),frmzy>54&&(frmzy=54),chfrm=125+Math.floor(250*Math.random())),recodist?(camodist-=addod)<400&&(recodist=!1,addod=Math.floor(2+8*Math.random())):(camodist+=addod)>1200&&(recodist=!0,addod=Math.floor(2+8*Math.random())),camdist=camodist*((mw+mh)/2)}switchrep<=10&&500==++rf&&(rf=0);var a=cf-10;if(a<0&&(a+=500),rf==a&&(switchrep=-10),switchrep>0&&switchrep--,0==switchrep&&rf==cf&&(onreplay=!1),0==switchrep){var o=.5*(mw+mh);rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.7,rd.fillText("INSTANT REPLAY",20*mw,20*mh+30*o),rd.globalAlpha=1;var n=0;declick(c=canw-194*o-20*mw,c+194*o,h=canh-72*o-20*mh,h+66*o,1),1==wasonit&&(n=1),onaclk>7&&1==onwho&&(n=1),9==onaclk&&1==onwho&&(rf=a,switchrep=-10,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(n,c,h,194*o,66*o,"#B2D800","#FF9001","#CE9B00","#FC7100",32,"SKIP >",.14,.65,.05,.2,.05,.1)}else t=!0}else{o=.5*(mw+mh);onagamebtn=!1,penmode&&10==fase&&getendbg(),7650==time&&(1==nt||score[0]!=score[1]||multiflex?(multexit=0,getendbg(),fase=10):(restat(),inishkeeper(),bvz=0,bvx=0,bvy=0,blwith=-1)),multiflex&&(-1==multexit&&1==halt&&(3e3!=++cntimeout&&0!=conon||(multexit=1,getendbg(),fase=10)),-1==multexit&&2==halt&&1e3==midhalt&&(multexit=navigator.onLine?2:3,getendbg(),fase=10),-1==multexit&&0==conon&&(multexit=mycontrols&&navigator.onLine?2:3,getendbg(),fase=10),-1==multexit&&badcon&&(multexit=1==badcon?3:2,getendbg(),fase=10)),rd.font=20*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle";var e=team[tsel[0]]+"  "+score[0];2==nt&&(e+="  -  "+score[1]+"  "+team[tsel[1]]);var r=0;if(multiflex&&0!=trophy[0]&&(r+=10*mw,rd.drawImage(stroph[trophy[0]-1],r,10*mh,trwd[trophy[0]-1]*o,trhd[trophy[0]-1]*o),rd.fillStyle="#FFFFFF",r+=10*mw+trwd[trophy[0]-1]*o,rd.globalAlpha=.8,rd.fillText("x"+ntrophy[0],r,10*mh+29*o),rd.globalAlpha=1,r+=rd.measureText("x"+ntrophy[0]).width),r+=10*mw,rd.drawImage(steamflag[tsel[0]],r,10*mw,44*o,44*o),r+=10*mw+44*o,rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText(e,r,10*mh+29*o),rd.globalAlpha=1,r+=rd.measureText(e).width,2==nt&&(r+=10*mw,rd.drawImage(steamflag[tsel[1]],r,10*mw,44*o,44*o),r+=44*o,multiflex&&0!=trophy[1]&&(r+=10*mw,rd.drawImage(stroph[trophy[1]-1],r,10*mh,trwd[trophy[1]-1]*o,trhd[trophy[1]-1]*o),rd.fillStyle="#FFFFFF",r+=10*mw+trwd[trophy[1]-1]*o,rd.globalAlpha=.8,rd.fillText("x"+ntrophy[1],r,10*mh+29*o),rd.globalAlpha=1,r+=rd.measureText("x"+ntrophy[1]).width)),penmode)rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,r+=20*mw,5==bestof?rd.fillText("Best of five shots!",r,10*mh+29*o):rd.fillText("Best of one shot!",r,10*mh+29*o),rd.globalAlpha=1,e=" "+bescore[0]+" / "+bested[0]+"                                           "+bescore[1]+" / "+bested[1]+" ",rd.drawImage(teamflag[tsel[0]],.5*canw-.5*rd.measureText(e).width-20*mw-88*o,570*mh,88*o,88*o),rd.textAlign="center",rd.globalAlpha=.8,rd.fillText(e,.5*canw,600*mh+29*o),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[1]],.5*canw+.5*rd.measureText(e).width+20*mw,570*mh,88*o,88*o);else{var m=""+.012*time,d=m.indexOf("."),i="",p="";if(-1==d)i=m,parseInt(i)<10&&(i="0"+i),p="00";else{i=m.substring(0,d);parseInt(i)<10&&(i="0"+i),(p=Math.floor(parseInt(m.substring(d+1,d+3))/1.6667))<10&&(p="0"+p)}r+=20*mw,rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(r,10*mw-2*o,160*o,48*o,5*o),rd.globalAlpha=1,rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText(i+" : "+p,r+80*o-.5*rd.measureText("00 : 77").width,10*mh+29*o),rd.globalAlpha=1}n=0;if(declick(c=canw-77*o-10*mw,c+77*o,h=10*mh,h+54*o,1),1==wasonit&&(n=1,onagamebtn=!0),onaclk>7&&1==onwho&&(n=1,onagamebtn=!0),9==onaclk&&1==onwho&&(multiflex?multmenu=!multmenu:0==blknd&&getpausebg(),onwho=0,wasonit=0),rd.globalAlpha=.5,rd.drawImage(btn[0][n],c,h,77*o,54*o),rd.globalAlpha=1,xm>c&&xm<c+77*o&&ym>h&&ym<h+54*o&&(mdown||(onagamebtn=!0)),n=mutegame?1:0,declick(c=canw-58*o-10*mw,c+58*o,h=canh-42*o-20*mh,h+42*o,2),2==wasonit&&(n=mutegame?0:1,onagamebtn=!0),onaclk>7&&2==onwho&&(n=mutegame?0:1,onagamebtn=!0),9==onaclk&&2==onwho&&(mutegame?mutegame=!1:(mutegame=!0,mutemusic=!0),onwho=0,wasonit=0),rd.globalAlpha=.5,rd.drawImage(btn[1][n],c,h,58*o,42*o),rd.globalAlpha=1,xm>c&&xm<c+58*o&&ym>h&&ym<h+42*o&&(mdown||(onagamebtn=!0)),-1!=firstime&&60==++firstime&&getpausebg(),2==nt&&(10==out&&(outx<0||outx>1400)&&(oft==1-side&&outx>1400||oft==side&&outx<0)&&outz>260&&outz<660&&Math.sqrt(bvx*bvx+bvz*bvz)>5&&playsnd(15,1),10==goal&&playsnd(16,1),(out||goal||centara)&&(bontcnt=0,lastbont=bont),lastbont!=bont&&(0==bontcnt&&(bontblx=blx),10==++bontcnt&&(bontcnt=0,lastbont=bont,playsnd(12+exitedturn,1),nextexite())),side==bont?(blx>700+inbontvar&&-1!=blwith||blx>1100)&&lastinbont!=bont&&(playsnd(12+exitedturn,1),nextexite(),lastinbont=bont,inbontvar=Math.floor(500*Math.random())):(blx<700-inbontvar&&-1!=blwith||blx<300)&&lastinbont!=bont&&(playsnd(12+exitedturn,1),nextexite(),lastinbont=bont,inbontvar=Math.floor(500*Math.random())),10==out&&outx>0&&outx<1400&&outz>0&&outz<920&&(playsnd(12+exitedturn,1),nextexite())),out&&out<100&&(3==out&&(outx>0&&outx<1400&&outz>0&&outz<920?(playsnd(1,1),outyp="FOUL!",outdisc="Free Kick for "+team[tsel[oft]],outx>1200&&outx<1400&&outz>260&&outz<660&&oft==side&&(outdisc="Penalty Kick for "+team[tsel[oft]]),outx>0&&outx<200&&outz>260&&outz<660&&oft==1-side&&(outdisc="Penalty Kick for "+team[tsel[oft]])):(playsnd(0,1),outyp="BALL OUT",outdisc=outx<0||outx>1400?oft==1-side&&outx<0||oft==side&&outx>1400?"Corner Kick":"Goal Kick":"Throw-in")),out>10&&(rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.font="BALL OUT"==outyp?23*(mh+mw)+"px TekoSkills":27*(mh+mw)+"px TekoSkills",rd.fillText(outyp,.5*canw,90*mh+23*o),penmode||(rd.font=23*(mh+mw)+"px TekoSkills",rd.fillText(outdisc,.5*canw,150*mh+23*o)),rd.globalAlpha=1)),2==nt&&goal>20&&goal<189&&(rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText("GOAL!",.5*canw,90*mh+34*o),rd.globalAlpha=1),!(0==side&&time>=3750&&time<7650)||out&&107!=out||goal||centara||(out=107,3752==time&&(playsnd(2,1),-1!=blwith&&(shot[blwith]=0,blwith=-1)),rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",multiflex||(time>3940&&(t=!0,onagamebtn=!0),time>3950&&(time=3750,side=1,orgteam(),cntcoml=0,fase=17,getpausebg())),rd.globalAlpha=.8,rd.fillText("HALF TIME",.5*canw,90*mh+30*o),rd.globalAlpha=1,multiflex&&(time>3980&&(t=!0,onagamebtn=!0),time>4e3&&(time=3750,side=1,orgteam()))),!(time>=7500&&time<7651)||out&&107!=out||goal||centara||penmode||(out=107,7502==time&&(playsnd(3,1),-1!=blwith&&(shot[blwith]=0,blwith=-1)),rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText("FULL TIME",.5*canw,90*mh+30*o),rd.globalAlpha=1,7550==time&&(playsnd(12+exitedturn,1),nextexite()),time>7630&&(t=!0,onagamebtn=!0)),time>=7651&&time<=7760&&(out=107,rd.font=27*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText("PENALTY SHOOT-OUT",.5*canw,250*mh+27*o),rd.globalAlpha=1,7760==time&&(camzy=33,camxz=65,camdist=(camodist=500)*((mw+mh)/2),bescore[0]=0,bescore[1]=0,bestof=5,bested[0]=0,bested[1]=0,penturn[0]=9,penturn[1]=19,tosup=Math.random()>Math.random()?0:1,penmode=!0,afterpen=10)),multiflex){if(1==halt){for(rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText("WAITING FOR "+team[tsel[1-pnum]].toUpperCase(),.5*canw,170*mh),rd.font=20*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.6,rd.fillText("Waiting for "+team[tsel[1-pnum]]+"'s player to finish loading and connect...",.5*canw,canh-120*mh),rd.font=20*(mh+mw)+"px TekoSkills",rd.fillText("(Will wait "+Math.floor((3e3-cntimeout)/40)+" seconds)",.5*canw,canh-50*mh),rd.globalAlpha=1,camxz++;camxz>=360;)camxz-=360;for(;camxz<0;)camxz+=360;recodist?(camodist-=addod)<ranod&&(recodist=!1,addod=.5+1*Math.random(),ranod=1200-300*Math.random()):(camodist+=addod)>ranod&&(recodist=!0,addod=.5+1*Math.random(),ranod=600+300*Math.random()),camdist=camodist*((mw+mh)/2),wasonhalt=11,l=!0}else wasonhalt&&(t=!0,0==--wasonhalt&&(camxz=0,camdist=(camodist=740)*((mw+mh)/2)));if(2==halt){if(0==midhalt){recodist=!(Math.random()>Math.random());for(var s=0;s<8;s++)podl[s]=Math.floor(20*Math.random()),podc[s]=Math.floor(70*Math.random()),Math.random()>Math.random()?podu[s]=0:podu[s]=21*mh}if(midhalt<70){for(recodist?--camxz>180&&camxz<359&&(recodist=!1):++camxz<180&&camxz>1&&(recodist=!0);camxz>=360;)camxz-=360;for(;camxz<0;)camxz+=360}else if(0!=camxz){for(camxz<180&&camxz>0&&camxz--,camxz>180&&camxz<360&&camxz++;camxz>=360;)camxz-=360;for(;camxz<0;)camxz+=360}if(!multmenu){rd.globalAlpha=.5,rd.fillStyle="#000000",rd.fillRect(0,0,canw,canh),rd.globalAlpha=1,rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.5,rd.fillText("MULTIPLAYER BUFFERING",.5*canw,350*mh),rd.globalAlpha=1;var f=.5*canw-172.5*mw;for(s=0;s<8;s++)rd.globalAlpha=podl[s]/20,rd.fillStyle="rgb(0,"+(130+podc[s])+",255)",rd.fillRect(f,380*mh+podu[s],30*mw,14*mh),rd.globalAlpha=1,podl[s]--,0==podl[s]&&(podl[s]=20,podc[s]=Math.floor(70*Math.random()),Math.random()>Math.random()?podu[s]=0:podu[s]=21*mh),f+=45*mw}midhalt++}else midhalt&&(camxz=0,midhalt=0);if(multmenu){rd.globalAlpha=.6,rd.fillStyle="#003300",fillroundrect(.5*canw-600*o,.5*canh-100*o,1200*o,200*o,20*o),rd.globalAlpha=1,rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText("Cannot pause game during multiplayer, do you wish to quit match?",.5*canw-600*o+30*o,.5*canh-100*o+40*o);n=0;declick(c=.5*canw-150*o-50*o,c+150*o,h=.5*canh-100*o+100*o,h+66*o,4),4==wasonit&&(n=1),onaclk>7&&4==onwho&&(n=1),9==onaclk&&4==onwho&&(closroom(),1==pnum&&(tsel[0]=tsel[1]),fase=9,trans=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(n,c,h,150*o,66*o,"#09E5FF","#FF9001","#00B8CE","#FC7100",32,"YES",.14,.65,.05,.2,.05,.1);var c,h;n=0;declick(c=.5*canw+50*o,c+150*o,h=.5*canh-100*o+100*o,h+66*o,3),3==wasonit&&(n=1),onaclk>7&&3==onwho&&(n=1),9==onaclk&&3==onwho&&(multmenu=!1,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(n,c,h,150*o,66*o,"#09E5FF","#FF9001","#00B8CE","#FC7100",32,"NO",.14,.65,.05,.2,.05,.1),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),l=!0}}out>90&&out<100&&(t=!0),2==nt&&goal>190&&(t=!0),1==nt&&goal>90&&(t=!0),penmode&&afterpen<=10&&afterpen>0&&(t=!0),out&&107!=out||goal||centara||halt||time++,nodowning&&(mdown?out||(downch||(downch=!0),downed++):downch&&(downed>50&&(nodowning=!1),downch=!1,downed=0,ndowns++),ndowns>15&&(rd.font=24*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,isphone?rd.fillText("Press and keep holding finger down to control the player longer by dragging!",.5*canw,160*mh+24*o):rd.fillText("Press and keep holding mouse down to control the player longer by dragging!",.5*canw,160*mh+24*o),rd.globalAlpha=1))}t?(blknd+=.1)>1&&(blknd=1):0!=blknd&&(blknd-=.1)<0&&(blknd=0),0!=blknd&&(rd.globalAlpha=blknd,rd.fillStyle="#000000",rd.fillRect(0,0,canw,canh),rd.globalAlpha=1),l?ongameplaystart&&(gameplayStop(),ongameplaystart=!1):ongameplaystart||(gameplayStart(),ongameplaystart=!0)}var cntcoml=0;function drawhalftime(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(pausebg,0,0,canw,canh);var t=.5*(mw+mh);rd.font=20*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle";var l=team[tsel[0]]+"  "+score[0];2==nt&&(l+="  -  "+score[1]+"  "+team[tsel[1]]),rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(10*mw-2*t,10*mw-2*t,48*t,48*t,5*t),rd.globalAlpha=1,rd.fillStyle="#FFFFFF",rd.drawImage(steamflag[tsel[0]],10*mw,10*mw,44*t,44*t),rd.globalAlpha=.8,rd.fillText(l,20*mw+44*t,10*mh+27*t),rd.globalAlpha=1,2==nt&&(rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(30*mw+44*t+rd.measureText(l).width-2*t,10*mw-2*t,48*t,48*t,5*t),rd.globalAlpha=1,rd.drawImage(steamflag[tsel[1]],30*mw+44*t+rd.measureText(l).width,10*mw,44*t,44*t)),rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#ffffff",rd.fillText("Half Time Commercial Break",.5*canw,220*mh),30==cntcoml&&showHalftimeAd(),cntcoml>50&&(adpause||(fase=6)),cntcoml++,rd.drawImage(logo,canw-558*t-50*mw,560*mh-150*t,558*t,216*t)}function nextexite(){var t=exitedturn;0==t&&(exitedturn=Math.random()>Math.random()?1:2),1==t&&(exitedturn=Math.random()>Math.random()?0:2),2==t&&(exitedturn=Math.random()>Math.random()?1:0)}var mutemusic=!1;function musictog(){var t=.5*(mw+mh),l=0;mutemusic&&(l=1);var a=canw-58*t-10*mw,o=canh-42*t-20*mh;declick(a,a+58*t,o,o+42*t,11),11==wasonit&&(l=mutemusic?0:1),onaclk>7&&11==onwho&&(l=mutemusic?0:1),9==onaclk&&11==onwho&&(mutemusic?(mutemusic=!1,mutegame=!1):mutemusic=!0,onwho=0,wasonit=0),rd.globalAlpha=.7,rd.drawImage(btn[1][l],a,o,58*t,42*t),rd.globalAlpha=1}var pausebg=null;function getendbg(){multiflex?(0==woncup&&3==onlev&&(0==multexit||2==multexit)&&score[pnum]>score[1-pnum]&&(woncup=1),closroom(),halt=0):0==woncup&&2==nt&&3==cupmod&&2==ntmo&&score[0]>score[1]&&(woncup=1),pointcnt=0,rd.globalAlpha=.6,rd.globalCompositeOperation="lighter",rd.drawImage(bgimg[4],0,0,canw,canh),rd.globalCompositeOperation="source-over",rd.globalAlpha=1,(pausebg=new Image).src=canvasElement.toDataURL("image/png")}function getpausebg(){rd.globalAlpha=.8,rd.drawImage(bgimg[3],.55*canh,0,canw-.55*canh,canh),rd.drawImage(bgimg[2],0,0,.55*canh,canh),rd.globalAlpha=1,(pausebg=new Image).src=canvasElement.toDataURL("image/png"),17!=fase&&(60==firstime?(fase=8,firstime=-1):fase=7)}var woncup=0,pointcnt=0;function drawendgame(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(pausebg,0,0,canw,canh);var t=.5*(mw+mh);rd.font=27*(mh+mw)+"px TekoSkills",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.textAlign="center",rd.fillText(""+score[0],.5*canw-110*mw,15*mw+20*t+27*t),rd.drawImage(teamflag[tsel[0]],.5*canw-150*mw-132*t,15*mw,132*t,132*t),rd.textAlign="right",rd.fillText(team[tsel[0]],.5*canw-170*mw-132*t,15*mw+20*t+27*t),2==nt&&(rd.textAlign="center",rd.fillText(""+score[1],.5*canw+110*mw,15*mw+20*t+27*t),rd.drawImage(teamflag[tsel[1]],.5*canw+150*mw,15*mw,132*t,132*t),rd.textAlign="left",rd.fillText(team[tsel[1]],.5*canw+170*mw+132*t,15*mw+20*t+27*t)),rd.fillStyle="#000000",rd.textAlign="center",multiflex?(0==multexit&&(score[pnum]>score[1-pnum]&&(0==pointcnt&&(3!=onlev&&(subto=points,saveInfo("points",points+=winin[onlev])),onlev>0&&(wontro[onlev]++,saveInfo("wontro["+onlev+"]",wontro[onlev]))),rd.fillText("Congratulations, "+team[tsel[pnum]]+" wins!",.5*canw,267*mh+27*t),pointcnt<50&&(noflk>3&&(rd.fillStyle="#B5CA00"),++noflk>6&&(noflk=0)),3!=onlev?(rd.fillText("You got "+winin[onlev]+" points!",.5*canw,367*mh+27*t),pointcnt>50&&(51==pointcnt&&playsnd(19,1),rd.fillStyle="#000000",Math.abs(points-subto)>10?(subto+=Math.floor((points-subto)/10),noflk>3&&(rd.fillStyle="#72CA00"),++noflk>6&&(noflk=0)):subto=points,rd.fillText("Total points : "+subto,.5*canw,467*mh+27*t))):rd.fillText("You won the "+troname[3]+"!",.5*canw,367*mh+27*t),pointcnt++),score[pnum]<score[1-pnum]&&rd.fillText(team[tsel[pnum]]+" loses, better luck next time!",.5*canw,267*mh+27*t),score[pnum]==score[1-pnum]&&(0==pointcnt&&entry[onlev]>0&&saveInfo("points",points+=entry[onlev]),rd.fillText("Its a tie!",.5*canw,267*mh+27*t),entry[onlev]>0?rd.fillText("You get back the "+entry[onlev]+" entry points.",.5*canw,367*mh+27*t):rd.fillText("No points were earned.",.5*canw,367*mh+27*t),pointcnt++)),1==multexit&&(0==pointcnt&&entry[onlev]>0&&saveInfo("points",points+=entry[onlev]),rd.fillText(team[tsel[1-pnum]]+"'s player failed to connect to match...",.5*canw,267*mh+27*t),entry[onlev]>0&&rd.fillText("You get back the "+entry[onlev]+" entry points.",.5*canw,367*mh+27*t),pointcnt++),2==multexit&&(score[pnum]>score[1-pnum]?(0==pointcnt&&(3!=onlev&&(subto=points,saveInfo("points",points+=winin[onlev])),onlev>0&&(wontro[onlev]++,saveInfo("wontro["+onlev+"]",wontro[onlev]))),rd.fillText(team[tsel[1-pnum]]+"'s player has quit the match, so you win!",.5*canw,267*mh+27*t),pointcnt<50&&(noflk>3&&(rd.fillStyle="#B5CA00"),++noflk>6&&(noflk=0)),3!=onlev?(rd.fillText("You got "+winin[onlev]+" points!",.5*canw,367*mh+27*t),pointcnt>50&&(51==pointcnt&&playsnd(19,1),rd.fillStyle="#000000",Math.abs(points-subto)>10?(subto+=Math.floor((points-subto)/10),noflk>3&&(rd.fillStyle="#72CA00"),++noflk>6&&(noflk=0)):subto=points,rd.fillText("Total points : "+subto,.5*canw,467*mh+27*t))):rd.fillText("You won the "+troname[3]+"!",.5*canw,367*mh+27*t),pointcnt++):(0==pointcnt&&entry[onlev]>0&&saveInfo("points",points+=entry[onlev]),rd.fillText(team[tsel[1-pnum]]+"'s player has suddenly quit the match!",.5*canw,267*mh+27*t),entry[onlev]>0&&rd.fillText("You get back the "+entry[onlev]+" entry points.",.5*canw,367*mh+27*t),pointcnt++)),3==multexit&&(0==pointcnt&&entry[onlev]>0&&saveInfo("points",points+=entry[onlev]),rd.fillText("Ooops! Sorry you got disconnected from the match!",.5*canw,267*mh+27*t),entry[onlev]>0&&rd.fillText("You get back the "+entry[onlev]+" entry points.",.5*canw,367*mh+27*t),pointcnt++),score[pnum]>1&&saveInfo("firstime","-1")):(2==nt?score[0]>score[1]?rd.fillText("Congratulations, "+team[tsel[0]]+" wins!",.5*canw,267*mh+27*t):rd.fillText(team[tsel[0]]+" loses, better luck next time!",.5*canw,267*mh+27*t):rd.fillText("Practice game ended!",.5*canw,267*mh+27*t),score[0]>1&&saveInfo("firstime","-1"));var l=0,a=canw-290*t-30*mw,o=canh-82*t-30*mh;declick(a,a+290*t,o,o+82*t,1),1==wasonit&&(l=1),onaclk>7&&1==onwho&&(l=1),9==onaclk&&1==onwho&&(multiflex?(1==pnum&&(tsel[0]=tsel[1]),fase=11,trans=0,woncup&&(fase=3,cupmod=2)):2==nt&&score[0]>score[1]?(fase=3,cupmod=2):(fase=11,trans=0),onwho=0,wasonit=0,playsnd(17,1)),drawbutton(l,a,o,290*t,82*t,"#53DF00","#FFF300","#4FC300","#FBD400",37,"CONTINUE",.09,.63,.12,.03,.03,.08),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),woncup>0&&(400==woncup&&(fase=3,cupmod=2,multiflex&&1==pnum&&(tsel[0]=tsel[1])),woncup++),ongameplaystart&&(gameplayStop(),ongameplaystart=!1)}function drawpause(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(pausebg,0,0,canw,canh);var t=.5*(mw+mh);rd.font=20*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle";var l=team[tsel[0]]+"  "+score[0];2==nt&&(l+="  -  "+score[1]+"  "+team[tsel[1]]),rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(10*mw-2*t,10*mw-2*t,48*t,48*t,5*t),rd.globalAlpha=1,rd.fillStyle="#FFFFFF",rd.drawImage(steamflag[tsel[0]],10*mw,10*mw,44*t,44*t),rd.globalAlpha=.8,rd.fillText(l,20*mw+44*t,10*mh+27*t),rd.globalAlpha=1,2==nt&&(rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(30*mw+44*t+rd.measureText(l).width-2*t,10*mw-2*t,48*t,48*t,5*t),rd.globalAlpha=1,rd.drawImage(steamflag[tsel[1]],30*mw+44*t+rd.measureText(l).width,10*mw,44*t,44*t));var a=""+.012*time,o=a.substring(0,a.indexOf("."));parseInt(o)<10&&(o="0"+o);var n=Math.floor(parseInt(a.substring(a.indexOf(".")+1,a.indexOf(".")+3))/1.6667);n<10&&(n="0"+n);var e=40*mw+44*t+rd.measureText(l).width;2==nt&&(e=60*mw+88*t+rd.measureText(l).width),rd.fillStyle="#000000",rd.globalAlpha=.5,fillroundrect(e,10*mw-2*t,160*t,48*t,5*t),rd.globalAlpha=1,rd.fillStyle="#FFFFFF",rd.globalAlpha=.8,rd.fillText(o+" : "+n,e+80*t-.5*rd.measureText("00 : 77").width,10*mh+29*t),rd.globalAlpha=1,rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#ffffff",rd.fillText("GAME PAUSED",.5*(.5*canw-188*mw),120*mh);var r=0,m=.5*canw-188*t,d=80*mh;declick(m,m+376*t,d,d+67*t,1),1==wasonit&&(r=1),onaclk>7&&1==onwho&&(r=1),9==onaclk&&1==onwho&&(fase=6,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,376*t,67*t,"#53DF00","#FFF300","#4FC300","#FBD400",30,"RESUME GAME",.06,.64,.03,.12,.03,.06),r=0,declick(m,m+376*t,d=190*mh,d+67*t,2),2==wasonit&&(r=1),onaclk>7&&2==onwho&&(r=1),9==onaclk&&2==onwho&&(fase=6,recreached&&(onreplay=!0,rf=cf-1,switchrep=20),onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,376*t,67*t,"#53DF00","#FFF300","#4FC300","#FBD400",30,"INSTANT REPLAY",.06,.64,.03,.12,.03,.06),r=0,declick(m,m+376*t,d=300*mh,d+67*t,4),4==wasonit&&(r=1),onaclk>7&&4==onwho&&(r=1),9==onaclk&&4==onwho&&(fase=8,cntflex=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,376*t,67*t,"#53DF00","#FFF300","#4FC300","#FBD400",30,"GAME CONTROLS",.06,.64,.03,.12,.03,.06),r=0,declick(m,m+376*t,d=410*mh,d+67*t,3),3==wasonit&&(r=1),onaclk>7&&3==onwho&&(r=1),9==onaclk&&3==onwho&&(fase=9,trans=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,376*t,67*t,"#53DF00","#FFF300","#4FC300","#FBD400",30,"EXIT MATCH",.06,.64,.03,.12,.03,.06),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),rd.drawImage(logo,canw-558*t-50*mw,560*mh-150*t,558*t,216*t),ongameplaystart&&(gameplayStop(),ongameplaystart=!1)}var cntflex=0;function drawcontrols(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(pausebg,0,0,canw,canh);var t=.5*(mw+mh);rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#ffffff",rd.fillText("Game Controls",.5*canw,30*mh+30*t),rd.drawImage(insti,canw-858*t-20*mw,90*mh,858*t,402*t),rd.font=24*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#ffffff",isphone?(rd.fillText("Press and hold thumb down to drag to direct your player...",canw-268*t-20*mw,90*mh+100*t),rd.fillText("...then release thumb to shoot!",canw-187*t-20*mw,90*mh+317*t)):(rd.fillText("Click and hold mouse down to drag to direct your player...",canw-268*t-20*mw,90*mh+100*t),rd.fillText("...then release mouse to shoot!",canw-187*t-20*mw,90*mh+317*t));var l=0,a=.5*canw-188*t,o=580*mh,n=a,e=a+376*t,r=o,m=o+67*t;cntflex>150&&(n=0,e=canw,r=0,m=canh),cntflex++,declick(n,e,r,m,1),1==wasonit&&(l=1),onaclk>7&&1==onwho&&(l=1),9==onaclk&&1==onwho&&(fase=6,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(l,a,o,376*t,67*t,"#53DF00","#FFF300","#4FC300","#FBD400",30,"RESUME GAME",.11,.64,.03,.12,.03,.06)}var trans=0;function transout(){rd.globalAlpha=.12,rd.fillStyle="#FFFFFF",rd.fillRect(0,0,canw,canh),rd.globalAlpha=1,15==++trans&&(fase=1)}function transin(){rd.globalAlpha=.12,rd.fillStyle="#000000",rd.fillRect(0,0,canw,canh),rd.globalAlpha=1,20==++trans&&(fase=1)}var efap=0,efx=0,efy=0,efon=0,alflex=0;function drawface(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[0],0,0,canw,canh);var t=.5*(mw+mh);efap<=0&&(efap=Math.floor(15*Math.random()),efx=(10*Math.random()-5)*t,efy=(10*Math.random()-5)*t,efon=0==efon?1:0),--efap<5&&(rd.globalAlpha=.6,rd.drawImage(eflog[efon],114*mw+efx,20*mh+150*t+efy,698*t,71*t),rd.globalAlpha=1),rd.drawImage(logo,110*mw,20*mh,698*t,270*t),rd.font=50*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText(frontname,.5*canw,460*mh),rd.drawImage(barimg,.5*canw-197*t,460*mh+30*t,394*t,35*t),rd.drawImage(cupimg,850*mw,310*mh,106*t,268*t);var l=0,a=517*mw,o=600*mh,n=280*t,e=80*t;declick(a,a+n,o,o+e,1),1==wasonit&&(l=1),onaclk>7&&1==onwho&&(l=1),9==onaclk&&1==onwho&&(fase=2,alflex=1,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(l,a,o,n,e,"#FAD400","#B1FA00","#C89700","#A6CA00",47,"PLAY",.16,.67,.05,.2,.05,.1),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),ongameplaystart&&(gameplayStop(),ongameplaystart=!1),musictog()}var tsel=[0,0],inthemulti=0,sayit=0;function selecteam(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[5],0,0,canw,canh),0!=alflex&&(rd.globalAlpha=alflex,rd.drawImage(bgimg[0],0,0,canw,canh),rd.globalAlpha=1,(alflex-=.05)<0&&(alflex=0));var t=.5*(mw+mh);rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText("CHOOSE YOUR TEAM",120*mw,120*mh);var l=rd.measureText(team[tsel[0]]).width,a=.5*canw-.5*(l+176*t+10*t);rd.fillText(team[tsel[0]],a,305*mh),a+=l+10*t,rd.drawImage(teamflag[tsel[0]],a,345*mh-176*t,176*t,176*t),rd.fillStyle="#000000",rd.fillRect(.5*canw-252*t,365*mh-2*t,504*t,49*t);var o=teamtats[tsel[0]];inthemulti&&(o=100),inthemulti>90&&noflk>3&&(o=0);for(var n=0;n<o;n++){rd.fillStyle="rgb(255,"+Math.round(155+1*n)+",0)";var e=7;99==n&&(e=5),rd.fillRect(.5*canw-250*t+5*n*t,365*mh,e*t,45*t)}var r=0,m=.5*canw-252*t-70*mh-215*t,d=365*mh+22.5*t-35*t;declick(m,m+215*t,d,d+70*t,1),1==wasonit&&(r=1),onaclk>7&&1==onwho&&(r=1),9==onaclk&&1==onwho&&(tsel[0]--,tsel[0]<0&&(tsel[0]=ntm-1),playsnd(18,1)),drawbutton(r,m,d,215*t,70*t,"#FF7F01","#DEEC00","#FE5A00","#ADC400",31,"< PREV",.25,.62,.05,.05,.23,.1),r=0,declick(m=.5*canw+252*t+70*mh,m+215*t,d=365*mh+22.5*t-35*t,d+70*t,2),2==wasonit&&(r=1),onaclk>7&&2==onwho&&(r=1),9==onaclk&&2==onwho&&(tsel[0]++,tsel[0]>=ntm&&(tsel[0]=0),playsnd(18,1)),drawbutton(r,m,d,215*t,70*t,"#FF7F01","#DEEC00","#FE5A00","#ADC400",31,"NEXT >",.1,.62,.1,.23,.05,.05),inthemulti?(rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",(inthemulti<70||noflk>3)&&rd.fillText("In the multiplayer all teams are equal!",.5*canw,580*mh),++noflk>6&&(noflk=0)):(r=0,declick(m=.2*canw-138*t,m+276*t,d=630*mh-73*t,d+73*t,3),3==wasonit&&(r=1),onaclk>7&&3==onwho&&(r=1),9==onaclk&&3==onwho&&(nt=1,loadteam[0]=1,ont=0,fase=5,multiflex=!1,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,276*t,73*t,"#53DF00","#FFF300","#4FC300","#FBD400",33,"PRACTICE",.1,.64,.15,.05,.05,.1),r=0,declick(m=.5*canw-188.5*t,m+377*t,d=630*mh-82*t,d+82*t,4),4==wasonit&&(r=1),onaclk>7&&4==onwho&&(r=1),9==onaclk&&4==onwho&&(cupmod=0,fase=3,multiflex=!1,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,377*t,82*t,"#53DF00","#FFF300","#4FC300","#FBD400",41,"PLAY CUP",.14,.65,.03,.17,.03,.08),r=0,declick(m=.825*canw-180*t,m+360*t,d=630*mh-77*t,d+77*t,5),5==wasonit&&(r=1),onaclk>7&&5==onwho&&(r=1),9==onaclk&&5==onwho&&(404!=multoff?sayit<2?(inthemulti=100,sayit++):fase=15:(cntimeout=0,fase=16),onwho=0,wasonit=0,playsnd(17,1)),drawbutton(r,m,d,360*t,77*t,"#53DF00","#FFF300","#4FC300","#FBD400",35,"MULTIPLAYER",.11,.64,.05,.1,.15,.05),1==multoff&&(++noflk>20&&(noflk=0),rd.fillStyle="rgb("+(255-5*noflk)+",90,0)",rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillText("NEW",m+20*t,d))),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),inthemulti&&0==--inthemulti&&(fase=15),musictog()}var ntmo=0,cupmod=0,teamtos=[],confr=0,confl=-1,confg=0,confc=0;function drawcup(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[1],0,0,canw,canh);var t=.5*(mw+mh);if(0==cupmod){for(var l=0;l<ntm;l++)teamtos[l]=-1;for(l=0;l<ntm;l++){for((p=Math.floor(Math.random()*ntm))==ntm&&p--;-1!=teamtos[p];)++p==ntm&&(p=0);teamtos[p]=l}ntmo=ntm;for(l=0;l<ntmo;l++)tsel[0]==teamtos[l]&&(tsel[1]=l%2==0?teamtos[l+1]:teamtos[l-1]);cupmod=1,efap=0}if(2==cupmod&&(2==ntmo||multiflex)&&woncup&&(efap=0,confc=0,confg=0,confr=0,cupmod=4),2==cupmod){if(24==ntmo){var a=[0,0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0];for(l=0;l<24;l+=2){var e=Math.abs(teamtats[teamtos[l]]-teamtats[teamtos[l+1]]);teamtos[l]!=tsel[0]&&teamtos[l+1]!=tsel[0]||(e=100);for(var r=a[0],m=0,d=1;d<8;d++)a[d]<r&&(r=a[d],m=d);e>a[m]&&(o[m]=teamtos[l],n[m]=teamtos[l+1],a[m]=e)}var i=[0,0,0,0,0,0,0,0];for(d=0;d<8;d++)o[d]!=tsel[0]&&n[d]!=tsel[0]?teamtats[o[d]]<teamtats[n[d]]?i[d]=o[d]:i[d]=n[d]:o[d]==tsel[0]?i[d]=n[d]:i[d]=o[d];for(l=0;l<16;l++)teamtos[l]=-1;for(l=0;l<ntm;l++)if(l!=i[0]&&l!=i[1]&&l!=i[2]&&l!=i[3]&&l!=i[4]&&l!=i[5]&&l!=i[6]&&l!=i[7]){var p;for(16==(p=Math.floor(16*Math.random()))&&p--;-1!=teamtos[p];)16==++p&&(p=0);teamtos[p]=l}ntmo=16}else{var s=[],f=0;for(l=0;l<ntmo;l+=2){for(var c=!1;!c;)teamtats[teamtos[l]]+20-40*Math.random()>teamtats[teamtos[l+1]]+20-40*Math.random()?teamtats[teamtos[l]]+20-40*Math.random()>teamtats[teamtos[l+1]]+20-40*Math.random()&&(s[f]=teamtos[l],c=!0):teamtats[teamtos[l]]+20-40*Math.random()<teamtats[teamtos[l+1]]+20-40*Math.random()&&(s[f]=teamtos[l+1],c=!0);teamtos[l]==tsel[0]&&(s[f]=teamtos[l]),teamtos[l+1]==tsel[0]&&(s[f]=teamtos[l+1]),f++}ntmo=f;for(l=0;l<ntmo;l++)teamtos[l]=s[l]}for(l=0;l<ntmo;l++)tsel[0]==teamtos[l]&&(tsel[1]=l%2==0?teamtos[l+1]:teamtos[l-1]);cupmod=3,efap=0}if(4!=cupmod){rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(dispname,.5*canw,60*mh);var h=0,x=0,u=0,b=0,g=0,w=0;32==ntmo&&(h=10,x=40,u=4,b=18,g=300),24==ntmo&&(h=16,x=50,u=8,b=19,g=317),16==ntmo&&(h=50,x=60,u=20,b=21,g=350,w=.44),8==ntmo&&(h=175,x=70,u=30,b=24,g=400,w=.55),4==ntmo&&(h=255,x=80,u=50,b=27,g=450,w=.7),2==ntmo&&(h=300,x=90,u=0,b=30,g=530,w=1);var z=!1;for(l=0;l<ntmo/2;l++){var y=(h+(x+u)*l)*mh;rd.fillStyle="#000000",tsel[0]==teamtos[l]&&(++efap>=8&&(rd.fillStyle="#333333"),12==efap&&(efap=0)),rd.globalAlpha=.6,rd.fillRect(10*mw+x*mh*.5,y,g*t,x*mh),rd.fillStyle="#000000",2==ntmo&&(rd.globalAlpha=.3),rd.fillRect(10*mw+x*mh*.5+g*t,y+x*mh*.44,x*mw*.3,x*mh*.12),2!=ntmo&&(z?z=!1:(rd.fillRect(10*mw+x*mh*.5+g*t+x*mw*.3,y+x*mh*.44,x*mw*.12,(h+(x+u)*(l+1))*mh-y+x*mh*.12),z=!0)),rd.globalAlpha=1,ntmo<=16?rd.drawImage(teamflag[teamtos[l]],10*mw,y-x*w*mh*.5,x*(1+w)*mh,x*(1+w)*mh):rd.drawImage(steamflag[teamtos[l]],10*mw,y-x*w*mh*.5,x*(1+w)*mh,x*(1+w)*mh),rd.font=b*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[teamtos[l]],20*mw+x*(1+w)*mh,y+x*mh*.6)}z=!1;for(l=ntmo/2;l<ntmo;l++){y=(h+(x+u)*(l-ntmo/2))*mh;rd.fillStyle="#000000",tsel[0]==teamtos[l]&&(++efap>=8&&(rd.fillStyle="#333333"),12==efap&&(efap=0)),rd.globalAlpha=.6,rd.fillRect(canw-10*mw-x*mh*.5-g*t,y,g*t,x*mh),rd.fillStyle="#000000",rd.fillStyle="#000000",2==ntmo&&(rd.globalAlpha=.3),rd.fillRect(canw-10*mw-x*mh*.5-g*t-x*mw*.3,y+x*mh*.44,x*mw*.3,x*mh*.12),2!=ntmo&&(z?z=!1:(rd.fillRect(canw-10*mw-x*mh*.5-g*t-x*mw*.3-x*mw*.12,y+x*mh*.44,x*mw*.12,(h+(x+u)*(l-ntmo/2+1))*mh-y+x*mh*.12),z=!0)),rd.globalAlpha=1,ntmo<=16?rd.drawImage(teamflag[teamtos[l]],canw-10*mw-x*(1+w)*mh,y-x*w*mh*.5,x*(1+w)*mh,x*(1+w)*mh):rd.drawImage(steamflag[teamtos[l]],canw-10*mw-x*(1+w)*mh,y-x*w*mh*.5,x*(1+w)*mh,x*(1+w)*mh),rd.font=b*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[teamtos[l]],canw-20*mw-x*(1+w)*mh,y+x*mh*.6)}rd.drawImage(starimg[0],.5*canw-30*t,180*mh-85*t,60*t,58*t),rd.drawImage(starimg[1],.5*canw-30*t+57*t,180*mh-85*t+20*t,60*t,58*t),rd.drawImage(starimg[1],.5*canw-30*t-57*t,180*mh-85*t+20*t,60*t,58*t),rd.drawImage(cupimg,.5*canw-53*t,170*mh,106*t,268*t),ntmo<=8&&(rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000"),8==ntmo&&rd.fillText("Quarter Finals",.5*canw,540*mh),4==ntmo&&rd.fillText("Semi Finals",.5*canw,540*mh),2==ntmo&&(efap>=8&&(Math.random()>Math.random()?rd.fillStyle="#FFD161":rd.fillStyle="#61F2FF"),rd.fillText("FINAL!",.5*canw,540*mh));var v=0;declick(F=.5*canw-191*t,F+382*t,I=canh-82*t-30*mh,I+82*t,1),1==wasonit&&(v=1),onaclk>7&&1==onwho&&(v=1),9==onaclk&&1==onwho&&(nt=2,loadteam[0]=1,loadteam[1]=1,ont=0,fase=5,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(v,F,I,382*t,82*t,"#0065C4","#00CCE4","#00488C","#008FA0",37,"START MATCH",.09,.63,.08,.03,.03,.08),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),ntmo==ntm&&(v=0,declick(F=260*mw,F+160*t,I=canh-74*t-30*mh,I+66*t,3),3==wasonit&&(v=1),onaclk>7&&3==onwho&&(v=1),9==onaclk&&3==onwho&&(fase=2,alflex=1,notno=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(v,F,I,160*t,66*t,"#0065C4","#00CCE4","#00488C","#008FA0",25,"<  BACK",.1,.63,.07,.07,.14,.07))}else{rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",++efap>=5&&(rd.fillStyle="#51BDFB"),efap>=7&&(efap=0),multiflex?rd.fillText("You won the "+troname[onlev]+"!",.5*canw,60*mh):rd.fillText("You won the "+dispname+"!",.5*canw,60*mh),rd.fillStyle="#FFFFFF",rd.fillText("Congratulations!",.5*canw,140*mh);x=90,g=600,y=270*mh;rd.fillStyle="#000000",rd.globalAlpha=.6,rd.fillRect(310*mw+x*mh*.5,y,g*t,x*mh),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[0]],310*mw+x*mh*.5-88*t,y-x*mh*.5,x*mh*2,x*mh*2),rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[tsel[0]],330*mw+x*mh*2,y+x*mh*.6),multiflex?rd.drawImage(troph[onlev],310*mw+x*mh*.5+(g-78)*t,170*mh,tiwd[onlev]*t,tihd[onlev]*t):rd.drawImage(cupimg,310*mw+x*mh*.5+(g-53)*t,170*mh,106*t,268*t),rd.drawImage(starimg[0],560*mw-30*t,170*mh,60*t,58*t),rd.drawImage(starimg[1],560*mw-30*t+57*t,170*mh+20*t,60*t,58*t),rd.drawImage(starimg[1],560*mw-30*t-57*t,170*mh+20*t,60*t,58*t),rd.drawImage(starimg[2],680*mw-30*t,370*mh+20*t,60*t,58*t),rd.drawImage(starimg[1],680*mw-30*t+57*t,370*mh,60*t,58*t),rd.drawImage(starimg[1],680*mw-30*t-57*t,370*mh,60*t,58*t);var k=0;if(multiflex){var M=wontro[onlev]+"th";wontro[onlev]<=1&&(M="first"),2==wontro[onlev]&&(M="second"),3==wontro[onlev]&&(M="third"),rd.fillStyle="#000000",rd.fillText("You did it for the "+M+" time!",10*mw,canh-82*t-50*mh),rd.fillText("What a great accomplishment!!",10*mw,canh-82*t+20*mh),k=rd.measureText("What a great accomplishment!! ").width}else teamtats[tsel[0]]>=67?(rd.fillStyle="#000000",rd.fillText("You can always try winning the cup with a weaker team!",10*mw,canh-82*t-50*mh),rd.fillText("Challenge yourself see if you can make it!",10*mw,canh-82*t+20*mh),k=rd.measureText("Challenge yourself see if you can make it!").width):(rd.fillStyle="#000000",rd.fillText("And you did it with a weaker than average team!",10*mw,canh-82*t-50*mh),rd.fillText("Amazing accomplishment!!",10*mw,canh-82*t+20*mh),k=rd.measureText("Amazing accomplishment!!").width);var F,I;v=0;declick(F=k+40*mw,F+290*t,I=canh-82*t-20*mh,I+82*t,1),1==wasonit&&(v=1),onaclk>7&&1==onwho&&(v=1),9==onaclk&&1==onwho&&(woncup=0,fase=9,trans=0,multiflex=!1,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(v,F,I,290*t,82*t,"#0065C4","#00CCE4","#00488C","#008FA0",37,"CONTINUE",.09,.63,.12,.03,.03,.08),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),confc<10&&(0==confg?Math.floor(confr)<=28?(rd.drawImage(confe[Math.floor(confr)],170*confl*mw,0,1280*mw,720*mh),confr+=.33):(confg=30,confr=0,confl=1==confl?-1:1,confc++):confg--)}}var maptimecomp=!1,maptime=0;function mapreboot(){maptimecomp=!1;var t=new Date;maptime=t.getTime()}function drawloading(t){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh);var l=!1,a=0,o=0;multiflex&&-1!=firstime&&(l=!0,a=-350,o=100);var n=.5*(mw+mh);if((new Date).getTime()>maptime+2e3||l)maptimecomp=!0,l?rd.drawImage(bgimg[3],0,0,canw,canh):(rd.drawImage(bgimg[3],.55*canh,0,canw-.55*canh,canh),rd.drawImage(bgimg[2],0,0,.56944*canh,canh)),rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#ffffff",l?(rd.globalAlpha=.5,rd.fillText("Loading : "+team[tsel[t]]+", please wait...",50*mw,640*mh),rd.globalAlpha=1):rd.fillText("Loading : "+team[tsel[t]],300*mw,120*mh),rd.globalAlpha=.5,l?rd.fillText(loaded+"%",220*mw+100*n,540*mh):rd.fillText(loaded+"%",580*mw+100*n,350*mh),rd.globalAlpha=1,rd.lineWidth=20*n,rd.strokeStyle="#245800",rd.beginPath(),rd.arc((580+a)*mw-60*n,(380+o)*mh-60*n,120*n,0,.02*loaded*Math.PI),rd.stroke(),rd.drawImage(teamflag[tsel[t]],(580+a)*mw-88*n-60*n,(380+o)*mh-88*n-60*n,176*n,176*n),l?(rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#ffffff",rd.fillText("Game Controls",.5*canw,30*mh+30*n),rd.drawImage(insti,canw-858*n-20*mw,90*mh,858*n,402*n),rd.font=24*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#ffffff",isphone?(rd.fillText("Press and hold thumb down to drag to direct your player...",canw-268*n-20*mw,90*mh+100*n),rd.fillText("...then release thumb to shoot!",canw-187*n-20*mw,90*mh+317*n)):(rd.fillText("Click and hold mouse down to drag to direct your player...",canw-268*n-20*mw,90*mh+100*n),rd.fillText("...then release mouse to shoot!",canw-187*n-20*mw,90*mh+317*n))):rd.drawImage(logo,canw-558*n-50*mw,560*mh-150*n,558*n,216*n);else{if(rd.drawImage(worldmap,0,0,canw,canh),1==t){rd.strokeStyle="#347400",rd.lineWidth=4*n,rd.beginPath();var e=[mapos[tsel[0]][0]*mw,0,mapos[tsel[1]][0]*mw],r=[mapos[tsel[0]][1]*mh,0,mapos[tsel[1]][1]*mh];rd.moveTo(e[0],r[0]);var m=1;r[0]>r[1]?e[0]>e[2]&&(m=-1):e[0]<e[2]&&(m=-1),e[1]=(e[0]+e[2])/2-m*(r[0]-r[2])*.5,r[1]=(r[0]+r[2])/2-.5*Math.abs(e[0]-e[2]),rd.quadraticCurveTo(e[1],r[1],e[2],r[2]),rd.stroke()}rd.font=19*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",rd.drawImage(steamflag[tsel[0]],mapos[tsel[0]][0]*mw-22*n,mapos[tsel[0]][1]*mh-22*n,44*n,44*n),0==t&&(rd.fillStyle="#ffffff",rd.globalAlpha=.76,fillroundrect(mapos[tsel[0]][0]*mw-.5*rd.measureText(team[tsel[0]]).width-10*n,mapos[tsel[0]][1]*mh+27*n,rd.measureText(team[tsel[0]]).width+20*n,45*n,10*n),rd.globalAlpha=1,rd.fillStyle="#000000",rd.fillText(team[tsel[0]],mapos[tsel[0]][0]*mw,mapos[tsel[0]][1]*mh+52*n)),1==t&&(rd.drawImage(steamflag[tsel[1]],mapos[tsel[1]][0]*mw-22*n,mapos[tsel[1]][1]*mh-22*n,44*n,44*n),rd.fillStyle="#ffffff",rd.globalAlpha=.76,fillroundrect(mapos[tsel[1]][0]*mw-.5*rd.measureText(team[tsel[1]]).width-10*n,mapos[tsel[1]][1]*mh+27*n,rd.measureText(team[tsel[1]]).width+20*n,45*n,10*n),rd.globalAlpha=1,rd.fillStyle="#000000",rd.fillText(team[tsel[1]],mapos[tsel[1]][0]*mw,mapos[tsel[1]][1]*mh+52*n))}}var wasonit=0,onaclk=0,onwho=0;function declick(t,l,a,o,n){var e=!1;xm>t&&xm<l&&ym>a&&ym<o?(mdown?wasonit=n:wasonit==n&&(e=!0,wasonit=0),mclick&&(e=!0,wasonit=0)):wasonit==n&&(wasonit=0),e&&!onaclk&&(onaclk=10,onwho=n)}var mclick=!1;function canvasclick(){mclick=!0,window.innerWidth==screen.width&&window.innerHeight==screen.height||isphone&&(document.body.requestFullScreen?document.body.requestFullScreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen()),clickmade?(11==lopload[0]?6==fase&&2==nt&&(lopload[0]=1,playlop(0)):11==lopload[2]?6==fase&&playlop(2):11==lopload[3]&&6==fase&&2==nt&&2==ntmo&&playlop(3),11==lopload[1]&&0!=fase&&6!=fase&&7!=fase&&8!=fase&&(lopload[1]=1,playlop(1))):(isios&&playsnd(17,1),clickmade=!0)}var flum=1,flin=1,flmg=!1,flng=!1;function drawbutton(t,l,a,o,n,e,r,m,d,i,p,s,f,c,h,x,u){var b=.5*(mw+mh),g=rd.createLinearGradient(l,a,l+o*flum,a+n*flin);t&&"PLAY"==p?(g.addColorStop(0,e),g.addColorStop(1,r)):(g.addColorStop(0,m),g.addColorStop(1,d)),rd.fillStyle=g,drawpolybaton(l+9*b,a+9*b,o,n,c,h,x,u),rd.fill(),t||((g=rd.createLinearGradient(l,a,l+o*flum,a+n*flin)).addColorStop(0,"#502F00"),g.addColorStop(1,"#4D5000"),rd.lineWidth=4*b,rd.strokeStyle=g,drawpolybaton(l+9*b,a+9*b,o,n,c,h,x,u),rd.stroke(),(g=rd.createLinearGradient(l,a,l+o*flum,a+n*flin)).addColorStop(0,e),g.addColorStop(1,r),rd.fillStyle=g,drawpolybaton(l,a,o,n,c,h,x,u),rd.fill()),rd.font=i*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText(p,l+o*s+9*b*t,a+n*f+9*b*t),"+ POINTS"!=p&&p!="+"+reward+" POINTS"||rd.drawImage(rewads,l+o*s+9*b*t+rd.measureText(p).width+15*b,a+n*f+9*b*t-36*b,87*b,56*b)}function drawpolybaton(t,l,a,o,n,e,r,m){rd.beginPath(),rd.moveTo(t+a*n,l),rd.lineTo(t+a-a*n,l),rd.quadraticCurveTo(t+a,l,t+a,l+a*n),rd.lineTo(t+a,l+o-a*e),rd.quadraticCurveTo(t+a,l+o,t+a-a*e,l+o),rd.lineTo(t+a*r,l+o),rd.quadraticCurveTo(t,l+o,t,l+o-a*r),rd.lineTo(t,l+a*m),rd.quadraticCurveTo(t,l,t+a*m,l),rd.fill()}function fillroundrect(t,l,a,o,n){rd.beginPath(),rd.moveTo(t+n,l),rd.lineTo(t+a-n,l),rd.quadraticCurveTo(t+a,l,t+a,l+n),rd.lineTo(t+a,l+o-n),rd.quadraticCurveTo(t+a,l+o,t+a-n,l+o),rd.lineTo(t+n,l+o),rd.quadraticCurveTo(t,l+o,t,l+o-n),rd.lineTo(t,l+n),rd.quadraticCurveTo(t,l,t+n,l),rd.fill()}var ws=null,roomserver="",roomport=0,roomkey=17771,conon=0,badcon=0,sndframe=0,sendingpack="",bframe=[],bfonmove=[],bfxgo=[],bfzgo=[],cntbuf=0,onframe=0,skipone=!1,nalpha=0,aframe=[],alphaframe=[],ccf=-1,ccframe="",cctime=[],ncct=0;function inishmult(){sndframe=0,sendingpack="";for(var t=0;t<200;t++)bframe[t]=-1;cntbuf=0,onframe=0,skipone=!1,nalpha=0,ccf=-1,ccframe="",ncct=0,cntcantake=0,shotmade=0,cntdom=0,cntcantake=0,mikedrop=0,wasonmove=!1,wasonshot=!1,vseed=0,hseed=100,kseed=60,sseed=80,fseed=20,wasonhalt=0,cntimeout=0,halt=1,firstime=-1}function contoroom(){conon=1,"WebSocket"in window&&((ws=new WebSocket("wss://"+roomserver+":"+roomport+"/")).onopen=function(){ws.send("0|"+pnum+"|"+roomkey+"|")},ws.onmessage=function(t){recdata(""+t.data)},ws.onclose=function(){conon=0})}function closroom(){if(conon){conon=0;try{ws.send("1|"),ws.close()}catch(t){}}}function sendpack(){var t="76|0|"+pnum+"|"+roomkey+"|"+ccf+"|";mycontrols&&(t="76|1|"+pnum+"|"+roomkey+"|"+sendingpack),2==conon&&ws.send(""+t)}function recdata(t){if(2==conon){if(1==halt&&-11!=getIntValue(t,0)&&(halt=mycontrols?0:2),0==halt||2==halt)if(-1==t.indexOf("badcon")){if(mycontrols)2!=halt||mikedrop||(halt=0),mikedrop&&mikedrop==getIntValue(t,0)&&(mikedrop=0,mycontrols=!1);else if(""!=t){var l=getIntValue(t,0);if(-777!=l)if(-761!=l){cnf=1;for(var a=0;a<l;a++){for(var o=-1,n=0;n<200;n++)if(-1==o&&-1==bframe[n]){o=n;break}-1==o&&(o=99),bframe[o]=getIntValue(t,cnf),cnf++,bfonmove[o]=getIntValue(t,cnf),cnf++,bfxgo[o]=getIntValue(t,cnf),cnf++,bfzgo[o]=getIntValue(t,cnf),cnf++}if(2==halt){cntbuf=0;for(n=0;n<200;n++)bframe[n]>=onframe&&cntbuf++;cntbuf>=40&&(halt=0)}}else{for(o=-1,n=0;n<nalpha;n++)if(-1==o&&-1==aframe[n]){o=n;break}-1==o&&(o=nalpha,nalpha++),aframe[o]=getIntValue(t,1),alphaframe[o]=t}else if(getIntValue(t,1)!=pnum){var e=!1,r=getIntValue(t,3)+getIntValue(t,126);for(n=0;n<ncct;n++)cctime[n]==r&&(e=!0);e||(ccf=getIntValue(t,2),ccframe=t,cctime[ncct]=r,ncct++,2==halt&&(halt=0))}}}else time<7470&&!badcon&&(badcon=pnum==getIntValue(t,1)?1:2)}else 1==conon&&(tosup=getIntValue(t,0),conon=2)}function readalpha(t){(time<3750||1==side)&&time<7500&&(time=getIntValue(alphaframe[t],2)),blwith=getIntValue(alphaframe[t],3),out=getIntValue(alphaframe[t],4),onp[0]=getIntValue(alphaframe[t],5),onp[1]=getIntValue(alphaframe[t],6),lai=getIntValue(alphaframe[t],7);var l=getIntValue(alphaframe[t],8),a=getIntValue(alphaframe[t],9),o=10;if(2!=out&&l<=0&&2!=a){for(var n=0;n<20;n++)plx[n]=getIntValue(alphaframe[t],o),o++,plz[n]=getIntValue(alphaframe[t],o),o++,dir[n]=getIntValue(alphaframe[t],o),o++,vectsx[n]=getIntValue(alphaframe[t],o)/1e3,o++,vectsz[n]=getIntValue(alphaframe[t],o)/1e3,o++;onslide=getIntValue(alphaframe[t],o),o++}if(2==out&&(oft=getIntValue(alphaframe[t],o),o++,outx=getIntValue(alphaframe[t],o),o++,outz=getIntValue(alphaframe[t],o),o++),l>0){sseed=getIntValue(alphaframe[t],o),o++;var e=getIntValue(alphaframe[t],o);o++,flyball=1==e,fromhead=getIntValue(alphaframe[t],o)/100,o++,blx=getIntValue(alphaframe[t],o),o++,blz=getIntValue(alphaframe[t],o),o++,bly=getIntValue(alphaframe[t],o),o++,bvx=getIntValue(alphaframe[t],o)/100,o++,bvy=getIntValue(alphaframe[t],o)/100,o++,bvz=getIntValue(alphaframe[t],o)/100,o++,bnvx=getIntValue(alphaframe[t],o)/1e4,o++,bnvz=getIntValue(alphaframe[t],o)/1e4,o++,penkick&&(cumborg=getIntValue(alphaframe[t],o)/1e4,o++)}if(3==l)for(n=0;n<20;n++)plx[n]=getIntValue(alphaframe[t],o),o++,plz[n]=getIntValue(alphaframe[t],o),o++,dir[n]=getIntValue(alphaframe[t],o),o++;if(2==l)for(n=0;n<2;n++)bli[n]=getIntValue(alphaframe[t],o),o++,blrunstat[n]=getIntValue(alphaframe[t],o),o++,blrunpy[n]=getIntValue(alphaframe[t],o),o++,rux[n]=getIntValue(alphaframe[t],o),o++,ruz[n]=getIntValue(alphaframe[t],o),o++;2==a&&(out=0,goal=2,score[0]=getIntValue(alphaframe[t],o),o++,score[1]=getIntValue(alphaframe[t],o),o++,glt=getIntValue(alphaframe[t],o),o++,blx=getIntValue(alphaframe[t],o),o++,blz=getIntValue(alphaframe[t],o),o++,bly=getIntValue(alphaframe[t],o),o++,bvx=getIntValue(alphaframe[t],o)/100,o++,bvy=getIntValue(alphaframe[t],o)/100,o++,bvz=getIntValue(alphaframe[t],o)/100,o++,outx=getIntValue(alphaframe[t],o),o++,outz=getIntValue(alphaframe[t],o),o++,glrun=getIntValue(alphaframe[t],o),o++,goalsad=getIntValue(alphaframe[t],o),o++)}function readccf(){(time<3750||1==side)&&time<7500&&(time=getIntValue(ccframe,3)),blwith=getIntValue(ccframe,4),onp[0]=getIntValue(ccframe,5),onp[1]=getIntValue(ccframe,6),out=getIntValue(ccframe,7),oft=getIntValue(ccframe,8),outx=getIntValue(ccframe,9),outz=getIntValue(ccframe,10),rxgo[pnum]=getIntValue(ccframe,11),rzgo[pnum]=getIntValue(ccframe,12);for(var t=13,l=0;l<2;l++)gvrand[l]=0,kgupdt[l]=0,kpx[l]=getIntValue(ccframe,t),t++,kpz[l]=getIntValue(ccframe,t),t++,kdir[l]=getIntValue(ccframe,t),t++;for(l=0;l<20;l++)plx[l]=getIntValue(ccframe,t),t++,plz[l]=getIntValue(ccframe,t),t++,dir[l]=getIntValue(ccframe,t),t++,shot[l]=getIntValue(ccframe,t),t++;for(l=0;l<2;l++)bli[l]=getIntValue(ccframe,t),t++,blrunstat[l]=getIntValue(ccframe,t),t++,blrunpy[l]=getIntValue(ccframe,t),t++,rux[l]=getIntValue(ccframe,t),t++,ruz[l]=getIntValue(ccframe,t),t++;blx=getIntValue(ccframe,t),t++,blz=getIntValue(ccframe,t),t++,bly=getIntValue(ccframe,t),t++,bvx=getIntValue(ccframe,t)/100,t++,bvy=getIntValue(ccframe,t)/100,t++,bvz=getIntValue(ccframe,t)/100,t++,bnvx=getIntValue(ccframe,t)/1e4,t++,bnvz=getIntValue(ccframe,t)/1e4,t++,lai=getIntValue(ccframe,t),t++;var a=getIntValue(ccframe,t);t++,flyball=1==a,onrecoil=getIntValue(ccframe,t),t++,onslide=getIntValue(ccframe,t),t++,hseed=getIntValue(ccframe,t),t++,fseed=getIntValue(ccframe,t),t++,kseed=getIntValue(ccframe,t),t++,sseed=getIntValue(ccframe,t),t++,vseed=getIntValue(ccframe,t),t++}var rws=null,findingmatch=0,multoff=0,multoffmsg="";function multstatus(){"WebSocket"in window&&((rws=new WebSocket("wss://radicalplay.com:32364/wow")).onopen=function(){rws.send("0|2|")},rws.onmessage=function(t){var l=""+t.data;404==(multoff=getIntValue(l,3))&&(multoffmsg=getStringValue(l,4)),rws.close()})}function findmatch(){"WebSocket"in window&&((rws=new WebSocket("wss://radicalplay.com:32364/wow")).onopen=function(){findingmatch=1,sendreq()},rws.onmessage=function(t){reqresp(""+t.data)},rws.onclose=function(){findingmatch=-1})}var ntc=1;function sendreq(){rws.send(ntc+"|1|"+(onlev+1)+"|"+tsel[0]+"|"+trophy[0]+"|"+ntrophy[0]+"|"+plan[0][0]+"|"+plan[0][1]+"|"+plan[0][2]+"|"+planpos[0]+"|"),ntc++}var timeoutat=2250;function reqresp(t){var l=getIntValue(t,2);if(5==l){for(pnum=getIntValue(t,3)-1,roomserver=getStringValue(t,4),roomport=getIntValue(t,5),roomkey=getIntValue(t,6),tsel[1]=getIntValue(t,8),tsel[1]>=ntm&&(tsel[1]=tsel[0]);tsel[1]==tsel[0];)tsel[1]=Math.floor(Math.random()*ntm),tsel[1]==ntm&&(tsel[1]=ntm-1);trophy[1]=getIntValue(t,9),(trophy[1]<0||trophy[1]>3)&&(trophy[1]=0),ntrophy[1]=getIntValue(t,10),plan[1][0]=getIntValue(t,11),plan[1][1]=getIntValue(t,12),plan[1][2]=getIntValue(t,13),planpos[1]=getIntValue(t,14),findingmatch=-1,rws.close()}6!=l&&1!=l||(rws.close(),findingmatch=-1,cntimeout=timeoutat)}var fsel=[0,0,0],yfx=[],subto=0,trophy=[0,0],ntrophy=[0,0];function drawmatchup(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[1],0,0,canw,canh);var t=.5*(mw+mh);rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(troname[onlev],.5*canw,60*mh),rd.drawImage(troph[onlev],.5*canw-.5*tiwd[onlev]*t,100*mh,tiwd[onlev]*t,tihd[onlev]*t);var l=350,a=90,o=30,n=530;if(0==cntimeout){for(var e=0;e<3;e++)for(var r=!0;r;){fsel[e]=Math.floor(Math.random()*ntm),fsel[e]==ntm&&(fsel[e]=ntm-1),r=!1;for(var m=0;m<3;m++)m!=e&&fsel[e]==fsel[m]&&(r=!0)}yfx=[-90,0,a],tsel[1]=-1,wasonhalt=-1,midhalt=0,noflk=0,findingmatch=0,trophy[0]=0,ntrophy[0]=0;for(e=1;e<4;e++)0!=wontro[e]&&(trophy[0]=e,ntrophy[0]=wontro[e]);findmatch(),cntimeout=1}rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#000000",noflk>=2&&(rd.fillStyle="#0085CA"),0!=onlev&&cntimeout<timeoutat&&rd.fillText("Points - "+points,220*mw,310*mh),0!=trophy[0]&&(rd.fillStyle="#000000",rd.drawImage(troph[trophy[0]],260*mw,450*mh,tiwd[trophy[0]]*t*.5,tihd[trophy[0]]*t*.5),rd.fillText("x"+ntrophy[0],265*mw+tiwd[trophy[0]]*t*.5,450*mh+tihd[trophy[0]]*t*.25)),midhalt?(midhalt<50&&(rd.globalAlpha=(50-midhalt)/50,rd.fillStyle="#002132",rd.fillText("Opponent found",760*mw,310*mh),rd.globalAlpha=1),Math.abs(points-subto)>10?(points-=Math.floor((points-subto)/10),++noflk>4&&(noflk=0)):(points=subto,noflk=0),0!=trophy[1]&&(rd.fillStyle="#000000",rd.drawImage(troph[trophy[1]],910*mw,450*mh,tiwd[trophy[1]]*t*.5,tihd[trophy[1]]*t*.5),rd.fillText("x"+ntrophy[1],915*mw+tiwd[trophy[1]]*t*.5,450*mh+tihd[trophy[1]]*t*.25)),midhalt>30&&(rd.fillStyle="#002132",rd.textAlign="center",rd.fillText("Starting match now...",.5*canw,550*mh))):(rd.fillStyle="#004264",findingmatch>=0&&findingmatch<25&&rd.fillText("Finding opponent...",810*mw,200*mh),findingmatch>=25&&findingmatch<50&&rd.fillText("Finding opponent",810*mw,200*mh),findingmatch>=50&&findingmatch<75&&rd.fillText("Finding opponent.",810*mw,200*mh),findingmatch>=75&&findingmatch<100&&rd.fillText("Finding opponent..",810*mw,200*mh));var d=l*mh;for(rd.fillStyle="#000000",rd.globalAlpha=.6,rd.fillRect(10*mw+a*mh*.5,d,n*t,a*mh),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[0]],10*mw,d-90*mh*.5,180*mh,180*mh),rd.font=o*(mh+mw)+"px TekoSkills";n*t/rd.measureText(""+team[tsel[0]]).width<1.45;)o--,rd.font=o*(mh+mw)+"px TekoSkills";if(rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(""+team[tsel[0]],20*mw+180*mh,d+a*mh*.6),midhalt?(rd.fillStyle="#000000",rd.globalAlpha=.3,rd.fillRect(10*mw+a*mh*.5+n*t,d+a*mh*.44,canw-20*mw-a*mh-1060*t,a*mh*.12)):(rd.fillStyle="#000000",rd.globalAlpha=.3,rd.fillRect(10*mw+a*mh*.5+n*t,d+a*mh*.44,a*mw*.3,a*mh*.12),rd.fillRect(canw-10*mw-a*mh*.5-n*t-a*mw*.3,d+a*mh*.44,a*mw*.3,a*mh*.12)),midhalt){if(d=l*mh,rd.fillStyle="#000000",rd.globalAlpha=.6,rd.fillRect(canw-10*mw-a*mh*.5-n*t,d,n*t,a*mh),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[1]],canw-10*mw-180*mh,d-90*mh*.5,180*mh,180*mh),rd.font=o*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(""+team[tsel[1]],canw-20*mw-180*mh,d+a*mh*.6),100==++midhalt){if(saveInfo("points",points),1==pnum){var i=tsel[0],p=trophy[0],s=ntrophy[0],f=plan[0],c=planpos[0];tsel[0]=tsel[1],trophy[0]=trophy[1],ntrophy[0]=ntrophy[1],plan[0]=plan[1],planpos[0]=planpos[1],tsel[1]=i,trophy[1]=p,ntrophy[1]=s,plan[1]=f,planpos[1]=c}nt=2,loadteam[0]=1,loadteam[1]=1,ont=0,fase=5}}else{for(e=0;e<3;e++)yfx[e]<135&&(yfx[e]<=-45||yfx[e]>=45)&&(d=(l+yfx[e])*mh,rd.fillStyle="#000000",rd.globalAlpha=(135-Math.abs(yfx[e]))/135*.6,rd.fillRect(canw-10*mw-a*mh*.5-n*t,d,n*t,a*mh),rd.globalAlpha=(135-Math.abs(yfx[e]))/135*1,rd.drawImage(teamflag[fsel[e]],canw-10*mw-180*mh,d-90*mh*.5,180*mh,180*mh),rd.font=o*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[fsel[e]],canw-20*mw-180*mh,d+a*mh*.6),rd.globalAlpha=1);for(e=0;e<3;e++)yfx[e]>-45&&yfx[e]<45&&(d=(l+yfx[e])*mh,rd.fillStyle="#000000",rd.globalAlpha=(135-Math.abs(yfx[e]))/135*.6,rd.fillRect(canw-10*mw-a*mh*.5-n*t,d,n*t,a*mh),rd.globalAlpha=(135-Math.abs(yfx[e]))/135*1,rd.drawImage(teamflag[fsel[e]],canw-10*mw-180*mh,d-90*mh*.5,180*mh,180*mh),rd.font=o*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[fsel[e]],canw-20*mw-180*mh,d+a*mh*.6),rd.globalAlpha=1);if(cntimeout<timeoutat){for(e=0;e<3;e++){if(yfx[e]+=10,yfx[e]>180){yfx[e]=-90;for(r=!0;r;){fsel[e]=Math.floor(Math.random()*ntm),fsel[e]==ntm&&(fsel[e]=ntm-1),r=!1;for(m=0;m<3;m++)m!=e&&fsel[e]==fsel[m]&&(r=!0)}-1!=tsel[1]&&cntimeout>100&&(fsel[e]=tsel[1],wasonhalt=e)}wasonhalt==e&&yfx[e]>0&&(midhalt=1,subto=points-entry[onlev])}onit=0,btnx=20*mw,btny=canh-74*t-30*mh,declick(btnx,btnx+100*t,btny,btny+66*t,2),2==wasonit&&(onit=1),onaclk>7&&2==onwho&&(onit=1),9==onaclk&&2==onwho&&(findingmatch>=1&&(findingmatch=-1,rws.close()),fase=4,multiflex=!0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(onit,btnx,btny,100*t,66*t,"#0065C4","#00CCE4","#00488C","#008FA0",25,"EXIT",.15,.63,.1,.1,.2,.1)}else findingmatch>=1&&(findingmatch=-1,rws.close()),rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText("Ooops!",.5*canw,520*mh),cntimeout<timeoutat+50&&(noflk>3&&(rd.fillStyle="#0085CA"),++noflk>6&&(noflk=0)),rd.fillText("Did not find an opponent at this time, please try again later!",.5*canw,590*mh),cntimeout>timeoutat+120&&(fase=4);cntimeout++,findingmatch>=1&&-1==tsel[1]&&100==++findingmatch&&(sendreq(),findingmatch=1),musictog()}}var onlev=0,points=2e3,wontro=[0,0,0,0],troname=["Qualification Round","Bronze Boot","Silver Boot","Golden Boot"],entry=[0,100,400,2e3],winin=[50,200,800,0],tiwd=[151,176,202,226],tihd=[151,169,167,163],molev=0,notno=0,noflk=0;function drawlevels(){var t=.5*(mw+mh);if(Math.abs(molev-onlev)<.9){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[1],0,0,canw,canh);var l=70,a=50*mh;rd.fillStyle="#000000",rd.globalAlpha=.6,rd.fillRect(10*mw+l*mh*.5,a,430*t,l*mh),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[0]],10*mw,a-70*mh*.5,140*mh,140*mh),rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[tsel[0]],20*mw+140*mh,a+l*mh*.6),rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="right",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",(notno<20||notno>40||noflk<3)&&rd.fillText("Points : "+points,canw-300*t-60*mw,67*mh);var o=0,n=canw-300*t-30*mw,e=20*mh;declick(n,n+300*t,e,e+66*t,1),1==wasonit&&(o=1),onaclk>7&&1==onwho&&(o=1),9==onaclk&&1==onwho&&(cntimeout=0,fase=14,notno=0,onwho=0,wasonit=0,playsnd(17,1)),0==notno||notno>20||noflk<3?drawbutton(o,n,e,300*t,66*t,"#FAE500","#FF9001","#CE4900","#CA3000",25,"+ POINTS",.073,.63,.05,.1,.05,.1):drawbutton(o,n,e,(300+Math.floor(17*Math.random()))*t,(66+Math.floor(17*Math.random()))*t,"#0012FA","#1100EC","#00A1FE","#1C00C4",25,"+ POINTS",.073,.63,.05,.1,.05,.1)}for(var r=["#43CCFF","#43A4FF","#437DFF","#4355FF"],m=["#004C68","#003668","#002068","#000A68"],d=0;d<4;d++)if(d==onlev||molev!=onlev){if(1==Math.abs(molev-onlev)){var i=.5*canw-390*t+1350*(d-molev)*mh;rd.fillStyle="#ffffff",i+=20*t;for(var p=0;p<19;p++)rd.fillRect(i,160*mh,20*t,367*t),i+=40*t}rd.fillStyle=r[d],rd.globalAlpha=.4,fillroundrect(.5*canw-390*t+1350*(d-molev)*mh,160*mh,780*t,367*t,40*t),rd.globalAlpha=1,Math.abs(molev-onlev)>0&&Math.abs(molev-onlev)<.2&&onlev==d&&(rd.fillStyle="#ffffff",rd.globalAlpha=.7,fillroundrect(.5*canw-390*t+1350*(d-molev)*mh,160*mh,780*t,367*t,40*t),rd.globalAlpha=1),rd.font=27*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",0==notno?3!=d?rd.fillText("Multiplayer Arena "+(d+1),.5*canw+1350*(d-molev)*mh,160*mh+50*t):rd.fillText("Final Multiplayer Arena",.5*canw+1350*(d-molev)*mh,160*mh+50*t):(notno>40&&noflk<3&&(rd.fillStyle="#FF0000"),rd.fillText("Not enought points to enter this arena!",.5*canw+1350*(d-molev)*mh,160*mh+50*t)),rd.fillStyle="#000000",rd.font=32*(mh+mw)+"px TekoSkills";var s=rd.measureText(troname[d]).width,f=s+tiwd[d]*t+20*t;if(wontro[d]&&(rd.font=25*(mh+mw)+"px TekoSkills",f+=rd.measureText("You've won it").width+20*t,rd.font=32*(mh+mw)+"px TekoSkills"),rd.textAlign="left",rd.fillText(troname[d],.5*canw-.5*f+1350*(d-molev)*mh,160*mh+183*t),rd.drawImage(troph[d],.5*canw-.5*f+s+20*t+1350*(d-molev)*mh,160*mh+183*t-.5*tihd[d]*t,tiwd[d]*t,tihd[d]*t),wontro[d]&&(rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.fillText("You've won it",.5*canw-.5*f+tiwd[d]*t+40*t+s+1350*(d-molev)*mh,160*mh+158*t),rd.fillText("x"+wontro[d]+" times!",.5*canw-.5*f+tiwd[d]*t+40*t+s+1350*(d-molev)*mh,160*mh+208*t)),rd.font=25*(mh+mw)+"px TekoSkills",rd.fillStyle=m[d],0==d&&(rd.textAlign="center",rd.fillText("Prize : "+winin[d]+" points",.5*canw+1350*(d-molev)*mh,160*mh+330*t)),1==d||2==d){rd.textAlign="left";var c=.5*rd.measureText("Entry : "+entry[d]+" points      Prize : "+winin[d]+" points").width,h=rd.measureText("Entry : "+entry[d]+" points").width;(notno<20||notno>40||noflk<3)&&rd.fillText("Entry : "+entry[d]+" points",.5*canw-c+1350*(d-molev)*mh,160*mh+330*t),rd.fillText("       Prize : "+winin[d]+" points",.5*canw-c+h+1350*(d-molev)*mh,160*mh+330*t)}3==d&&(rd.textAlign="center",(notno<20||notno>40||noflk<3)&&rd.fillText("Entry : "+entry[d]+" points",.5*canw+1350*(d-molev)*mh,160*mh+330*t))}0!=notno&&(noflk<=0&&(noflk=6),noflk--,notno--),molev==onlev?(0!=onlev&&(o=0,declick(n=.5*canw-390*t-20*mh-190*t,n+190*t,e=160*mh+260*t,e+70*t,4),4==wasonit&&(o=1),onaclk>7&&4==onwho&&(o=1),9==onaclk&&4==onwho&&(--onlev<0&&(onlev=0),notno=0,playsnd(18,1)),drawbutton(o,n,e,190*t,70*t,"#0065C4","#00CCE4","#00488C","#008FA0",31,"< PREV",.18,.62,.05,.05,.23,.1)),3!=onlev&&molev==onlev&&(o=0,declick(n=.5*canw+390*t+15*mh,n+190*t,e=160*mh+260*t,e+70*t,5),5==wasonit&&(o=1),onaclk>7&&5==onwho&&(o=1),9==onaclk&&5==onwho&&(++onlev>3&&(onlev=3),notno=0,playsnd(18,1)),drawbutton(o,n,e,190*t,70*t,"#0065C4","#00CCE4","#00488C","#008FA0",31,"NEXT >",.1,.62,.1,.23,.05,.05))):Math.abs(molev-onlev)>.1?molev<onlev?molev+=.05:molev-=.05:molev=onlev,o=0,declick(n=20*mw,n+380*t,e=canh-74*t-30*mh,e+66*t,2),2==wasonit&&(o=1),onaclk>7&&2==onwho&&(o=1),9==onaclk&&2==onwho&&(fase=2,alflex=1,notno=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(o,n,e,380*t,66*t,"#0065C4","#00CCE4","#00488C","#008FA0",25,"CHANGE TEAM / EXIT",.073,.63,.05,.05,.1,.05),o=0,declick(n=.5*canw-170*t,n+370*t,e=canh-82*t-30*mh,e+82*t,3),3==wasonit&&(o=1),onaclk>7&&3==onwho&&(o=1),9==onaclk&&3==onwho&&(onlev>0&&points<entry[onlev]?notno=80:(cntimeout=0,fase=13),onwho=0,wasonit=0,playsnd(17,1)),drawbutton(o,n,e,370*t,82*t,"#0065C4","#00CCE4","#00488C","#008FA0",37,"PLAY MATCH",.07,.63,.12,.03,.03,.08),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),musictog()}var reward=100;function drawreward(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[1],0,0,canw,canh);var t=.5*(mw+mh);rd.font=30*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText("Ad Campaign",.5*canw,60*mh),0==cntimeout&&(rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#00253A",rd.fillText("Launch an advertisement campaign to get "+reward+" points instantly!",100*mw,250*mh),rd.fillText("Use the extra points to advance through the multiplayer arenas faster.",100*mw,320*mh),onit=0,btnx=740*mw,btny=370*mh,declick(btnx,btnx+400*t,btny,btny+80*t,1),1==wasonit&&(onit=1),onaclk>7&&1==onwho&&(onit=1),9==onaclk&&1==onwho&&(cntimeout=1,showRewardAd(),onwho=0,wasonit=0),drawbutton(onit,btnx,btny,400*t,80*t,"#FAE500","#FF9001","#CE4900","#CA3000",29,"+"+reward+" POINTS",.1,.63,.05,.1,.05,.1)),1==cntimeout&&(rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#00253A",rd.fillText("Displaying advertisement now, one moment...",.5*canw,330*mh)),2==cntimeout&&(rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#00253A",rd.fillText("Sorry, failed to display an advertisement at this moment.",.5*canw,300*mh),rd.fillText("Please try again later.",.5*canw,380*mh),220==++pointcnt&&(fase=4,multiflex=!0,pointcnt=0)),3==cntimeout&&(0==pointcnt&&(subto=points,saveInfo("points",points+=reward)),rd.font=28*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#00253A",rd.fillText("Reward points advertisement complete!",.5*canw,300*mh),pointcnt<50&&(noflk>3&&(rd.fillStyle="#B5CA00"),++noflk>6&&(noflk=0)),rd.fillText("You got "+reward+" points!",.5*canw,380*mh),pointcnt>50&&(51==pointcnt&&playsnd(19,1),rd.fillStyle="#00253A",Math.abs(points-subto)>10?(subto+=Math.floor((points-subto)/10),noflk>3&&(rd.fillStyle="#72CA00"),++noflk>6&&(noflk=0)):subto=points,rd.fillText("Total points : "+subto,.5*canw,460*mh)),300==++pointcnt&&(fase=4,multiflex=!0,pointcnt=0)),1!=cntimeout&&(onit=0,btnx=20*mw,btny=canh-74*t-30*mh,declick(btnx,btnx+320*t,btny,btny+66*t,2),2==wasonit&&(onit=1),onaclk>7&&2==onwho&&(onit=1),9==onaclk&&2==onwho&&(fase=4,multiflex=!0,pointcnt=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(onit,btnx,btny,320*t,66*t,"#0065C4","#00CCE4","#00488C","#008FA0",25,"<  BACK TO GAME",.073,.63,.05,.05,.1,.05)),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),musictog()}var onform=0,formtweak=0,ondrago=!1;function drawformation(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[5],0,0,canw,canh);var t=.5*(mw+mh),l=70,a=50*mh;rd.fillStyle="#000000",rd.globalAlpha=.6,rd.fillRect(10*mw+l*mh*.5,a,430*t,l*mh),rd.globalAlpha=1,rd.drawImage(teamflag[tsel[0]],10*mw,a-70*mh*.5,140*mh,140*mh),rd.font=25*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#FFFFFF",rd.fillText(team[tsel[0]],20*mw+140*mh,a+l*mh*.6);var o=[[4,3,3],[3,4,3],[3,3,4],[4,4,2],[4,2,4],[2,4,4],[5,3,2],[5,2,3],[2,5,3],[3,5,2],[3,2,5],[2,3,5]];rd.drawImage(forma,canw-605*mw,36*mh,605*mw,649*mh);for(var n=0,e=[],r=[],m=0;m<3;m++)for(var d=0;d<o[onform][m];d++){var i=162+162*m;2==o[onform][m]&&(0==d&&(e[n]=i-.4635*formtweak,r[n]=115),1==d&&(e[n]=i-.4635*formtweak,r[n]=-115)),3==o[onform][m]&&(0==d&&(e[n]=i+.4635*formtweak,r[n]=230),1==d&&(e[n]=i-.4635*formtweak,r[n]=0),2==d&&(e[n]=i+.4635*formtweak,r[n]=-230)),4==o[onform][m]&&(0==d&&(e[n]=i+.4635*formtweak,r[n]=345),1==d&&(e[n]=i-.4635*formtweak,r[n]=115),2==d&&(e[n]=i-.4635*formtweak,r[n]=-115),3==d&&(e[n]=i+.4635*formtweak,r[n]=-345)),5==o[onform][m]&&(0==d&&(e[n]=i+.4635*formtweak,r[n]=368),1==d&&(e[n]=i-.4635*formtweak*.5,r[n]=184),2==d&&(e[n]=i-.4635*formtweak,r[n]=0),3==d&&(e[n]=i-.4635*formtweak*.5,r[n]=-184),4==d&&(e[n]=i+.4635*formtweak,r[n]=-368)),n++}for(d=0;d<n;d++)e[d]=(685-e[d])*mh,r[d]=canw-292*mw-.4326*r[d]*mw,rd.fillStyle="#206A00",rd.beginPath(),rd.arc(r[d],e[d],8*t,0,2*Math.PI),rd.fill(),rd.lineWidth=2*t,rd.strokeStyle="#000000",rd.beginPath(),rd.arc(r[d],e[d],8*t,0,2*Math.PI),rd.stroke();var p=662*mh,s=canw-292*mw;rd.fillStyle="#206A00",rd.beginPath(),rd.arc(s,p,8*t,0,2*Math.PI),rd.fill(),rd.lineWidth=2*t,rd.strokeStyle="#000000",rd.beginPath(),rd.arc(s,p,8*t,0,2*Math.PI),rd.stroke(),rd.font=27*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText("TEAM FORMATION  :  [ "+o[onform][0]+" , "+o[onform][1]+" , "+o[onform][2]+" ]",40*mw,220*mh);var f=rd.measureText("TEAM FORMATION  :  [ 0 , ").width+40*mw+.5*rd.measureText("0").width,c=0,h=f-50*mw-165*t,x=260*mh;if(declick(h,h+160*t,x,x+55*t,1),1==wasonit&&(c=1),onaclk>7&&1==onwho&&(c=1),9==onaclk&&1==onwho&&(--onform<0&&(onform=11),playsnd(18,1)),drawbutton(c,h,x,160*t,55*t,"#FF7F01","#DEEC00","#FE5A00","#ADC400",27,"< PREV",.17,.62,.05,.05,.23,.1),c=0,declick(h=f+50*mw,h+160*t,x=260*mh,x+55*t,2),2==wasonit&&(c=1),onaclk>7&&2==onwho&&(c=1),9==onaclk&&2==onwho&&(++onform>=12&&(onform=0),playsnd(18,1)),drawbutton(c,h,x,160*t,55*t,"#FF7F01","#DEEC00","#FE5A00","#ADC400",27,"NEXT >",.1,.62,.1,.23,.05,.05),rd.font=27*(mh+mw)+"px TekoSkills",rd.textAlign="left",rd.textBaseline="middle",rd.fillStyle="#000000",rd.fillText("FORMATION TWEAKING",40*mw,420*mh),rd.fillStyle="#206A00",fillroundrect(80*mw,520*mh,550*mw,12*mh,6*mh),rd.fillStyle="#000000",rd.fillRect(84*mw,524*mh,538*mw,4*mh),rd.fillStyle="#206A00",fillroundrect(65*mw+275*mw+2.29167*formtweak*mw,506*mh,30*mw,40*mh,10*mh),rd.fillStyle="#DEEC00",rd.fillRect(78*mw+275*mw+2.29167*formtweak*mw,516*mh,4*mw,20*mh),rd.fillStyle="#000000",rd.textAlign="center",rd.fillText(""+formtweak,80*mw+275*mw+2.29167*formtweak*mw,490*mh),xm>80*mw&&xm<630*mw&&ym>470*mh&&ym<590*mh&&mdown&&(ondrago=!0),mdown?ondrago&&((formtweak=Math.floor((xm-355*mw)/(275*mw)*120))<-120&&(formtweak=-120),formtweak>120&&(formtweak=120)):ondrago=!1,c=0,declick(h=20*mw,h+180*t,x=canh-74*t-30*mh,x+66*t,3),3==wasonit&&(c=1),onaclk>7&&3==onwho&&(c=1),9==onaclk&&3==onwho&&(fase=2,notno=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(c,h,x,180*t,66*t,"#53DF00","#FFF300","#4FC300","#FBD400",25,"<  BACK",.1,.63,.05,.05,.1,.05),c=0,declick(h=.4*canw-150*t,h+300*t,x=canh-82*t-30*mh,x+82*t,4),4==wasonit&&(c=1),onaclk>7&&4==onwho&&(c=1),9==onaclk&&4==onwho){saveInfo("onform",onform),saveInfo("formtweak",formtweak),plan[0]=o[onform],planpos[0]=formtweak;for(d=0;d<4;d++)points>=entry[d]&&(onlev=d);molev=onlev,multiflex=!0,fase=4,onwho=0,wasonit=0,playsnd(17,1)}drawbutton(c,h,x,300*t,82*t,"#53DF00","#FFF300","#4FC300","#FBD400",37,"CONTINUE",.07,.63,.12,.03,.03,.08),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),musictog()}function drawmultoff(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[5],0,0,canw,canh);var t=.5*(mw+mh);rd.font=32*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#000000",cntimeout<70&&(noflk>5&&(rd.fillStyle="#FFAA00"),++noflk>10&&(noflk=0),cntimeout++),rd.fillText("Ooops sorry!",.5*canw,120*mh),rd.fillText("The multiplayer is undergoing maintenance at the moment!",.5*canw,220*mh),rd.fillStyle="#000000",rd.fillText(multoffmsg,.5*canw,320*mh),onit=0,btnx=.5*canw-160*t,btny=canh-74*t-90*mh,declick(btnx,btnx+320*t,btny,btny+66*t,2),2==wasonit&&(onit=1),onaclk>7&&2==onwho&&(onit=1),9==onaclk&&2==onwho&&(fase=2,cntimeout=0,onwho=0,wasonit=0,playsnd(17,1)),drawbutton(onit,btnx,btny,320*t,66*t,"#53DF00","#FFF300","#4FC300","#FBD400",25,"<  BACK TO GAME",.073,.63,.05,.05,.1,.05),flmg?(flum+=.01)>=1&&(flmg=!1):(flum-=.01)<=.2&&(flmg=!0),flng?(flin+=.1)>=.9&&(flng=!1):(flin-=.1)<=-.9&&(flng=!0),musictog()}function drawconnect(){rd.fillStyle="#001D00",rd.fillRect(0,0,canw,canh),rd.drawImage(bgimg[3],.55*canh,0,canw-.55*canh,canh),rd.drawImage(bgimg[2],0,0,.56944*canh,canh);var t=.5*(mw+mh);0==cntimeout&&(contoroom(),cntimeout=1),rd.font=34*(mh+mw)+"px TekoSkills",rd.textAlign="center",rd.textBaseline="middle",rd.fillStyle="#ffffff",0==conon&&(rd.fillText("Failed to connect, please try again...",.5*canw,300*mh),120==++wasonhalt&&(1==pnum&&(tsel[0]=tsel[1]),entry[onlev]>0&&saveInfo("points",points+=entry[onlev]),fase=9,trans=0)),1==conon&&(rd.fillText("Connecting to match...",.5*canw,300*mh),350==++cntimeout&&closroom()),rd.drawImage(logo,canw-558*t-50*mw,560*mh-150*t,558*t,216*t),2==conon&&(badcon=0,halt=1,wasonhalt=0,cntimeout=0,midhalt=0,multmenu=!1,multexit=-1,orgteam(),fase=6)}function saveInfo(t,l){try{"undefined"!=typeof Storage&&null!=localStorage&&localStorage.setItem(t,l)}catch(t){}}function getInfo(t){var l="0";"formtweak"==t&&(l="30");try{"undefined"!=typeof Storage&&null!=localStorage&&null!=localStorage.getItem(t)&&(l=localStorage.getItem(t))}catch(t){}var a=parseInt(l);return Number.isNaN(a)&&(a=0),a}function getIntValue(t,l){var a=-1;try{for(var o=0,n=0,e=0,r="",m="";o<t.length&&2!=e;)"|"==(r=""+t.charAt(o))?(n++,(1==e||n>l)&&(e=2)):n==l&&(m+=r,e=1),o++;""==m&&(m="-1"),"NaN"==""+(a=parseInt(m))&&(a=-1)}catch(t){a=-1}return a}function getStringValue(t,l){var a="";try{for(var o=0,n=0,e=0,r="",m="";o<t.length&&2!=e;)"|"==(r=""+t.charAt(o))?(n++,(1==e||n>l)&&(e=2)):n==l&&(m+=r,e=1),o++;a=m}catch(t){a=""}return a}